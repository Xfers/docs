<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Xfers API Reference</title>    
    <link rel="icon" type="image/png" href="images/favicon.ico">

    <link href="stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
      <script src="javascripts/all.js" type="text/javascript"></script>

      <script>
        $(function() {
          setupLanguages(["shell","php","python","ruby","java"]);
        });
      </script>
  </head>

  <body class="index">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
              <a href="#" data-language-name="php">php</a>
              <a href="#" data-language-name="python">python</a>
              <a href="#" data-language-name="ruby">ruby</a>
              <a href="#" data-language-name="java">java</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='https://www.xfers.io/account_registration'>Sign Up for a Developer Key</a></li>
            <li><a href="mailto:support@xfers.io">Need help? Email us</a></li>
            <li><a href='https://github.com/Xfers'>SDKs</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <!--- Xfers User API Section -->

<h1 id="introduction">Introduction</h1>

<p>The <strong>Xfers Core API</strong> provides a set of simple RESTFUL APIs to allow businesses to 
integrate internet banking and credit card payments into your business or applications. </p>

<p>You will make use of the Xfers Core API to manage your own account programmatically. </p>

<p><strong>Xfers Connect</strong> is for accepting payments on behalf of others, think of this as a super user that can manage and 
create accounts on the behalf of others. </p>

<p><strong>Official SDKs</strong> for the Xfers API are <a href="https://github.com/Xfers">available in several languages</a>.</p>

<h1 id="testing">Testing</h1>

<p>We&rsquo;ve made a testing guide at <a href="https://www.xfers.com/sg/developers/getting-started-with-testing/">https://www.xfers.com/sg/developers/getting-started-with-testing/</a> for you to easily get started!</p>

<h1 id="apis-endpoints">APIs endpoints</h1>

<p>Xfers provides a <strong>dedicated sandbox environment</strong> where you can simulate an incoming bank transfer for testing purposes. 
Note that this feature will not be available in production mode. </p>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="k">require_once</span><span class="p">(</span><span class="s1">'vendor/autoload.php'</span><span class="p">);</span>

<span class="c1"># SG: Singapore
# ID: Indonesia
# Set one of the following endpoints below:
</span><span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setSGProduction</span><span class="p">();</span>
<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setSGSandbox</span><span class="p">();</span>
<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setIDProduction</span><span class="p">();</span>
<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setIDSandbox</span><span class="p">();</span>
</code></pre>
<pre class="highlight python"><code><span class="c"># SG: Singapore</span>
<span class="c"># ID: Indonesia</span>
<span class="c"># Set one of the following endpoints below:</span>
<span class="kn">import</span> <span class="nn">xfers</span>
<span class="n">xfers</span><span class="o">.</span><span class="n">set_sg_production</span><span class="p">()</span>
<span class="n">xfers</span><span class="o">.</span><span class="n">set_sg_sandbox</span><span class="p">()</span>
<span class="n">xfers</span><span class="o">.</span><span class="n">set_id_production</span><span class="p">()</span>
<span class="n">xfers</span><span class="o">.</span><span class="n">set_id_sandbox</span><span class="p">()</span>
</code></pre>
<pre class="highlight ruby"><code><span class="c1"># SG: Singapore</span>
<span class="c1"># ID: Indonesia</span>
<span class="c1"># Set one of the following endpoints below:</span>
<span class="nb">require</span> <span class="s1">'xfers'</span>
<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_sg_production</span>
<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_sg_sandbox</span>
<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_id_production</span>
<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_id_sandbox</span>
</code></pre>
<pre class="highlight java"><code><span class="c1">// SG: Singapore</span>
<span class="c1">// ID: Indonesia</span>
<span class="c1">// Set one of the following endpoints below:</span>
<span class="n">Xfers</span><span class="o">.</span><span class="na">setSGProduction</span><span class="o">();</span>
<span class="n">Xfers</span><span class="o">.</span><span class="na">setSGSandbox</span><span class="o">();</span>
<span class="n">Xfers</span><span class="o">.</span><span class="na">setIDProduction</span><span class="o">();</span>
<span class="n">Xfers</span><span class="o">.</span><span class="na">setIDSandbox</span><span class="o">();</span>
</code></pre>

<p>For testing purposes, we highly recommend that your head over to <a href="https://sandbox.xfers.io">sandbox.xfers.io</a> and create a sandbox account.</p>

<p>While in testing mode, point to our sandbox API endpoint at:</p>

<p>Singapore:
<code class="prettyprint">https://sandbox.xfers.io/api/v3</code></p>

<p>Indonesia:<code class="prettyprint">https://sandbox-id.xfers.com/api/v3</code></p>

<p>To switch to production, point to our production API endpoint at:</p>

<p>Singapore: <code class="prettyprint">https://www.xfers.io/api/v3</code></p>

<p>Indonesia: <code class="prettyprint">https://id.xfers.com/api/v3</code></p>

<aside class="notice">
Sandbox and Production are two separate environments. Please ensure your register for an account at EACH environment and use their individual API Key.
</aside>

<aside class="notice">
All the examples code in this document will be pointing to our sandbox endpoint.
</aside>

<p>Note that all API calls are done through HTTPS, please do not attempt to hit our endpoint via HTTP, as you will also be 
exposing your API key in plain text.</p>

<h1 id="xfers-core">Xfers Core</h1>

<p>The <strong>Xfers Core API</strong> provides a set of simple RESTFUL APIs to allow businesses to 
integrate internet banking and credit card payments into your business or applications. </p>

<p>You will make use of the Xfers Core API to manage your own account programmatically. </p>

<h2 id="authentication">Authentication</h2>

<blockquote>
<p>Setting API keys</p>
</blockquote>
<pre class="highlight shell"><code><span class="c"># With shell, you can just pass the correct header with each request</span>
curl <span class="s2">"https://sandbox.xfers.io/api/v3/authorize/hello"</span> <span class="se">\</span>
  -H <span class="s2">"X-XFERS-USER-API-KEY: FVNbKjcGZ5Xx-Uf2XnxsrGtoxmLm9YEgokzDRoyshFc"</span>
</code></pre>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="k">require_once</span><span class="p">(</span><span class="s1">'vendor/autoload.php'</span><span class="p">);</span>

<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setApiKey</span><span class="p">(</span><span class="s1">'FVNbKjcGZ5Xx-Uf2XnxsrGtoxmLm9YEgokzDRoyshFc'</span><span class="p">);</span>
<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setSGSandbox</span><span class="p">();</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">xfers</span>
<span class="n">xfers</span><span class="o">.</span><span class="n">api_key</span> <span class="o">=</span> <span class="s">'FVNbKjcGZ5Xx-Uf2XnxsrGtoxmLm9YEgokzDRoyshFc'</span>
<span class="n">xfers</span><span class="o">.</span><span class="n">set_sg_sandbox</span><span class="p">()</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'xfers'</span>

<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_api_key</span> <span class="s1">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span>
<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_sg_sandbox</span>
</code></pre>
<pre class="highlight java"><code><span class="n">Xfers</span><span class="o">.</span><span class="na">apiKey</span> <span class="o">=</span> <span class="s">"FVNbKjcGZ5Xx-Uf2XnxsrGtoxmLm9YEgokzDRoyshFc"</span><span class="o">;</span>
<span class="n">Xfers</span><span class="o">.</span><span class="na">setSGSandbox</span><span class="o">();</span>
</code></pre>

<blockquote>
<p>Make sure to replace <code class="prettyprint">FVNbKjcGZ5Xx-Uf2XnxsrGtoxmLm9YEgokzDRoyshFc</code> with your own API key.</p>
</blockquote>

<p>Xfers uses API keys to allow access to the API. You can get your API key from your <a href="https://sandbox.xfers.io/account_settings">Account Settings</a> page.</p>

<p>Xfers expects the API key to be included in the header of all API requests to the server, like so:</p>

<p><code class="prettyprint">X-XFERS-USER-API-KEY: FVNbKjcGZ5Xx-Uf2XnxsrGtoxmLm9YEgokzDRoyshFc</code></p>

<h4 id="https-request">HTTPS Request</h4>

<p><code class="prettyprint">GET https://sandbox.xfers.io/api/v3/authorize/hello</code></p>

<aside class="notice">
You must replace <code>FVNbKjcGZ5Xx-Uf2XnxsrGtoxmLm9YEgokzDRoyshFc</code> with your personal API key.
</aside>

<aside class="warning">
All endpoints are in HTTPS. Please do not attempt to hit our endpoint in HTTP, beside failing you will also be exposing your API key in plain text!
</aside>

<h3 id="types-of-api-keys">Types of API Keys</h3>

<table><thead>
<tr>
<th>Type</th>
<th>Version</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>X-XFERS-APP-API-KEY</td>
<td>V3</td>
<td>Only used for Xfers Connect</td>
</tr>
<tr>
<td>X-XFERS-USER-API-KEY</td>
<td>V3</td>
<td>The majority of our APIs uses this</td>
</tr>
<tr>
<td>X-XFERS-USER-API-KEY</td>
<td>V2 (Legacy)</td>
<td>Our legacy V2 API keys. These are only used for our WooCommerce, Opencart and Magento plugins.</td>
</tr>
</tbody></table>

<p><img alt="XFERS-API-KEYS" src="images/xfers-api-keys.png" /></p>

<h2 id="user-account">User Account</h2>

<p>The account info API supports querying and making changes to a User&rsquo;s account.</p>

<h3 id="get-account-info">Get Account Info</h3>
<pre class="highlight shell"><code>curl <span class="s2">"https://sandbox.xfers.io/api/v3/user"</span> <span class="se">\</span>
  -H <span class="s2">"X-XFERS-USER-API-KEY: FVNbKjcGZ5Xx-Uf2XnxsrGtoxmLm9YEgokzDRoyshFc"</span>
</code></pre>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="k">require_once</span><span class="p">(</span><span class="s1">'vendor/autoload.php'</span><span class="p">);</span>

<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setApiKey</span><span class="p">(</span><span class="s1">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span><span class="p">);</span>
<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setSGSandbox</span><span class="p">();</span>
<span class="nv">$resp</span> <span class="o">=</span> <span class="nx">\Xfers\User</span><span class="o">::</span><span class="na">retrieve</span><span class="p">();</span>
<span class="nb">print_r</span><span class="p">(</span><span class="nv">$resp</span><span class="p">);</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">xfers</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">xfuser</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">error</span>
<span class="n">xfers</span><span class="o">.</span><span class="n">api_key</span> <span class="o">=</span> <span class="s">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span>
<span class="n">xfers</span><span class="o">.</span><span class="n">set_sg_sandbox</span><span class="p">()</span>
<span class="k">try</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">'Retrieving user...'</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">xfuser</span><span class="o">.</span><span class="n">retrieve</span><span class="p">()</span>
    <span class="k">print</span> <span class="n">resp</span><span class="p">[</span><span class="s">'first_name'</span><span class="p">]</span>
    <span class="k">print</span> <span class="n">resp</span><span class="p">[</span><span class="s">'last_name'</span><span class="p">]</span>
    <span class="k">print</span> <span class="n">resp</span><span class="p">[</span><span class="s">'available_balance'</span><span class="p">]</span>
    <span class="k">print</span> <span class="n">resp</span><span class="p">[</span><span class="s">'address_line_1'</span><span class="p">]</span>
    <span class="n">bank_accounts</span> <span class="o">=</span> <span class="n">resp</span><span class="p">[</span><span class="s">'bank_accounts'</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">account</span> <span class="ow">in</span> <span class="n">bank_accounts</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">'Bank account: {}'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">account</span><span class="p">)</span>
    <span class="k">print</span> <span class="n">resp</span>
<span class="k">except</span> <span class="n">error</span><span class="o">.</span><span class="n">XfersError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">print</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'xfers'</span>

<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_api_key</span> <span class="s1">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span>
<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_sg_sandbox</span>
<span class="k">begin</span>
  <span class="nb">puts</span> <span class="s1">'Retrieving user...'</span>
  <span class="n">resp</span> <span class="o">=</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">User</span><span class="p">.</span><span class="nf">retrieve</span>
  <span class="nb">puts</span> <span class="n">resp</span><span class="p">[</span><span class="ss">:first_name</span><span class="p">]</span>
  <span class="nb">puts</span> <span class="n">resp</span><span class="p">[</span><span class="ss">:last_name</span><span class="p">]</span>
  <span class="nb">puts</span> <span class="n">resp</span><span class="p">[</span><span class="ss">:available_balance</span><span class="p">]</span>
  <span class="nb">puts</span> <span class="n">resp</span>
<span class="k">rescue</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">XfersError</span> <span class="o">=&gt;</span> <span class="n">e</span>
  <span class="nb">puts</span> <span class="n">e</span><span class="p">.</span><span class="nf">to_s</span>
<span class="k">end</span>
</code></pre>
<pre class="highlight java"><code><span class="n">Xfers</span><span class="o">.</span><span class="na">apiKey</span> <span class="o">=</span> <span class="s">"pXcfdAKNorDe_o1eou1NSp4mwssiEzem_6sg8fwnZWs"</span><span class="o">;</span>
<span class="n">Xfers</span><span class="o">.</span><span class="na">setSGSandbox</span><span class="o">();</span>
<span class="k">try</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Retrieving current user"</span><span class="o">);</span>
    <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="na">retrieve</span><span class="o">();</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getFirstName</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getDateOfBirth</span><span class="o">());</span>
    <span class="k">for</span> <span class="o">(</span><span class="n">BankAccount</span> <span class="n">bankAccount</span> <span class="o">:</span> <span class="n">user</span><span class="o">.</span><span class="na">getBankAccounts</span><span class="o">())</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">bankAccount</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
    <span class="o">}</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span>
</code></pre>

<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"available_balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"50.00"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"ledger_balance"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"250.00"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"credit_card_rate"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"3.5"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"credit_card_fee"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"NA"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"bank_transfer_fee"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"0.45"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"first_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"wenbin"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"last_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Tay"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"address_line_1"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Blk 712 loyang Avenue 5"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"address_line_2"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"#01-41"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"nationality"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Singaporean"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"postal_code"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"340712"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"identity_no"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"s86917127G"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"country"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"sg"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"gender"</span><span class="p">:</span><span class="w"> </span><span class="s2">"male"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"email"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"tianyao@example.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"id_back"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"nricBackPlaceholder.png"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"id_document"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"nricDocumentPlaceholder.png"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"id_front"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"nricFrontPlaceholder.png"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"id_selfie"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"nricSelfiePlaceholder.png"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"phone_no"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"+6597288608"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"multi_bank_account_detected"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"false"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"account_locked"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"false"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"kyc_limit_remaining"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"500.0"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"kyc_verified"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"true"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"is_guest"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"false"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"bank_accounts"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
       </span><span class="s2">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"12312"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"account_no"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"039-312-3432-3"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"bank_abbrev"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"DBS"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
       </span><span class="s2">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"12315"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"account_no"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"129-880-1251-1"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"bank_abbrev"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"OCBC"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint return information related to your account such as available balance, ledger balance,
name and bank account information.</p>

<h4 id="https-request">HTTPS Request</h4>

<p><code class="prettyprint">GET https://sandbox.xfers.io/api/v3/user</code></p>

<h3 id="update-account-info">Update Account Info</h3>
<pre class="highlight shell"><code>curl <span class="s2">"https://sandbox.xfers.io/api/v3/user"</span> <span class="se">\</span>
  -H <span class="s2">"X-XFERS-USER-API-KEY: FVNbKjcGZ5Xx-Uf2XnxsrGtoxmLm9YEgokzDRoyshFc"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -X PUT <span class="se">\</span>
  -d <span class="s1">'{"first_name": "wenbin", "last_name": "tay", "address_line_1": "Blk 712 loyang Avenue 5", "address_line_2": "#01-41", "nationality": "Singaporean", "postal_code": "340712", "identity_no": "s86917127G", "country": "sg"}'</span>
</code></pre>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="k">require_once</span><span class="p">(</span><span class="s1">'vendor/autoload.php'</span><span class="p">);</span>

<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setApiKey</span><span class="p">(</span><span class="s1">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span><span class="p">);</span>
<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setSGSandbox</span><span class="p">();</span>
<span class="nv">$resp</span> <span class="o">=</span> <span class="nx">\Xfers\User</span><span class="o">::</span><span class="na">update</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s1">'first_name'</span> <span class="o">=&gt;</span> <span class="s1">'wenbin'</span><span class="p">,</span>
    <span class="s1">'last_name'</span> <span class="o">=&gt;</span> <span class="s1">'tay'</span><span class="p">,</span>
    <span class="s1">'address_line_1'</span> <span class="o">=&gt;</span> <span class="s1">'Blk 712 loyang Avenue 5'</span><span class="p">,</span>
    <span class="s1">'address_line_2'</span> <span class="o">=&gt;</span> <span class="s1">'#01-41'</span><span class="p">,</span>
    <span class="s1">'nationality'</span> <span class="o">=&gt;</span> <span class="s1">'Singaporean'</span><span class="p">,</span>
    <span class="s1">'postal_code'</span> <span class="o">=&gt;</span> <span class="s1">'340712'</span><span class="p">,</span>
    <span class="s1">'identity_no'</span> <span class="o">=&gt;</span> <span class="s1">'s86917127G'</span><span class="p">,</span>
    <span class="s1">'country'</span> <span class="o">=&gt;</span> <span class="s1">'sg'</span>
<span class="p">));</span>
<span class="nb">print_r</span><span class="p">(</span><span class="nv">$resp</span><span class="p">);</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">xfers</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">xfuser</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">error</span>

<span class="n">xfers</span><span class="o">.</span><span class="n">api_key</span> <span class="o">=</span> <span class="s">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span>
<span class="n">xfers</span><span class="o">.</span><span class="n">set_sg_sandbox</span><span class="p">()</span>

<span class="k">try</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">'Updating user...'</span>
    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
      <span class="s">'first_name'</span><span class="p">:</span> <span class="s">'wenbin'</span><span class="p">,</span>
      <span class="s">'last_name'</span><span class="p">:</span> <span class="s">'tay'</span><span class="p">,</span>
      <span class="s">'address_line_1'</span><span class="p">:</span> <span class="s">'Blk 712 loyang Avenue 5'</span><span class="p">,</span>
      <span class="s">'address_line_2'</span><span class="p">:</span> <span class="s">'#01-41'</span><span class="p">,</span>
      <span class="s">'nationality'</span><span class="p">:</span> <span class="s">'Singaporean'</span><span class="p">,</span>
      <span class="s">'postal_code'</span><span class="p">:</span> <span class="s">'340712'</span><span class="p">,</span>
      <span class="s">'identity_no'</span><span class="p">:</span> <span class="s">'s86917127G'</span><span class="p">,</span>
      <span class="s">'country'</span><span class="p">:</span> <span class="s">'sg'</span>
      <span class="p">}</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">xfuser</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
    <span class="k">print</span> <span class="n">resp</span><span class="p">[</span><span class="s">'first_name'</span><span class="p">]</span>
    <span class="k">print</span> <span class="n">resp</span><span class="p">[</span><span class="s">'last_name'</span><span class="p">]</span>
    <span class="k">print</span> <span class="n">resp</span><span class="p">[</span><span class="s">'available_balance'</span><span class="p">]</span>
    <span class="k">print</span> <span class="n">resp</span><span class="p">[</span><span class="s">'address_line_1'</span><span class="p">]</span>
    <span class="k">print</span> <span class="n">resp</span>
<span class="k">except</span> <span class="n">error</span><span class="o">.</span><span class="n">XfersError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">print</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'xfers'</span>

<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_api_key</span> <span class="s1">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span>
<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_sg_sandbox</span>

<span class="k">begin</span>
  <span class="nb">puts</span> <span class="s1">'Updating user...'</span>
  <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">'first_name'</span> <span class="o">=&gt;</span> <span class="s1">'wenbin'</span><span class="p">,</span>
    <span class="s1">'last_name'</span> <span class="o">=&gt;</span> <span class="s1">'tay'</span><span class="p">,</span>
    <span class="s1">'address_line_1'</span> <span class="o">=&gt;</span> <span class="s1">'Blk 712 loyang Avenue 5'</span><span class="p">,</span>
    <span class="s1">'address_line_2'</span> <span class="o">=&gt;</span> <span class="s1">'#01-41'</span><span class="p">,</span>
    <span class="s1">'nationality'</span> <span class="o">=&gt;</span> <span class="s1">'Singaporean'</span><span class="p">,</span>
    <span class="s1">'postal_code'</span> <span class="o">=&gt;</span> <span class="s1">'340712'</span><span class="p">,</span>
    <span class="s1">'identity_no'</span> <span class="o">=&gt;</span> <span class="s1">'s86917127G'</span><span class="p">,</span>
    <span class="s1">'country'</span> <span class="o">=&gt;</span> <span class="s1">'sg'</span>
  <span class="p">}</span>
  <span class="n">resp</span> <span class="o">=</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">User</span><span class="p">.</span><span class="nf">update</span> <span class="n">params</span>
  <span class="nb">puts</span> <span class="n">resp</span><span class="p">[</span><span class="ss">:first_name</span><span class="p">]</span>
  <span class="nb">puts</span> <span class="n">resp</span><span class="p">[</span><span class="ss">:last_name</span><span class="p">]</span>
  <span class="nb">puts</span> <span class="n">resp</span><span class="p">[</span><span class="ss">:available_balance</span><span class="p">]</span>
  <span class="nb">puts</span> <span class="n">resp</span>
<span class="k">rescue</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">XfersError</span> <span class="o">=&gt;</span> <span class="n">e</span>
  <span class="nb">puts</span> <span class="n">e</span><span class="p">.</span><span class="nf">to_s</span>
<span class="k">end</span>
</code></pre>
<pre class="highlight java"><code><span class="n">Xfers</span><span class="o">.</span><span class="na">apiKey</span> <span class="o">=</span> <span class="s">"pXcfdAKNorDe_o1eou1NSp4mwssiEzem_6sg8fwnZWs"</span><span class="o">;</span>
<span class="n">Xfers</span><span class="o">.</span><span class="na">setSGSandbox</span><span class="o">();</span>

<span class="k">try</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Updating current user"</span><span class="o">);</span>
    <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">updateParams</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;();</span>
    <span class="n">updateParams</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"first_name"</span><span class="o">,</span> <span class="s">"wenbin"</span><span class="o">);</span>
    <span class="n">updateParams</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"last_name"</span><span class="o">,</span> <span class="s">"tay"</span><span class="o">);</span>
    <span class="n">updateParams</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"address_line_1"</span><span class="o">,</span> <span class="s">"Blk 712 loyang Avenue 5"</span><span class="o">);</span>
    <span class="n">updateParams</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"address_line_2"</span><span class="o">,</span> <span class="s">"#01-41"</span><span class="o">);</span>
    <span class="n">updateParams</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"nationality"</span><span class="o">,</span> <span class="s">"Singaporean"</span><span class="o">);</span>
    <span class="n">updateParams</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"postal_code"</span><span class="o">,</span> <span class="s">"340712"</span><span class="o">);</span>
    <span class="n">updateParams</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"identity_no"</span><span class="o">,</span> <span class="s">"s86917127G"</span><span class="o">);</span>
    <span class="n">updateParams</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"country"</span><span class="o">,</span> <span class="s">"sg"</span><span class="o">);</span>

    <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="na">update</span><span class="o">(</span><span class="n">updateParams</span><span class="o">);</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getFirstName</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getLastName</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getDateOfBirth</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getMetaData</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>

<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span>
</code></pre>

<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"available_balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"50.00"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"ledger_balance"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"250.00"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"credit_card_rate"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"3.5"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"credit_card_fee"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"NA"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"bank_transfer_fee"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"0.45"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"first_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"wenbin"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"last_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Tay"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"address_line_1"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Blk 712 loyang Avenue 5"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"address_line_2"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"#01-41"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"nationality"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Singaporean"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"postal_code"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"340712"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"identity_no"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"s86917127G"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"country"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"sg"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"gender"</span><span class="p">:</span><span class="w"> </span><span class="s2">"male"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"annunal_income"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"60000"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"email"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"tianyao@example.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"id_front"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"nricFrontPlaceholder.png"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"id_back"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"nricBackPlaceholder.png"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"selfie_2id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"nricSelfiePlaceholder.png"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"proof_of_address"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"nricDocumentPlaceholder.png"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"support_document_1"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"supportDocumentPlaceholder"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"support_document_2"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"supportDocumentPlaceholder"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"support_document_3"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"supportDocumentPlaceholder"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"support_document_4"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"supportDocumentPlaceholder"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"support_document_5"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"supportDocumentPlaceholder"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"phone_no"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"+6597288608"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"bank_accounts"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
       </span><span class="s2">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"12312"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"account_no"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"039-312-3432-3"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"bank_abbrev"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"DBS"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
       </span><span class="s2">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"12315"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"account_no"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"129-880-1251-1"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"bank_abbrev"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"OCBC"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint allows user to update their account information, this is especially important for account that would require KYC.</p>

<h4 id="https-request">HTTPS Request</h4>

<p><code class="prettyprint">PUT https://sandbox.xfers.io/api/v3/user</code></p>

<h4 id="url-parameters">URL Parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>first_name</td>
<td>string</td>
<td>optional</td>
<td>Account holder firstname</td>
<td>Tianwei</td>
</tr>
<tr>
<td>last_name</td>
<td>string</td>
<td>optional</td>
<td>Account holder lastname</td>
<td>Liu</td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td>optional</td>
<td>User email</td>
<td>tianwei@xfers.io</td>
</tr>
<tr>
<td>date_of_birth</td>
<td>string</td>
<td>optional</td>
<td>Date of birth for account holder in yyyy-mm-dd</td>
<td>1986-02-27</td>
</tr>
<tr>
<td>gender</td>
<td>string</td>
<td>optional</td>
<td>Gender</td>
<td>male / female</td>
</tr>
<tr>
<td>address_line_1</td>
<td>string</td>
<td>optional</td>
<td>Address line 1</td>
<td>Blk 212 Jurong East St 50</td>
</tr>
<tr>
<td>address_line_2</td>
<td>string</td>
<td>optional</td>
<td>Address line 2</td>
<td>#08-41</td>
</tr>
<tr>
<td>nationality</td>
<td>string</td>
<td>optional</td>
<td>Account holder nationality</td>
<td>Singaporean</td>
</tr>
<tr>
<td>postal_code</td>
<td>string</td>
<td>optional</td>
<td>Address postal code</td>
<td>640212</td>
</tr>
<tr>
<td>identity_no</td>
<td>string</td>
<td>optional</td>
<td>Account holder national identity no</td>
<td>s841212318g</td>
</tr>
<tr>
<td>country</td>
<td>string</td>
<td>optional</td>
<td>Account holder country of residence</td>
<td>Singapore</td>
</tr>
<tr>
<td>annual_income</td>
<td>integer</td>
<td>optional</td>
<td>Annual income of user in the local currency (SGD/IDR)</td>
<td>60000</td>
</tr>
<tr>
<td>id_front_url</td>
<td>string</td>
<td>optional</td>
<td>URL storing the front image of user identity card</td>
<td></td>
</tr>
<tr>
<td>id_back_url</td>
<td>string</td>
<td>optional</td>
<td>URL storing the back image of user identity card</td>
<td></td>
</tr>
<tr>
<td>selfie_2id_url</td>
<td>string</td>
<td>optional</td>
<td>URL storing the selfie of user holding their id card or a second form of id like driving license or passport</td>
<td></td>
</tr>
<tr>
<td>proof_of_address_url</td>
<td>string</td>
<td>optional</td>
<td>URL storing the image/pdf of proof of address document of user like bank statement or telco bill.</td>
<td></td>
</tr>
<tr>
<td>support_document_1_url</td>
<td>string</td>
<td>optional</td>
<td>URL storing the image/pdf of support documents like proof of user income</td>
<td></td>
</tr>
<tr>
<td>support_document_2_url</td>
<td>string</td>
<td>optional</td>
<td>URL storing the image/pdf of support documents like proof of user income</td>
<td></td>
</tr>
<tr>
<td>support_document_3_url</td>
<td>string</td>
<td>optional</td>
<td>URL storing the image/pdf of support documents like proof of user income</td>
<td></td>
</tr>
<tr>
<td>support_document_4_url</td>
<td>string</td>
<td>optional</td>
<td>URL storing the image/pdf of support documents like proof of user income</td>
<td></td>
</tr>
<tr>
<td>support_document_5_url</td>
<td>string</td>
<td>optional</td>
<td>URL storing the image/pdf of support documents like proof of user income</td>
<td></td>
</tr>
<tr>
<td>meta_data</td>
<td>string</td>
<td>optional</td>
<td>Additional data like Jumio info dump.</td>
<td></td>
</tr>
</tbody></table>

<aside class="notice">
All documents/images provided should not exceed 10MB per file.
</aside>

<h3 id="get-account-activities">Get Account Activities</h3>

<p>The activities API only supports querying of a user&rsquo;s activity.</p>
<pre class="highlight shell"><code>curl <span class="s2">"https://sandbox.xfers.io/api/v3/user/activities"</span> <span class="se">\</span>
  -H <span class="s2">"X-XFERS-USER-API-KEY: FVNbKjcGZ5Xx-Uf2XnxsrGtoxmLm9YEgokzDRoyshFc"</span>
</code></pre>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="k">require_once</span><span class="p">(</span><span class="s1">'vendor/autoload.php'</span><span class="p">);</span>

<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setApiKey</span><span class="p">(</span><span class="s1">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span><span class="p">);</span>
<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setSGSandbox</span><span class="p">();</span>
<span class="nv">$resp</span> <span class="o">=</span> <span class="nx">\Xfers\User</span><span class="o">::</span><span class="na">activities</span><span class="p">();</span>
<span class="nb">print_r</span><span class="p">(</span><span class="nv">$resp</span><span class="p">);</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">xfers</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">xfuser</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">error</span>
<span class="n">xfers</span><span class="o">.</span><span class="n">api_key</span> <span class="o">=</span> <span class="s">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span>
<span class="n">xfers</span><span class="o">.</span><span class="n">set_sg_sandbox</span><span class="p">()</span>
<span class="k">try</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">'Getting activities...'</span>
    <span class="n">activities</span> <span class="o">=</span> <span class="n">xfuser</span><span class="o">.</span><span class="n">activities</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">activity</span> <span class="ow">in</span> <span class="n">activities</span><span class="p">:</span>
        <span class="k">print</span> <span class="n">activity</span>
<span class="k">except</span> <span class="n">error</span><span class="o">.</span><span class="n">XfersError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">print</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'xfers'</span>

<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_api_key</span> <span class="s1">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span>
<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_sg_sandbox</span>

<span class="k">begin</span>
  <span class="nb">puts</span> <span class="s1">'Getting activities...'</span>
  <span class="n">activities</span> <span class="o">=</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">User</span><span class="p">.</span><span class="nf">activities</span>
  <span class="n">activities</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">activity</span><span class="o">|</span>
    <span class="nb">puts</span> <span class="n">activity</span>
  <span class="p">}</span>
<span class="k">rescue</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">XfersError</span> <span class="o">=&gt;</span> <span class="n">e</span>
  <span class="nb">puts</span> <span class="n">e</span><span class="p">.</span><span class="nf">to_s</span>
<span class="k">end</span>
</code></pre>
<pre class="highlight java"><code><span class="n">Xfers</span><span class="o">.</span><span class="na">apiKey</span> <span class="o">=</span> <span class="s">"pXcfdAKNorDe_o1eou1NSp4mwssiEzem_6sg8fwnZWs"</span><span class="o">;</span>
<span class="n">Xfers</span><span class="o">.</span><span class="na">setSGSandbox</span><span class="o">();</span>
<span class="k">try</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Retrieving current user activities"</span><span class="o">);</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">Activity</span><span class="o">&gt;</span> <span class="n">activities</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="na">activities</span><span class="o">();</span>
    <span class="k">for</span> <span class="o">(</span><span class="n">Activity</span> <span class="n">activity</span> <span class="o">:</span> <span class="n">activities</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">activity</span><span class="o">.</span><span class="na">getTransType</span><span class="o">());</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">activity</span><span class="o">.</span><span class="na">getTransactionItems</span><span class="o">().</span><span class="na">toString</span><span class="o">());</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">activity</span><span class="o">.</span><span class="na">getDisplayAmount</span><span class="o">());</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">activity</span><span class="o">.</span><span class="na">getPlusMinus</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span>
</code></pre>

<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"msg"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"activities"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e2738cc957034ecaab3252f4b23e1c6e"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"transaction"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"display_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-06-22T06:21:31.000+08:00"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Victor Liew"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"plus_minus"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"display_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"completed"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"display_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"30.0"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"transaction_items"</span><span class="p">:</span><span class="w">
      </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"item_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Threadless T-Shirt"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"item_description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Red Threadless T-Shirt, (S) Size"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"item_price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"14.5"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"item_quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"item_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Light Brown Belt"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"item_description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Light brown Belt, (XS) Size"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"item_price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5.5"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"item_quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"display_image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.xfers.io/assets/displayImageUser-c610a87e219afbe0bfc27bcddd67b8f831f967aedb01aef82a9009e9b6eb36c2.png"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6614"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"external"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"trans_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"deposit"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"display_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-06-23T16:08:39.000+08:00"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OCBC Transfer"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"plus_minus"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"display_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10.0"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"transaction_items"</span><span class="p">:</span><span class="w">
      </span><span class="p">[</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"display_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"completed"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"display_image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.xfers.io/assets/displayImageUser-c610a87e219afbe0bfc27bcddd67b8f831f967aedb01aef82a9009e9b6eb36c2.png"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">


</span></code></pre>

<p>This endpoint returns information related to your account activites such as the types and statuses of transactions that the user has.</p>

<h4 id="https-request">HTTPS Request</h4>

<p><code class="prettyprint">GET https://sandbox.xfers.io/api/v3/user/activities</code></p>

<h4 id="query-parameters">Query Parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>limit</td>
<td>integer</td>
<td>optional</td>
<td>Max number of results to return</td>
<td>50 (default)</td>
</tr>
</tbody></table>

<h3 id="get-transfer-info">Get Transfer Info</h3>
<pre class="highlight shell"><code>curl <span class="s2">"https://sandbox.xfers.io/api/v3/user/transfer_info"</span> <span class="se">\</span>
  -H <span class="s2">"X-XFERS-USER-API-KEY: FVNbKjcGZ5Xx-Uf2XnxsrGtoxmLm9YEgokzDRoyshFc"</span>
</code></pre>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="k">require_once</span><span class="p">(</span><span class="s1">'vendor/autoload.php'</span><span class="p">);</span>

<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setApiKey</span><span class="p">(</span><span class="s1">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span><span class="p">);</span>
<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setSGSandbox</span><span class="p">();</span>
<span class="nv">$resp</span> <span class="o">=</span> <span class="nx">\Xfers\User</span><span class="o">::</span><span class="na">transferInfo</span><span class="p">();</span>
<span class="nb">print_r</span><span class="p">(</span><span class="nv">$resp</span><span class="p">);</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">xfers</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">xfuser</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">error</span>

<span class="n">xfers</span><span class="o">.</span><span class="n">api_key</span> <span class="o">=</span> <span class="s">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span>
<span class="n">xfers</span><span class="o">.</span><span class="n">set_sg_sandbox</span><span class="p">()</span>

<span class="k">try</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">'Getting transfer info...'</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">xfuser</span><span class="o">.</span><span class="n">transfer_info</span><span class="p">()</span>
    <span class="k">print</span> <span class="n">resp</span>
<span class="k">except</span> <span class="n">error</span><span class="o">.</span><span class="n">XfersError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">print</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'xfers'</span>

<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_api_key</span> <span class="s1">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span>
<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_sg_sandbox</span>

<span class="k">begin</span>
  <span class="nb">puts</span> <span class="s1">'Getting transfer info...'</span>
  <span class="n">resp</span> <span class="o">=</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">User</span><span class="p">.</span><span class="nf">transfer_info</span>
  <span class="nb">puts</span> <span class="n">resp</span>
<span class="k">rescue</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">XfersError</span> <span class="o">=&gt;</span> <span class="n">e</span>
  <span class="nb">puts</span> <span class="n">e</span><span class="p">.</span><span class="nf">to_s</span>
<span class="k">end</span>
</code></pre>
<pre class="highlight java"><code><span class="n">Xfers</span><span class="o">.</span><span class="na">apiKey</span> <span class="o">=</span> <span class="s">"pXcfdAKNorDe_o1eou1NSp4mwssiEzem_6sg8fwnZWs"</span><span class="o">;</span>
<span class="n">Xfers</span><span class="o">.</span><span class="na">setSGSandbox</span><span class="o">();</span>

<span class="k">try</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Retrieving current user transfer info"</span><span class="o">);</span>
    <span class="n">TransferInfo</span> <span class="n">transferInfo</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="na">transferInfo</span><span class="o">();</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">transferInfo</span><span class="o">.</span><span class="na">getBankNameFull</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">transferInfo</span><span class="o">.</span><span class="na">getBankNameAbbreviation</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">transferInfo</span><span class="o">.</span><span class="na">getBankAccountNo</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">transferInfo</span><span class="o">.</span><span class="na">getBankCode</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">transferInfo</span><span class="o">.</span><span class="na">getBranchCode</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">transferInfo</span><span class="o">.</span><span class="na">getBranchArea</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">transferInfo</span><span class="o">.</span><span class="na">getUniqueId</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">transferInfo</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span>
</code></pre>

<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"bank_name_full"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Malaysia Banking BHD"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"bank_name_abbreviation"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"MBB"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"bank_account_no"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"04111066899"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"bank_code"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"7302"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"branch_code"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"001"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"branch_area"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Maybank Tower"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"unique_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"97288607"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>All Banks Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"bank_name_full"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Bank Central Asia"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bank_name_abbreviation"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BCA"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bank_account_no"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"1063003003"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bank_code"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"branch_code"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"branch_area"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"unique_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"97288607"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"img_src"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://xfers.com/bank-logo-bca.png"</span><span class="w">
  </span><span class="p">},</span><span class="w"> 
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"bank_name_full"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Bank Mandiri"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bank_name_abbreviation"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"MANDIRI"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bank_account_no"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"1190006792749"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bank_code"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"branch_code"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"branch_area"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"unique_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"97288607"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"img_src"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://xfers.com/bank-logo-mandiri.png"</span><span class="w">    
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"bank_name_full"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Bank Negara Indonesia"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bank_name_abbreviation"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BNI"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bank_account_no"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"8000067885"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bank_code"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"branch_code"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"branch_area"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"unique_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"97288607"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"img_src"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://xfers.com/bank-logo-bni.png"</span><span class="w">    
  </span><span class="p">}</span><span class="w">    
</span><span class="p">]</span><span class="w">
</span></code></pre>

<p>This will return transfer in info specific to the user. This information is used for topping up the user&rsquo;s Xfers account.</p>

<p>On your User Interface, instruct the user to make a bank transfer to the bank name and bank account number specified. <strong>For our Maybank account, the user must also include his mobile phone number in the &ldquo;Initials&rdquo; and &ldquo;Comments for Recipient&rdquo; field when doing a bank transfer</strong> so Xfers can identify which user this bank transfer belongs to.</p>

<h4 id="https-request">HTTPS Request</h4>

<p><code class="prettyprint">GET https://sandbox.xfers.io/api/v3/user/transfer_info</code></p>

<h4 id="query-parameters">Query Parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>all</td>
<td>boolean</td>
<td>optional</td>
<td>Return an array of all banks available. Only for Indonesia</td>
<td>true (defaults to false)</td>
</tr>
</tbody></table>

<h3 id="register-updates-callback---coming-soon">Register Updates Callback - Coming soon</h3>
<pre class="highlight shell"><code>curl <span class="s2">"https://sandbox.xfers.io/api/v3/user/balance_callback"</span> <span class="se">\</span>
  -H <span class="s2">"X-XFERS-USER-API-KEY: FVNbKjcGZ5Xx-Uf2XnxsrGtoxmLm9YEgokzDRoyshFc"</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -X PUT <span class="se">\</span>
  -d <span class="s1">'{"callback_url": "www.example.com/update", "meta_data": {"key1" : "value1", "key2" : "value2"}}'</span>
</code></pre>

<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"callback_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://www.example.com/updates"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"meta_data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"key1"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"value1"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"key2"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"value2"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This will allow you to register for a callback which will be fired whenever there are user account changes(like change in account balances). This callback request is only valid for 24hrs.</p>

<h4 id="https-request">HTTPS Request</h4>

<p><code class="prettyprint">POST https://sandbox.xfers.io/api/v3/user/balance_callback</code></p>

<h4 id="url-parameters">URL Parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>callback_url</td>
<td>string</td>
<td>required</td>
<td>URL to receive callback notifications on account changes</td>
<td>https://www.example.com/updates</td>
</tr>
<tr>
<td>meta_data</td>
<td>string</td>
<td>optional</td>
<td>A set of key/value pairs that you can attach to this request. It can be useful for storing additional information about the customer in a structured format. You will be provided with these meta_data in your callback notification</td>
<td>{&ldquo;email”:“tianwei@xfers.io”, “orderId”:“AZ12312”}</td>
</tr>
</tbody></table>

<h3 id="updates-callback-notifications---coming-soon">Updates Callback Notifications - Coming soon</h3>

<p>After registering for a account callback notifications. Whenever they are any account changes(like a change in account balances), Xfers will send a callback to the <code class="prettyprint">callback_url</code> you previously provided. This is a server to server HTTPS/HTTP POST and you will need to acknowledge the callback by providing a HTTP 200 status.</p>

<p><code class="prettyprint">POST https://www.example.com/updates</code></p>

<p>The following parameters will be part of the HTTPS/HTTP POST:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>available_balance</td>
<td>float</td>
<td>Account&rsquo;s current available balance</td>
<td>250.50</td>
</tr>
<tr>
<td>meta_data</td>
<td>string</td>
<td>The json string you previously provided in the register request</td>
<td>{&quot;email”:“tianwei@xfers.io”, “orderId”:“AZ12312”}</td>
</tr>
</tbody></table>

<h2 id="merchant">Merchant</h2>

<p>The merchant API supports querying and making changes to a user&rsquo;s business details for compliance purposes.</p>

<h3 id="get-merchant-info">Get Merchant Info</h3>
<pre class="highlight shell"><code>curl <span class="s2">"https://sandbox.xfers.io/api/v3/merchant"</span> <span class="se">\</span>
  -H <span class="s2">"X-XFERS-USER-API-KEY: FVNbKjcGZ5Xx-Uf2XnxsrGtoxmLm9YEgokzDRoyshFc"</span>
</code></pre>
<pre class="highlight php"><code></code></pre>
<pre class="highlight python"><code></code></pre>
<pre class="highlight ruby"><code></code></pre>
<pre class="highlight java"><code></code></pre>

<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"business_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"53348831Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"business_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Alpha Events"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"business_type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Private Company"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"business_position"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Director"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"business_address_line_1"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"78 Lucky Plaza"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"business_address_line_2"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"#14-39"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"business_postal_code"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"938884"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"business_telephone"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"+6583994012"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"bizfile_document"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BIZFILE.pdf"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"business_verified"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"shareholders"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
   </span><span class="p">{</span><span class="w">
      </span><span class="s2">"firstName"</span><span class="p">:</span><span class="s2">"Samson"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"lastName"</span><span class="p">:</span><span class="s2">"Leo"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"nricNumber"</span><span class="p">:</span><span class="s2">"S8781203Q"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"dateOfBirth"</span><span class="p">:</span><span class="s2">"19/02/1987"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"nationality"</span><span class="p">:</span><span class="s2">"Singaporean"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"address1"</span><span class="p">:</span><span class="s2">"Blk 600 Elias Road"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"address2"</span><span class="p">:</span><span class="s2">"#09-123"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"postalCode"</span><span class="p">:</span><span class="s2">"510600"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"phoneNumber"</span><span class="p">:</span><span class="s2">"+6583004848"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"businessType"</span><span class="p">:</span><span class="s2">"Private Company"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"businessPosition"</span><span class="p">:</span><span class="s2">"Director"</span><span class="w">
   </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint returns merchant information related to your account.</p>

<h4 id="https-request">HTTPS Request</h4>

<p><code class="prettyprint">GET https://sandbox.xfers.io/api/v3/merchant</code></p>

<h3 id="update-merchant-info">Update Merchant Info</h3>
<pre class="highlight shell"><code>curl <span class="s2">"https://sandbox.xfers.io/api/v3/merchant"</span> <span class="se">\</span>
  -H <span class="s2">"X-XFERS-USER-API-KEY: FVNbKjcGZ5Xx-Uf2XnxsrGtoxmLm9YEgokzDRoyshFc"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -X PUT <span class="se">\</span>
  -d <span class="s1">'{"business_id": "53348831Z", "business_name": "Alpha Events", "business_type": "Private Company"}'</span>
</code></pre>
<pre class="highlight php"><code></code></pre>
<pre class="highlight python"><code></code></pre>
<pre class="highlight ruby"><code></code></pre>
<pre class="highlight java"><code></code></pre>

<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"business_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"53348831Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"business_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Alpha Events"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"business_type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Private Company"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"business_position"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Director"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"business_address_line_1"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"78 Lucky Plaza"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"business_address_line_2"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"#14-39"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"business_postal_code"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"938884"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"business_telephone"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"+6583994012"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"bizfile_document"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BIZFILE.pdf"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"business_verified"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"shareholders"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
   </span><span class="p">{</span><span class="w">
      </span><span class="s2">"firstName"</span><span class="p">:</span><span class="s2">"Samson"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"lastName"</span><span class="p">:</span><span class="s2">"Leo"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"nricNumber"</span><span class="p">:</span><span class="s2">"S8781203Q"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"dateOfBirth"</span><span class="p">:</span><span class="s2">"19/02/1987"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"nationality"</span><span class="p">:</span><span class="s2">"Singaporean"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"address1"</span><span class="p">:</span><span class="s2">"Blk 600 Elias Road"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"address2"</span><span class="p">:</span><span class="s2">"#09-123"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"postalCode"</span><span class="p">:</span><span class="s2">"510600"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"phoneNumber"</span><span class="p">:</span><span class="s2">"+6583004848"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"businessType"</span><span class="p">:</span><span class="s2">"Private Company"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"businessPosition"</span><span class="p">:</span><span class="s2">"Director"</span><span class="w">
   </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint allows user to update their merchant information. If the user is not yet a merchant, this process converts them to a merchant.</p>

<h4 id="https-request">HTTPS Request</h4>

<p><code class="prettyprint">PUT https://sandbox.xfers.io/api/v3/merchant</code></p>

<h4 id="url-parameters">URL Parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>business_id</td>
<td>string</td>
<td>optional</td>
<td>Enter your singapore recognized bizfile ID. (eg: UEN, incorporation number, business registration number).</td>
<td></td>
</tr>
<tr>
<td>business_position</td>
<td>string</td>
<td>optional</td>
<td>Position in the business.</td>
<td>&quot;Owner&rdquo;, &ldquo;Partner&rdquo;, &ldquo;Director&rdquo;, &ldquo;Shareholder&rdquo;, &ldquo;Director &amp; Shareholder&rdquo;, &ldquo;Chairperson&rdquo;, &ldquo;Treasurer&rdquo;, &ldquo;Civil Servant&rdquo;</td>
</tr>
<tr>
<td>business_name</td>
<td>string</td>
<td>optional</td>
<td>Enter in the name of your business.</td>
<td></td>
</tr>
<tr>
<td>business_type</td>
<td>string</td>
<td>optional</td>
<td>Type of your business</td>
<td>&ldquo;Individual&rdquo;, &ldquo;Sole Proprietorship&rdquo;, &ldquo;Partnership&rdquo;, &ldquo;Private Company&rdquo;, &ldquo;Public Company&rdquo;, &ldquo;Societies / Nonprofit organisations&rdquo;, &ldquo;Government Entity&rdquo;</td>
</tr>
<tr>
<td>business_address_line_1</td>
<td>string</td>
<td>optional</td>
<td>Enter in the first line of your business&rsquo; address.</td>
<td>123 Xfers Road</td>
</tr>
<tr>
<td>business_address_line_2</td>
<td>string</td>
<td>optional</td>
<td>Enter in the last line of your business&rsquo; address.</td>
<td>Block 10 #17A</td>
</tr>
<tr>
<td>business_postal_code</td>
<td>string</td>
<td>optional</td>
<td>Enter in your business&rsquo; postal code.</td>
<td>S323233</td>
</tr>
<tr>
<td>business_telephone</td>
<td>string</td>
<td>optional</td>
<td>Enter your business&rsquo; phone number along with the country code.</td>
<td>+6591234567</td>
</tr>
<tr>
<td>bizfile_document</td>
<td>string</td>
<td>optional</td>
<td>URL storing the ACRA Bizfile document as proof of your business details</td>
<td></td>
</tr>
</tbody></table>

<h3 id="add-shareholder">Add Shareholder</h3>
<pre class="highlight shell"><code>curl <span class="s2">"https://sandbox.xfers.io/api/v3/merchant/shareholder"</span> <span class="se">\</span>
  -H <span class="s2">"X-XFERS-USER-API-KEY: FVNbKjcGZ5Xx-Uf2XnxsrGtoxmLm9YEgokzDRoyshFc"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -d <span class="s1">'{"firstName": "wenbin", "lastName": "tay", "nricNumber": "Blk 712 loyang Avenue 5", "dateOfBirth": "#01-41", "nationality": "Singaporean", "postalCode": "340712", "nricNumber": "s86917127G", "businessType": "Private Company", "businessPosition": "Director", "phoneNumber":"+6583004848"}'</span>
</code></pre>
<pre class="highlight php"><code></code></pre>
<pre class="highlight python"><code></code></pre>
<pre class="highlight ruby"><code></code></pre>
<pre class="highlight java"><code></code></pre>

<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"business_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"53348831Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"business_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Alpha Events"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"business_type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Private Company"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"business_position"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Director"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"business_address_line_1"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"78 Lucky Plaza"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"business_address_line_2"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"#14-39"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"business_postal_code"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"938884"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"business_telephone"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"+6583994012"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"bizfile_document"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BIZFILE.pdf"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"business_verified"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"shareholders"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
   </span><span class="p">{</span><span class="w">
      </span><span class="s2">"firstName"</span><span class="p">:</span><span class="s2">"Samson"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"lastName"</span><span class="p">:</span><span class="s2">"Leo"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"nricNumber"</span><span class="p">:</span><span class="s2">"S8781203Q"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"dateOfBirth"</span><span class="p">:</span><span class="s2">"19/02/1987"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"nationality"</span><span class="p">:</span><span class="s2">"Singaporean"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"address1"</span><span class="p">:</span><span class="s2">"Blk 600 Elias Road"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"address2"</span><span class="p">:</span><span class="s2">"#09-123"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"postalCode"</span><span class="p">:</span><span class="s2">"510600"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"phoneNumber"</span><span class="p">:</span><span class="s2">"+6583004848"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"businessType"</span><span class="p">:</span><span class="s2">"Private Company"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"businessPosition"</span><span class="p">:</span><span class="s2">"Director"</span><span class="w">
   </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint allows businesses to add a shareholder.</p>

<h4 id="https-request">HTTPS Request</h4>

<p><code class="prettyprint">POST https://sandbox.xfers.io/api/v3/merchant/shareholder</code></p>

<h4 id="url-parameters">URL Parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>firstName</td>
<td>string</td>
<td>required</td>
<td>First name</td>
<td>Samson</td>
</tr>
<tr>
<td>lastName</td>
<td>string</td>
<td>required</td>
<td>Last name</td>
<td>Leo</td>
</tr>
<tr>
<td>nricNumber</td>
<td>string</td>
<td>required</td>
<td>National identity number</td>
<td>S8781203Q</td>
</tr>
<tr>
<td>dateOfBirth</td>
<td>string</td>
<td>required</td>
<td>Date of birth</td>
<td>19/02/1987</td>
</tr>
<tr>
<td>nationality</td>
<td>string</td>
<td>required</td>
<td>Nationality</td>
<td>Singaporean</td>
</tr>
<tr>
<td>address1</td>
<td>string</td>
<td>required</td>
<td>First line of address</td>
<td>Blk 600 Elias Road</td>
</tr>
<tr>
<td>address2</td>
<td>string</td>
<td>required</td>
<td>Last line of address</td>
<td>#09-123</td>
</tr>
<tr>
<td>postalCode</td>
<td>string</td>
<td>required</td>
<td>Postal code</td>
<td>510600</td>
</tr>
<tr>
<td>phoneNumber</td>
<td>string</td>
<td>required</td>
<td>Phone number with country code</td>
<td>+6583004848</td>
</tr>
<tr>
<td>businessType</td>
<td>string</td>
<td>required</td>
<td>Business type</td>
<td>&ldquo;Individual&rdquo;, &ldquo;Sole Proprietorship&rdquo;, &ldquo;Partnership&rdquo;, &ldquo;Private Company&rdquo;, &ldquo;Public Company&rdquo;, &ldquo;Societies / Nonprofit organisations&rdquo;, &ldquo;Government Entity&rdquo;</td>
</tr>
<tr>
<td>businessPosition</td>
<td>string</td>
<td>required</td>
<td>Business position</td>
<td>&ldquo;Owner&rdquo;, &ldquo;Partner&rdquo;, &ldquo;Director&rdquo;, &ldquo;Shareholder&rdquo;, &ldquo;Director &amp; Shareholder&rdquo;, &ldquo;Chairperson&rdquo;, &ldquo;Treasurer&rdquo;, &ldquo;Civil Servant&rdquo;</td>
</tr>
</tbody></table>

<h3 id="delete-shareholder">Delete Shareholder</h3>
<pre class="highlight shell"><code>curl -X DELETE <span class="s2">"https://sandbox.xfers.io/api/v3/merchant/shareholder/&lt;shareholder_nric_number&gt;"</span> <span class="se">\</span>
  -H <span class="s2">"X-XFERS-USER-API-KEY: FVNbKjcGZ5Xx-Uf2XnxsrGtoxmLm9YEgokzDRoyshFc"</span>
</code></pre>
<pre class="highlight php"><code></code></pre>
<pre class="highlight python"><code></code></pre>
<pre class="highlight ruby"><code></code></pre>
<pre class="highlight java"><code></code></pre>

<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"business_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"53348831Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"business_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Alpha Events"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"business_type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Private Company"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"business_position"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Director"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"business_address_line_1"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"78 Lucky Plaza"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"business_address_line_2"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"#14-39"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"business_postal_code"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"938884"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"business_telephone"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"+6583994012"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"bizfile_document"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BIZFILE.pdf"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"business_verified"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"shareholders"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This request allow you to delete an existing shareholder. </p>

<h4 id="https-request">HTTPS Request</h4>

<p><code class="prettyprint">DELETE https://sandbox.xfers.io/api/v3/merchant/shareholder/&lt;shareholder_nric_number&gt;</code></p>

<h4 id="response">Response</h4>

<p>The latest business details.</p>

<h2 id="bank-account">Bank Account</h2>

<p>The follow APIs allow you to add or update your bank account info and fetch a list of available banks.</p>

<h3 id="available-banks">Available Banks</h3>
<pre class="highlight shell"><code>curl <span class="s2">"https://sandbox.xfers.io/api/v3/banks"</span> <span class="se">\</span>
  -H <span class="s2">"X-XFERS-USER-API-KEY: FVNbKjcGZ5Xx-Uf2XnxsrGtoxmLm9YEgokzDRoyshFc"</span>
</code></pre>
<pre class="highlight php"><code>
</code></pre>
<pre class="highlight python"><code></code></pre>
<pre class="highlight ruby"><code></code></pre>
<pre class="highlight java"><code></code></pre>

<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Development Bank of Singapore"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"abbreviation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DBS"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"img_src"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://xfers.com/bank-logo-dbs.png"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"United Oversea Bank"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"abbreviation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UOB"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"img_src"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://xfers.com/bank-logo-uob.png"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Malaysia Banking BHD"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"abbreviation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MBB"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"img_src"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://xfers.com/bank-logo-mbb.png"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Oversea-Chinese Banking Corporation Limited"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"abbreviation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OCBC"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"img_src"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://xfers.com/bank-logo-ocbc.png"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Citibank Singapore"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"abbreviation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CITI"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"img_src"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://xfers.com/bank-logo-citi.png"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard Chartered Bank"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"abbreviation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SCB"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"img_src"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://xfers.com/bank-logo-scb.png"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Australia and New Zealand Bank Group"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"abbreviation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ANZ"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"img_src"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://xfers.com/bank-logo-anz.png"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CIMB Bank Berhad"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"abbreviation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CIMB"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"img_src"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://xfers.com/bank-logo-cimb.png"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Deutsche bank AG"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"abbreviation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DBAG"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"img_src"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://xfers.com/bank-logo-dbag.png"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Far Eastern Bank Ltd"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"abbreviation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FEB"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"img_src"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://xfers.com/bank-logo-feb.png"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Hong Kong and Shanghai Banking Corporation"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"abbreviation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HSBC"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"img_src"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://xfers.com/bank-logo-hsbc.png"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RHB Bank Berhad"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"abbreviation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RHB"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"img_src"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://xfers.com/bank-logo-rhb.png"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sumitomo Mitsui Banking Corporation"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"abbreviation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SMFG"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"img_src"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://xfers.com/bank-logo-smfg.png"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bank of China"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"abbreviation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BOC"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"img_src"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://xfers.com/bank-logo-boc.png"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bank of Tokyo-Mitsubshi UFJ"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"abbreviation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MUFG"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"img_src"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://xfers.com/bank-logo-mufg.png"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BNP PARIBAS"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"abbreviation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BNP"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"img_src"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://xfers.com/bank-logo-bnp.png"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HL BANK"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"abbreviation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HLB"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"img_src"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://xfers.com/bank-logo-hlb.png"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Mizuho Bank"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"abbreviation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MIZ"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"img_src"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://xfers.com/bank-logo-miz.png"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<p>This will provide you with a list of banks we support.</p>

<h4 id="https-request">HTTPS Request</h4>

<p><code class="prettyprint">GET https://sandbox.xfers.io/api/v3/banks</code></p>

<h3 id="add-a-bank-account">Add a Bank Account</h3>
<pre class="highlight shell"><code>curl <span class="s2">"https://sandbox.xfers.io/api/v3/user/bank_account"</span> <span class="se">\</span>
  -H <span class="s2">"X-XFERS-USER-API-KEY: FVNbKjcGZ5Xx-Uf2XnxsrGtoxmLm9YEgokzDRoyshFc"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -d <span class="s1">'{"account_no": "03931234323", "bank":"DBS", "account_holder_name": "Tian Wei"}'</span>
</code></pre>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="k">require_once</span><span class="p">(</span><span class="s1">'vendor/autoload.php'</span><span class="p">);</span>

<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setApiKey</span><span class="p">(</span><span class="s1">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span><span class="p">);</span>
<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setSGSandbox</span><span class="p">();</span>
<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$resp</span> <span class="o">=</span> <span class="nx">\Xfers\BankAccount</span><span class="o">::</span><span class="na">add</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
        <span class="s1">'account_no'</span> <span class="o">=&gt;</span> <span class="s1">'03931234323'</span><span class="p">,</span>
        <span class="s1">'bank'</span> <span class="o">=&gt;</span> <span class="s1">'DBS'</span>
    <span class="p">));</span>
    <span class="nb">print_r</span><span class="p">(</span><span class="nv">$resp</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Xfers\Error\InvalidRequest</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">'Caught invalid request exception: '</span><span class="p">,</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">(),</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">xfers</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">xfbankaccount</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">error</span>

<span class="n">xfers</span><span class="o">.</span><span class="n">api_key</span> <span class="o">=</span> <span class="s">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span>
<span class="n">xfers</span><span class="o">.</span><span class="n">set_sg_sandbox</span><span class="p">()</span>

<span class="k">try</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">'Adding bank account...'</span>
    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'account_no'</span><span class="p">:</span> <span class="s">'03931234323'</span><span class="p">,</span>
        <span class="s">'bank'</span><span class="p">:</span> <span class="s">'DBS'</span>
    <span class="p">}</span>
    <span class="n">bank_accounts</span> <span class="o">=</span> <span class="n">xfbankaccount</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">bank_account</span> <span class="ow">in</span> <span class="n">bank_accounts</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">'Bank account: {}'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">bank_account</span><span class="p">)</span>
<span class="k">except</span> <span class="n">error</span><span class="o">.</span><span class="n">XfersError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">print</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'xfers'</span>

<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_api_key</span> <span class="s1">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span>
<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_sg_sandbox</span>

<span class="k">begin</span>
  <span class="nb">puts</span> <span class="s1">'Adding bank account...'</span>
  <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
      <span class="s1">'account_no'</span><span class="o">=&gt;</span> <span class="s1">'03931234321'</span><span class="p">,</span>
      <span class="s1">'bank'</span><span class="o">=&gt;</span> <span class="s1">'DBS'</span>
  <span class="p">}</span>
  <span class="n">bank_accounts</span> <span class="o">=</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">BankAccount</span><span class="p">.</span><span class="nf">add</span> <span class="n">params</span>
  <span class="nb">puts</span> <span class="s2">"number of bank accounts=&gt; </span><span class="si">#{</span><span class="n">bank_accounts</span><span class="p">.</span><span class="nf">length</span><span class="si">}</span><span class="s2">"</span>
  <span class="n">bank_accounts</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">account</span><span class="o">|</span> <span class="nb">puts</span> <span class="s2">"Bank Account=&gt; </span><span class="si">#{</span><span class="n">account</span><span class="si">}</span><span class="s2">"</span> <span class="p">}</span>
<span class="k">rescue</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">XfersError</span> <span class="o">=&gt;</span> <span class="n">e</span>
  <span class="nb">puts</span> <span class="n">e</span><span class="p">.</span><span class="nf">to_s</span>
<span class="k">end</span>
</code></pre>
<pre class="highlight java"><code><span class="n">Xfers</span><span class="o">.</span><span class="na">apiKey</span> <span class="o">=</span> <span class="s">"G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo"</span><span class="o">;</span>
<span class="n">Xfers</span><span class="o">.</span><span class="na">setSGSandbox</span><span class="o">();</span>

<span class="k">try</span> <span class="o">{</span>
    <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">params</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;();</span>
    <span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"account_no"</span><span class="o">,</span> <span class="s">"03931234323"</span><span class="o">);</span>
    <span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"bank"</span><span class="o">,</span> <span class="s">"DBS"</span><span class="o">);</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">BankAccount</span><span class="o">&gt;</span> <span class="n">bankAccounts</span> <span class="o">=</span> <span class="n">BankAccount</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">params</span><span class="o">);</span>
    <span class="k">for</span> <span class="o">(</span><span class="n">BankAccount</span> <span class="n">bankAccount</span> <span class="o">:</span> <span class="n">bankAccounts</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">bankAccount</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span>
</code></pre>

<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
       </span><span class="s2">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"12312"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"account_no"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"039-312-3432-3"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"bank_abbrev"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"DBS"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"usage"</span><span class="p">:</span><span class="w"> </span><span class="s2">"all"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"account_holder_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tian Wei"</span><span class="w">       
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
       </span><span class="s2">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"12315"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"account_no"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"129-880-1251-1"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"bank_abbrev"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"OCBC"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"usage"</span><span class="p">:</span><span class="w"> </span><span class="s2">"all"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"account_holder_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tian Wei"</span><span class="w">       
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<p>This request will add a new bank account to this Xfers account. You will be able to withdraw your Xfers available balances to these account(s). </p>

<h4 id="https-request">HTTPS Request</h4>

<p><code class="prettyprint">POST https://sandbox.xfers.io/api/v3/user/bank_account</code></p>

<h4 id="response">Response</h4>

<p>List of all bank accounts belonging to user.</p>

<p>For Xfers Indonesia API, an additional attribute <code class="prettyprint">detected_name</code> will be returned. This is the actual name of the bank account holder gotten directly from the bank.</p>

<h4 id="url-parameters">URL Parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>account_no</td>
<td>string</td>
<td>required</td>
<td>bank account no</td>
<td>03931234323</td>
</tr>
<tr>
<td>bank</td>
<td>string</td>
<td>required</td>
<td>bank abbreviation (Refer to <a href="?shell/#available-banks">available banks</a></td>
<td>DBS</td>
</tr>
<tr>
<td>usage</td>
<td>string</td>
<td>optional</td>
<td>Is this bank account to be used as a funding source or for withdrawals?</td>
<td>Either &ldquo;funding_source&rdquo; or &ldquo;withdrawal&rdquo; or &ldquo;all&rdquo;. Defaults to &ldquo;all&rdquo;</td>
</tr>
<tr>
<td>account_holder_name</td>
<td>string</td>
<td>optional</td>
<td>Name of bank account holder</td>
<td>Tian Wei</td>
</tr>
</tbody></table>

<h3 id="list-bank-accounts">List Bank Accounts</h3>
<pre class="highlight shell"><code>curl <span class="s2">"https://sandbox.xfers.io/api/v3/user/bank_account"</span> <span class="se">\</span>
  -H <span class="s2">"X-XFERS-USER-API-KEY: FVNbKjcGZ5Xx-Uf2XnxsrGtoxmLm9YEgokzDRoyshFc"</span>
</code></pre>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="k">require_once</span><span class="p">(</span><span class="s1">'vendor/autoload.php'</span><span class="p">);</span>

<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setApiKey</span><span class="p">(</span><span class="s1">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span><span class="p">);</span>
<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setSGSandbox</span><span class="p">();</span>
<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$resp</span> <span class="o">=</span> <span class="nx">\Xfers\BankAccount</span><span class="o">::</span><span class="na">retrieve</span><span class="p">();</span>
    <span class="nb">print_r</span><span class="p">(</span><span class="nv">$resp</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Xfers\Error\InvalidRequest</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">'Caught invalid request exception: '</span><span class="p">,</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">(),</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">xfers</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">xfbankaccount</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">error</span>

<span class="n">xfers</span><span class="o">.</span><span class="n">api_key</span> <span class="o">=</span> <span class="s">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span>
<span class="n">xfers</span><span class="o">.</span><span class="n">set_sg_sandbox</span><span class="p">()</span>

<span class="k">try</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">'Listing all bank_accounts...'</span>
    <span class="n">bank_accounts</span> <span class="o">=</span> <span class="n">xfbankaccount</span><span class="o">.</span><span class="n">list_all</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">bank_account</span> <span class="ow">in</span> <span class="n">bank_accounts</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">'Bank account: {}'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">bank_account</span><span class="p">)</span>
<span class="k">except</span> <span class="n">error</span><span class="o">.</span><span class="n">XfersError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">print</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'xfers'</span>

<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_api_key</span> <span class="s1">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span>
<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_sg_sandbox</span>

<span class="k">begin</span>
  <span class="nb">puts</span> <span class="s1">'Listing all bank accounts...'</span>
  <span class="n">bank_accounts</span> <span class="o">=</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">BankAccount</span><span class="p">.</span><span class="nf">list_all</span>
  <span class="nb">puts</span> <span class="s2">"number of bank accounts =&gt; </span><span class="si">#{</span><span class="n">bank_accounts</span><span class="p">.</span><span class="nf">length</span><span class="si">}</span><span class="s2">"</span>
  <span class="n">bank_accounts</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">account</span><span class="o">|</span> <span class="nb">puts</span> <span class="s2">"Bank Account=&gt; </span><span class="si">#{</span><span class="n">account</span><span class="si">}</span><span class="s2">"</span> <span class="p">}</span>
<span class="k">rescue</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">XfersError</span> <span class="o">=&gt;</span> <span class="n">e</span>
  <span class="nb">puts</span> <span class="n">e</span><span class="p">.</span><span class="nf">to_s</span>
<span class="k">end</span>
</code></pre>
<pre class="highlight java"><code><span class="n">Xfers</span><span class="o">.</span><span class="na">apiKey</span> <span class="o">=</span> <span class="s">"pXcfdAKNorDe_o1eou1NSp4mwssiEzem_6sg8fwnZWs"</span><span class="o">;</span>
<span class="n">Xfers</span><span class="o">.</span><span class="na">setSGSandbox</span><span class="o">();</span>

<span class="k">try</span> <span class="o">{</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">BankAccount</span><span class="o">&gt;</span> <span class="n">bankAccounts</span> <span class="o">=</span> <span class="n">BankAccount</span><span class="o">.</span><span class="na">retrieve</span><span class="o">();</span>
    <span class="k">for</span> <span class="o">(</span><span class="n">BankAccount</span> <span class="n">bankAccount</span> <span class="o">:</span> <span class="n">bankAccounts</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">bankAccount</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span>
</code></pre>

<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
       </span><span class="s2">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"12312"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"account_no"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"039-312-3432-3"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"bank_abbrev"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"DBS"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"usage"</span><span class="p">:</span><span class="w"> </span><span class="s2">"all"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"account_holder_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tian Wei"</span><span class="w">              
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
       </span><span class="s2">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"12315"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"account_no"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"129-880-1251-1"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"bank_abbrev"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"OCBC"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"usage"</span><span class="p">:</span><span class="w"> </span><span class="s2">"all"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"account_holder_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tian Wei"</span><span class="w">                 
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<p>This will list all bank accounts belonging to the user.</p>

<h4 id="https-request">HTTPS Request</h4>

<p><code class="prettyprint">GET https://sandbox.xfers.io/api/v3/user/bank_account</code></p>

<h4 id="url-parameters">URL Parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>usage</td>
<td>string</td>
<td>optional</td>
<td>type of bank account</td>
<td>Either &ldquo;funding_source” or “withdrawal” or “all”. Defaults to “all”</td>
</tr>
</tbody></table>

<h3 id="update-a-bank-account">Update a Bank Account</h3>
<pre class="highlight shell"><code>curl <span class="s2">"https://sandbox.xfers.io/api/v3/user/bank_account/&lt;bank_account_id&gt;"</span> <span class="se">\</span>
  -H <span class="s2">"X-XFERS-USER-API-KEY: FVNbKjcGZ5Xx-Uf2XnxsrGtoxmLm9YEgokzDRoyshFc"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -X PUT <span class="se">\</span>
  -d <span class="s1">'{"account_no": "03931234321", "bank":"DBS"}'</span>
</code></pre>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="k">require_once</span><span class="p">(</span><span class="s1">'vendor/autoload.php'</span><span class="p">);</span>

<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setApiKey</span><span class="p">(</span><span class="s1">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span><span class="p">);</span>
<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setSGSandbox</span><span class="p">();</span>
<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$resp</span> <span class="o">=</span> <span class="nx">\Xfers\BankAccount</span><span class="o">::</span><span class="na">update</span><span class="p">(</span><span class="s1">'&lt;bank_account_id&gt;'</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'account_no'</span> <span class="o">=&gt;</span> <span class="s1">'03931234321'</span><span class="p">,</span>
        <span class="s1">'bank'</span> <span class="o">=&gt;</span> <span class="s1">'DBS'</span>
    <span class="p">));</span>
    <span class="nb">print_r</span><span class="p">(</span><span class="nv">$resp</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Xfers\Error\InvalidRequest</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">'Caught invalid request exception: '</span><span class="p">,</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">(),</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">xfers</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">xfbankaccount</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">error</span>

<span class="n">xfers</span><span class="o">.</span><span class="n">api_key</span> <span class="o">=</span> <span class="s">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span>
<span class="n">xfers</span><span class="o">.</span><span class="n">set_sg_sandbox</span><span class="p">()</span>

<span class="k">try</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">'Updating bank account {}...'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s">'&lt;bank_account_id&gt;'</span><span class="p">)</span>
    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'account_no'</span><span class="p">:</span> <span class="s">'03931234321'</span><span class="p">,</span>
        <span class="s">'bank'</span><span class="p">:</span> <span class="s">'DBS'</span>
    <span class="p">}</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">xfbankaccount</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="s">'&lt;bank_account_id&gt;'</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
    <span class="k">print</span> <span class="n">resp</span>
<span class="k">except</span> <span class="n">error</span><span class="o">.</span><span class="n">XfersError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">print</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'xfers'</span>

<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_api_key</span> <span class="s1">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span>
<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_sg_sandbox</span>

<span class="k">begin</span>
  <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
      <span class="s1">'account_no'</span><span class="o">=&gt;</span> <span class="s1">'03931234321'</span><span class="p">,</span>
      <span class="s1">'bank'</span><span class="o">=&gt;</span> <span class="s1">'DBS'</span>
  <span class="p">}</span>
  <span class="nb">puts</span> <span class="s1">'Updating bank account...'</span>
  <span class="n">resp</span> <span class="o">=</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">BankAccount</span><span class="p">.</span><span class="nf">update</span> <span class="s1">'&lt;bank_account_id&gt;'</span><span class="p">,</span> <span class="n">params</span>
  <span class="nb">puts</span> <span class="n">resp</span>
<span class="k">rescue</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">XfersError</span> <span class="o">=&gt;</span> <span class="n">e</span>
  <span class="nb">puts</span> <span class="n">e</span><span class="p">.</span><span class="nf">to_s</span>
<span class="k">end</span>
</code></pre>
<pre class="highlight java"><code><span class="n">Xfers</span><span class="o">.</span><span class="na">apiKey</span> <span class="o">=</span> <span class="s">"pXcfdAKNorDe_o1eou1NSp4mwssiEzem_6sg8fwnZWs"</span><span class="o">;</span>
<span class="n">Xfers</span><span class="o">.</span><span class="na">setSGSandbox</span><span class="o">();</span>

<span class="k">try</span> <span class="o">{</span>
    <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">params</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;();</span>
    <span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"account_no"</span><span class="o">,</span> <span class="s">"03931234321"</span><span class="o">);</span>
    <span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"bank"</span><span class="o">,</span> <span class="s">"DBS"</span><span class="o">);</span>

    <span class="n">List</span><span class="o">&lt;</span><span class="n">BankAccount</span><span class="o">&gt;</span> <span class="n">bankAccounts</span> <span class="o">=</span> <span class="n">BankAccount</span><span class="o">.</span><span class="na">update</span><span class="o">(</span><span class="s">"&lt;bank_account_id&gt;"</span><span class="o">,</span> <span class="n">params</span><span class="o">);</span>
    <span class="k">for</span> <span class="o">(</span><span class="n">BankAccount</span> <span class="n">bankAccount</span> <span class="o">:</span> <span class="n">bankAccounts</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">bankAccount</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span>
</code></pre>

<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
       </span><span class="s2">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"12312"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"account_no"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"039-312-3432-1"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"bank_abbrev"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"DBS"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"usage"</span><span class="p">:</span><span class="w"> </span><span class="s2">"all"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"account_holder_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tian Wei"</span><span class="w">              
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
       </span><span class="s2">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"12315"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"account_no"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"129-880-1251-1"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"bank_abbrev"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"OCBC"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"usage"</span><span class="p">:</span><span class="w"> </span><span class="s2">"all"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"account_holder_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tian Wei"</span><span class="w">              
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<p>This request allows you to update an existing bank account record. </p>

<h4 id="https-request">HTTPS Request</h4>

<p><code class="prettyprint">PUT https://sandbox.xfers.io/api/v3/user/bank_account/&lt;bank_account_id&gt;</code></p>

<h4 id="response">Response</h4>

<p>List of all bank accounts belonging to user.</p>

<h4 id="url-parameters">URL Parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>account_no</td>
<td>string</td>
<td>optional</td>
<td>bank account no</td>
<td>03931234323</td>
</tr>
<tr>
<td>bank</td>
<td>string</td>
<td>optional</td>
<td>bank abbreviation (Refer to <a href="?shell/#available-banks">available banks</a>)</td>
<td>DBS</td>
</tr>
<tr>
<td>usage</td>
<td>string</td>
<td>optional</td>
<td>Is this bank account to be used as a funding source or for withdrawals?</td>
<td>Either &quot;funding_source&rdquo; or &ldquo;withdrawal&rdquo; or &ldquo;all&rdquo;.</td>
</tr>
<tr>
<td>account_holder_name</td>
<td>string</td>
<td>optional</td>
<td>Name of bank account holder</td>
<td>Tian Wei</td>
</tr>
<tr>
<td>detect_name</td>
<td>string</td>
<td>optional</td>
<td>Whether to refresh the detected name (Only available for Xfers Indonesia)</td>
<td>defaults to false</td>
</tr>
</tbody></table>

<h3 id="delete-bank-account">Delete Bank Account</h3>
<pre class="highlight shell"><code>curl -X DELETE <span class="s2">"https://sandbox.xfers.io/api/v3/user/bank_account/&lt;bank_account_id&gt;"</span> <span class="se">\</span>
  -H <span class="s2">"X-XFERS-USER-API-KEY: FVNbKjcGZ5Xx-Uf2XnxsrGtoxmLm9YEgokzDRoyshFc"</span>
</code></pre>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="k">require_once</span><span class="p">(</span><span class="s1">'vendor/autoload.php'</span><span class="p">);</span>

<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setApiKey</span><span class="p">(</span><span class="s1">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span><span class="p">);</span>
<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setSGSandbox</span><span class="p">();</span>
<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$resp</span> <span class="o">=</span> <span class="nx">\Xfers\BankAccount</span><span class="o">::</span><span class="na">delete</span><span class="p">(</span><span class="s1">'&lt;bank_account_id&gt;'</span><span class="p">);</span>
    <span class="nb">print_r</span><span class="p">(</span><span class="nv">$resp</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Xfers\Error\InvalidRequest</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">'Caught invalid request exception: '</span><span class="p">,</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">(),</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">xfers</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">xfbankaccount</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">error</span>
<span class="n">xfers</span><span class="o">.</span><span class="n">api_key</span> <span class="o">=</span> <span class="s">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span>
<span class="n">xfers</span><span class="o">.</span><span class="n">set_sg_sandbox</span><span class="p">()</span>
<span class="k">try</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">'Deleting bank account {}...'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s">'&lt;bank_account_id&gt;'</span><span class="p">)</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">xfbankaccount</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="s">'&lt;bank_account_id&gt;'</span><span class="p">)</span>
    <span class="k">print</span> <span class="n">resp</span>
<span class="k">except</span> <span class="n">error</span><span class="o">.</span><span class="n">XfersError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">print</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'xfers'</span>

<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_api_key</span> <span class="s1">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span>
<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_sg_sandbox</span>

<span class="k">begin</span>
  <span class="nb">puts</span> <span class="s1">'Deleting bank account...'</span>
  <span class="n">resp</span> <span class="o">=</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">BankAccount</span><span class="p">.</span><span class="nf">delete</span> <span class="s1">'&lt;bank_account_id&gt;'</span>
  <span class="nb">puts</span> <span class="n">resp</span>
<span class="k">rescue</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">XfersError</span> <span class="o">=&gt;</span> <span class="n">e</span>
  <span class="nb">puts</span> <span class="n">e</span><span class="p">.</span><span class="nf">to_s</span>
<span class="k">end</span>
</code></pre>
<pre class="highlight java"><code><span class="n">Xfers</span><span class="o">.</span><span class="na">apiKey</span> <span class="o">=</span> <span class="s">"pXcfdAKNorDe_o1eou1NSp4mwssiEzem_6sg8fwnZWs"</span><span class="o">;</span>
<span class="n">Xfers</span><span class="o">.</span><span class="na">setSGSandbox</span><span class="o">();</span>
<span class="k">try</span> <span class="o">{</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">BankAccount</span><span class="o">&gt;</span> <span class="n">bankAccounts</span> <span class="o">=</span> <span class="n">BankAccount</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="s">"&lt;bank_account_id&gt;"</span><span class="o">);</span>
    <span class="k">for</span> <span class="o">(</span><span class="n">BankAccount</span> <span class="n">bankAccount</span> <span class="o">:</span> <span class="n">bankAccounts</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">bankAccount</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span>
</code></pre>

<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
       </span><span class="s2">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"12312"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"account_no"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"039-312-3432-1"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"bank_abbrev"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"DBS"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<p>This request allow you to delete an existing bank account record. </p>

<h4 id="https-request">HTTPS Request</h4>

<p><code class="prettyprint">DELETE https://sandbox.xfers.io/api/v3/user/bank_account/&lt;bank_account_id&gt;</code></p>

<h4 id="response">Response</h4>

<p>List of all bank accounts belonging to user.</p>

<h3 id="submit-withdrawal-request">Submit Withdrawal Request</h3>
<pre class="highlight shell"><code>curl <span class="s2">"https://sandbox.xfers.io/api/v3/user/bank_account/&lt;bank_account_id&gt;/withdraw"</span> <span class="se">\</span>
  -H <span class="s2">"X-XFERS-USER-API-KEY: FVNbKjcGZ5Xx-Uf2XnxsrGtoxmLm9YEgokzDRoyshFc"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -d <span class="s1">'{"amount": "50.0"}'</span>
</code></pre>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="k">require_once</span><span class="p">(</span><span class="s1">'vendor/autoload.php'</span><span class="p">);</span>

<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setApiKey</span><span class="p">(</span><span class="s1">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span><span class="p">);</span>
<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setSGSandbox</span><span class="p">();</span>
<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$resp</span> <span class="o">=</span> <span class="nx">\Xfers\BankAccount</span><span class="o">::</span><span class="na">withdraw</span><span class="p">(</span><span class="s1">'&lt;bank_account_id&gt;'</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'amount'</span> <span class="o">=&gt;</span> <span class="s1">'50.0'</span>
    <span class="p">));</span>
    <span class="nb">print_r</span><span class="p">(</span><span class="nv">$resp</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Xfers\Error\InvalidRequest</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">'Caught invalid request exception: '</span><span class="p">,</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">(),</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">xfers</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">xfbankaccount</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">error</span>
<span class="n">xfers</span><span class="o">.</span><span class="n">api_key</span> <span class="o">=</span> <span class="s">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span>
<span class="n">xfers</span><span class="o">.</span><span class="n">set_sg_sandbox</span><span class="p">()</span>
<span class="k">try</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">'Withdrawing from bank account {}...'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s">'&lt;bank_account_id&gt;'</span><span class="p">)</span>
    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'amount'</span><span class="p">:</span> <span class="s">'50.0'</span>
    <span class="p">}</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">xfbankaccount</span><span class="o">.</span><span class="n">withdraw</span><span class="p">(</span><span class="s">'&lt;bank_account_id&gt;'</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
    <span class="k">print</span> <span class="n">resp</span>
<span class="k">except</span> <span class="n">error</span><span class="o">.</span><span class="n">XfersError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">print</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'xfers'</span>

<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_api_key</span> <span class="s1">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span>
<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_sg_sandbox</span>

<span class="k">begin</span>
  <span class="nb">puts</span> <span class="s1">'Withdrawing from bank account...'</span>
  <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
      <span class="s1">'amount'</span><span class="o">=&gt;</span> <span class="s1">'50.0'</span>
  <span class="p">}</span>
  <span class="n">resp</span> <span class="o">=</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">BankAccount</span><span class="p">.</span><span class="nf">withdraw</span> <span class="s1">'&lt;bank_account_id&gt;'</span><span class="p">,</span> <span class="n">params</span>
  <span class="nb">puts</span> <span class="n">resp</span>
<span class="k">rescue</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">XfersError</span> <span class="o">=&gt;</span> <span class="n">e</span>
  <span class="nb">puts</span> <span class="n">e</span><span class="p">.</span><span class="nf">to_s</span>
<span class="k">end</span>
</code></pre>
<pre class="highlight java"><code><span class="n">Xfers</span><span class="o">.</span><span class="na">apiKey</span> <span class="o">=</span> <span class="s">"pXcfdAKNorDe_o1eou1NSp4mwssiEzem_6sg8fwnZWs"</span><span class="o">;</span>
<span class="n">Xfers</span><span class="o">.</span><span class="na">setSGSandbox</span><span class="o">();</span>
<span class="k">try</span> <span class="o">{</span>
    <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">params</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;();</span>
    <span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"amount"</span><span class="o">,</span> <span class="s">"50.0"</span><span class="o">);</span>
    <span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"express"</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>

    <span class="n">Withdrawal</span> <span class="n">withdrawal</span> <span class="o">=</span> <span class="n">BankAccount</span><span class="o">.</span><span class="na">withdraw</span><span class="o">(</span><span class="s">"&lt;bank_account_id&gt;"</span><span class="o">,</span> <span class="n">params</span><span class="o">);</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">withdrawal</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">withdrawal</span><span class="o">.</span><span class="na">getAccountNo</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">withdrawal</span><span class="o">.</span><span class="na">getBankAbbrev</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">withdrawal</span><span class="o">.</span><span class="na">getAmount</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">withdrawal</span><span class="o">.</span><span class="na">getFees</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">withdrawal</span><span class="o">.</span><span class="na">getExpress</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">withdrawal</span><span class="o">.</span><span class="na">getStatus</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">withdrawal</span><span class="o">.</span><span class="na">getArrival</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">withdrawal</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span>
</code></pre>

<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"available_balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.00"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"ledger_balance"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"200.00"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"withdrawal_request"</span><span class="w"> </span><span class="p">:</span><span class="w">
    </span><span class="p">{</span><span class="w">
       </span><span class="s2">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"59"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"account_no"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"039-312-3432-3"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"bank_abbrev"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"DBS"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"50.0"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"fees"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"express"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"false"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"status"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"pending"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"arrival"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"31 March 2016"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This will make a withdrawal request to the bank account given, provided that your account have sufficient available balance.</p>

<p>For same day withdrawal(additional fees applies), set &lsquo;express&rsquo; field to true. Funds will arrive at recipient bank within 24 hrs.</p>

<p>Standard withdrawal takes 2-3 business day to arrive at recipient bank.</p>

<h4 id="https-request">HTTPS Request</h4>

<p><code class="prettyprint">POST https://sandbox.xfers.io/api/v3/user/bank_account/&lt;bank_account_id&gt;/withdraw</code></p>

<h4 id="url-parameters">URL Parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>amount</td>
<td>string</td>
<td>required</td>
<td>Amount to withdraw in SGD</td>
<td>50.0</td>
</tr>
<tr>
<td>express</td>
<td>string</td>
<td>optional</td>
<td>Default to &#39;false&rsquo;</td>
<td>50.0</td>
</tr>
</tbody></table>

<h3 id="list-withdrawal-request">List Withdrawal Request</h3>
<pre class="highlight shell"><code>curl <span class="s2">"https://sandbox.xfers.io/api/v3/user/bank_account/withdraw_requests"</span> <span class="se">\</span>
  -H <span class="s2">"X-XFERS-USER-API-KEY: FVNbKjcGZ5Xx-Uf2XnxsrGtoxmLm9YEgokzDRoyshFc"</span>
</code></pre>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="k">require_once</span><span class="p">(</span><span class="s1">'vendor/autoload.php'</span><span class="p">);</span>

<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setApiKey</span><span class="p">(</span><span class="s1">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span><span class="p">);</span>
<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setSGSandbox</span><span class="p">();</span>
<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$resp</span> <span class="o">=</span> <span class="nx">\Xfers\BankAccount</span><span class="o">::</span><span class="na">withdrawalRequests</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
        <span class="s1">'filter'</span> <span class="o">=&gt;</span> <span class="s1">'pending'</span>
    <span class="p">));</span>
    <span class="nb">print_r</span><span class="p">(</span><span class="nv">$resp</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Xfers\Error\InvalidRequest</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">'Caught invalid request exception: '</span><span class="p">,</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">(),</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">xfers</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">xfbankaccount</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">error</span>
<span class="n">xfers</span><span class="o">.</span><span class="n">api_key</span> <span class="o">=</span> <span class="s">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span>
<span class="n">xfers</span><span class="o">.</span><span class="n">set_sg_sandbox</span><span class="p">()</span>
<span class="k">try</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">'Listing withdrawal requests...'</span>
    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'filter'</span><span class="p">:</span> <span class="s">'pending'</span>
    <span class="p">}</span>
    <span class="n">withdrawal_requests</span> <span class="o">=</span> <span class="n">xfbankaccount</span><span class="o">.</span><span class="n">withdrawal_requests</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">request</span> <span class="ow">in</span> <span class="n">withdrawal_requests</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">'Withdrawal request: {}'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
<span class="k">except</span> <span class="n">error</span><span class="o">.</span><span class="n">XfersError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">print</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'xfers'</span>

<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_api_key</span> <span class="s1">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span>
<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_sg_sandbox</span>

<span class="k">begin</span>
  <span class="nb">puts</span> <span class="s1">'Listing withdrawal requests...'</span>
  <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
      <span class="s1">'filter'</span><span class="o">=&gt;</span> <span class="s1">'pending'</span>
  <span class="p">}</span>
  <span class="n">withdrawal_requests</span> <span class="o">=</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">BankAccount</span><span class="p">.</span><span class="nf">withdrawal_requests</span> <span class="n">params</span>
  <span class="n">withdrawal_requests</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">req</span><span class="o">|</span> <span class="nb">puts</span> <span class="s2">"Withdrawal request=&gt; </span><span class="si">#{</span><span class="n">req</span><span class="si">}</span><span class="s2">"</span> <span class="p">}</span>
<span class="k">rescue</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">XfersError</span> <span class="o">=&gt;</span> <span class="n">e</span>
  <span class="nb">puts</span> <span class="n">e</span><span class="p">.</span><span class="nf">to_s</span>
<span class="k">end</span>
</code></pre>
<pre class="highlight java"><code><span class="n">Xfers</span><span class="o">.</span><span class="na">apiKey</span> <span class="o">=</span> <span class="s">"pXcfdAKNorDe_o1eou1NSp4mwssiEzem_6sg8fwnZWs"</span><span class="o">;</span>
<span class="n">Xfers</span><span class="o">.</span><span class="na">setSGSandbox</span><span class="o">();</span>
<span class="k">try</span> <span class="o">{</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">Withdrawal</span><span class="o">&gt;</span> <span class="n">withdrawalRequests</span> <span class="o">=</span> <span class="n">BankAccount</span><span class="o">.</span><span class="na">withdrawalRequests</span><span class="o">(</span><span class="s">"pending"</span><span class="o">);</span>
    <span class="k">for</span> <span class="o">(</span><span class="n">Withdrawal</span> <span class="n">withdrawal</span> <span class="o">:</span> <span class="n">withdrawalRequests</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">withdrawal</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span>
</code></pre>

<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"withdrawal_requests"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
       </span><span class="s2">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"59"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"account_no"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"039-312-3432-3"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"bank_abbrev"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"DBS"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"50.0"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"fees"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"express"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"false"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"status"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"pending"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"arrival"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"31 March 2016"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
       </span><span class="s2">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"99"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"account_no"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"129-880-1251-1"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"bank_abbrev"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"OCBC"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"250.0"</span><span class="p">,</span><span class="w">       
       </span><span class="s2">"fees"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2.99"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"express"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"true"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"status"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"pending"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"arrival"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"28 March 2016"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This will list all non-completed withdrawal requests made previously.</p>

<h4 id="https-request">HTTPS Request</h4>

<p><code class="prettyprint">GET https://sandbox.xfers.io/api/v3/user/bank_account/withdrawal_requests</code></p>

<h4 id="url-parameters">URL Parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>filter</td>
<td>string</td>
<td>optional</td>
<td>filter by <a href="/#withdrawal-status">withdrawal status</a></td>
<td>Default to no filter</td>
</tr>
</tbody></table>

<h5 id="withdrawal-status">Withdrawal Status</h5>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>unverified</td>
<td>Withdrawal request is awaiting confirmations</td>
</tr>
<tr>
<td>pending</td>
<td>Withdrawal request is being process now.</td>
</tr>
<tr>
<td>paid</td>
<td>Withdrawal request has been processed and completed.</td>
</tr>
<tr>
<td>cancelled</td>
<td>Withdrawal request has been cancelled.</td>
</tr>
</tbody></table>

<h2 id="prepaid-cards">Prepaid Cards</h2>

<p>The follow APIs allow you to withdraw money into a prepaid card.</p>

<h3 id="providers">Providers</h3>

<p>wirecard_test_2</p>

<h3 id="add-a-prepaid-card">Add a Prepaid Card</h3>
<pre class="highlight shell"><code>curl <span class="s2">"https://sandbox.xfers.io/api/v3/prepaid"</span> <span class="se">\</span>
  -H <span class="s2">"X-XFERS-USER-API-KEY: FVNbKjcGZ5Xx-Uf2XnxsrGtoxmLm9YEgokzDRoyshFc"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -d <span class="s1">'{"proxy_number": "21794", "description":"John card", "provider": "wirecard_test_2"}'</span>
</code></pre>
<pre class="highlight php"><code>
COMING SOON

</code></pre>
<pre class="highlight python"><code>
<span class="n">COMING</span> <span class="n">SOON</span>

</code></pre>
<pre class="highlight ruby"><code>
<span class="no">COMING</span> <span class="no">SOON</span>

</code></pre>
<pre class="highlight java"><code>
<span class="n">COMING</span> <span class="n">SOON</span>

</code></pre>

<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
   </span><span class="s2">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"12315"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"proxy_number"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"21794"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"description"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"John card"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"wirecard_test_2"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h4 id="https-request">HTTPS Request</h4>

<p><code class="prettyprint">POST https://sandbox.xfers.io/api/v3/prepaid</code></p>

<h4 id="response">Response</h4>

<p>The prepaid card object.</p>

<h4 id="url-parameters">URL Parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>proxy_number</td>
<td>string</td>
<td>required</td>
<td>The prepaid card&rsquo;s proxy number</td>
<td>21794</td>
</tr>
<tr>
<td>provider</td>
<td>string</td>
<td>required</td>
<td>Prepaid card provider type</td>
<td>wirecard_test_2</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>optional</td>
<td>Description about this prepaid card</td>
<td>Sam&rsquo;s card</td>
</tr>
</tbody></table>

<h3 id="topup-a-prepaid-card">Topup a Prepaid Card</h3>
<pre class="highlight shell"><code>curl <span class="s2">"https://sandbox.xfers.io/api/v3/prepaid/CARD-ID/topup"</span> <span class="se">\</span>
  -H <span class="s2">"X-XFERS-USER-API-KEY: FVNbKjcGZ5Xx-Uf2XnxsrGtoxmLm9YEgokzDRoyshFc"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -d <span class="s1">'{"amount": 10.59}'</span>
</code></pre>
<pre class="highlight php"><code>
COMING SOON

</code></pre>
<pre class="highlight python"><code>
<span class="n">COMING</span> <span class="n">SOON</span>

</code></pre>
<pre class="highlight ruby"><code>
<span class="no">COMING</span> <span class="no">SOON</span>

</code></pre>
<pre class="highlight java"><code>
<span class="n">COMING</span> <span class="n">SOON</span>

</code></pre>

<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="s2">"319095ff12474a50ada1f2874fd1d3b2"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"object"</span><span class="p">:</span><span class="s2">"charge"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"amount"</span><span class="p">:</span><span class="s2">"84.52"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"total_amount"</span><span class="p">:</span><span class="s2">"84.52"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"currency"</span><span class="p">:</span><span class="s2">"sgd"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"customer"</span><span class="p">:</span><span class="s2">"+6597288607"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"order_id"</span><span class="p">:</span><span class="s2">"XFER170113160234758"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"description"</span><span class="p">:</span><span class="s2">"Load card 21794"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"statement_descriptor"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
   </span><span class="s2">"status"</span><span class="p">:</span><span class="s2">"completed"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"currency_symbol"</span><span class="p">:</span><span class="s2">"$"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"currency_precision"</span><span class="p">:</span><span class="mi">2</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h4 id="https-request">HTTPS Request</h4>

<p><code class="prettyprint">POST https://sandbox.xfers.io/api/v3/prepaid/CARD-ID/topup</code></p>

<h4 id="response">Response</h4>

<p>The completed charge object.</p>

<h4 id="url-parameters">URL Parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>amount</td>
<td>float</td>
<td>required</td>
<td>How much to topup</td>
<td>9.85</td>
</tr>
</tbody></table>

<h3 id="list-all-prepaid-card">List all Prepaid Card</h3>
<pre class="highlight shell"><code>curl <span class="s2">"https://sandbox.xfers.io/api/v3/prepaid"</span> <span class="se">\</span>
  -H <span class="s2">"X-XFERS-USER-API-KEY: FVNbKjcGZ5Xx-Uf2XnxsrGtoxmLm9YEgokzDRoyshFc"</span> 
</code></pre>
<pre class="highlight php"><code>
COMING SOON

</code></pre>
<pre class="highlight python"><code>
<span class="n">COMING</span> <span class="n">SOON</span>

</code></pre>
<pre class="highlight ruby"><code>
<span class="no">COMING</span> <span class="no">SOON</span>

</code></pre>
<pre class="highlight java"><code>
<span class="n">COMING</span> <span class="n">SOON</span>

</code></pre>

<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"554"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"proxy_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"444"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"helloworld"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"wirecard_test_0"</span><span class="w">
  </span><span class="p">},</span><span class="w"> 
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"556"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"proxy_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"454"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"meng"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"wirecard_test_2"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<h4 id="https-request">HTTPS Request</h4>

<p><code class="prettyprint">GET https://sandbox.xfers.io/api/v3/prepaid</code></p>

<h4 id="response">Response</h4>

<p>List of prepaid cards added.</p>

<h3 id="delete-prepaid-card">Delete Prepaid Card</h3>
<pre class="highlight shell"><code>curl -X DELETE <span class="s2">"https://sandbox.xfers.io/api/v3/prepaid/&lt;card_id&gt;"</span> <span class="se">\</span>
  -H <span class="s2">"X-XFERS-USER-API-KEY: FVNbKjcGZ5Xx-Uf2XnxsrGtoxmLm9YEgokzDRoyshFc"</span>
</code></pre>
<pre class="highlight php"><code>COMING SOON
</code></pre>
<pre class="highlight python"><code><span class="n">COMING</span> <span class="n">SOON</span>
</code></pre>
<pre class="highlight ruby"><code><span class="no">COMING</span> <span class="no">SOON</span>
</code></pre>
<pre class="highlight java"><code><span class="n">COMING</span> <span class="n">SOON</span>
</code></pre>

<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"556"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"proxy_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"454"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"meng"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"wirecard_test_2"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<p>This request allow you to delete an existing prepaid card. Note that this only deletes the prepaid card stored on Xfers; the card will still work and you can add back the card anytime.</p>

<h4 id="https-request">HTTPS Request</h4>

<p><code class="prettyprint">DELETE https://sandbox.xfers.io/api/v3/prepaid/&lt;card_id&gt;</code></p>

<h4 id="response">Response</h4>

<p>List of all prepaid cards belonging to user.</p>

<h2 id="charges">Charges</h2>

<p>The following APIs allow anyone to pay you via an internet banking transfer or credit card.</p>

<p>The user pays by going to the <code class="prettyprint">checkout_url</code> returned (assuming <code class="prettyprint">redirect</code> is set to <code class="prettyprint">false</code>). When <code class="prettyprint">redirect</code> is true, instead of the JSON response, Xfers will automatically redirect the request to our checkout page.</p>

<p>Our checkout page contains the relevant instructions for the user to login/signup and guides them to make payment. If the user already has an Xfers account with enough balance, we deduct directly from that account.</p>

<h3 id="creating-a-charge">Creating a Charge</h3>
<pre class="highlight shell"><code>curl <span class="s2">"https://sandbox.xfers.io/api/v3/charges"</span> <span class="se">\</span>
  -H <span class="s2">"X-XFERS-USER-API-KEY: FVNbKjcGZ5Xx-Uf2XnxsrGtoxmLm9YEgokzDRoyshFc"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -d <span class="s1">'{ "amount": "9.99", "currency": "SGD", "redirect": "false", "notify_url": "https://mysite.com/payment_notification", "return_url": "https://mysite.com/return", "cancel_url": "https://mysite.com/cancel", "order_id": "AZ9912", "description":"unused red dress", "shipping": "2.50", "tax": "0.0", "items" : [{"description":"Red dress Size M","price":9.99,"quantity":1,"name":"Red dress"}], "meta_data": {"firstname":"Tianwei", "lastname":"Liu"}}'</span>
</code></pre>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="k">require_once</span><span class="p">(</span><span class="s1">'vendor/autoload.php'</span><span class="p">);</span>

<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setApiKey</span><span class="p">(</span><span class="s1">'Vsya_qc5KjiUGK3xyKRgmhb2Atir2wAyizqssRuYJYw'</span><span class="p">);</span>
<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setSGSandbox</span><span class="p">();</span>
<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$items</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
    <span class="nv">$item</span> <span class="o">=</span>  <span class="k">array</span><span class="p">(</span>
      <span class="s1">'description'</span> <span class="o">=&gt;</span> <span class="s1">'Red dress Size M'</span><span class="p">,</span>
      <span class="s1">'price'</span> <span class="o">=&gt;</span> <span class="s1">'9.99'</span><span class="p">,</span>
      <span class="s1">'quantity'</span> <span class="o">=&gt;</span> <span class="s1">'1'</span><span class="p">,</span>
      <span class="s1">'name'</span> <span class="o">=&gt;</span> <span class="s1">'Red dress'</span>
    <span class="p">);</span>
    <span class="nb">array_push</span><span class="p">(</span><span class="nv">$items</span><span class="p">,</span> <span class="nv">$item</span><span class="p">);</span>

    <span class="nv">$meta_data</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
      <span class="s1">'firstname'</span> <span class="o">=&gt;</span> <span class="s1">'Tianwei'</span><span class="p">,</span>
      <span class="s1">'lastname'</span> <span class="o">=&gt;</span> <span class="s1">'Liu'</span>
      <span class="p">);</span>
    <span class="nv">$resp</span> <span class="o">=</span> <span class="nx">\Xfers\Charge</span><span class="o">::</span><span class="na">create</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
        <span class="s1">'amount'</span> <span class="o">=&gt;</span> <span class="s1">'9.99'</span><span class="p">,</span>
        <span class="s1">'currency'</span> <span class="o">=&gt;</span> <span class="s1">'SGD'</span><span class="p">,</span>
        <span class="s1">'notify_url'</span> <span class="o">=&gt;</span> <span class="s1">'https://mysite.com/payment_notification'</span><span class="p">,</span>
        <span class="s1">'return_url'</span> <span class="o">=&gt;</span> <span class="s1">'https://mysite.com/return'</span><span class="p">,</span>
        <span class="s1">'cancel_url'</span> <span class="o">=&gt;</span> <span class="s1">'https://mysite.com/cancel'</span><span class="p">,</span>
        <span class="s1">'order_id'</span> <span class="o">=&gt;</span> <span class="s1">'AZ9912'</span><span class="p">,</span>
        <span class="s1">'description'</span> <span class="o">=&gt;</span> <span class="s1">'unused red dress'</span><span class="p">,</span>
        <span class="s1">'shipping'</span> <span class="o">=&gt;</span> <span class="s1">'2.50'</span><span class="p">,</span>
        <span class="s1">'redirect'</span> <span class="o">=&gt;</span> <span class="s1">'false'</span><span class="p">,</span>
        <span class="s1">'tax'</span> <span class="o">=&gt;</span> <span class="s1">'0.0'</span><span class="p">,</span>
        <span class="s1">'items'</span> <span class="o">=&gt;</span> <span class="nb">json_encode</span><span class="p">(</span><span class="nv">$items</span><span class="p">),</span>
        <span class="s1">'meta_data'</span> <span class="o">=&gt;</span> <span class="nv">$meta_data</span>
    <span class="p">));</span>
    <span class="nb">print_r</span><span class="p">(</span><span class="nv">$resp</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Xfers\Error\InvalidRequest</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">'Caught InvalidRequest exception: '</span><span class="p">,</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">(),</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">xfers</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">xfcharge</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">error</span>
<span class="n">xfers</span><span class="o">.</span><span class="n">api_key</span> <span class="o">=</span> <span class="s">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span>
<span class="n">xfers</span><span class="o">.</span><span class="n">set_sg_sandbox</span><span class="p">()</span>
<span class="k">try</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">'Creating charge...'</span>
    <span class="n">items</span> <span class="o">=</span> <span class="p">[{</span><span class="s">'description'</span><span class="p">:</span> <span class="s">'Red dress size M'</span><span class="p">,</span> <span class="s">'price'</span><span class="p">:</span> <span class="s">'9.99'</span><span class="p">,</span> <span class="s">'quantity'</span><span class="p">:</span> <span class="s">'1'</span><span class="p">,</span> <span class="s">'name'</span><span class="p">:</span> <span class="s">'Red dress'</span><span class="p">}]</span>
    <span class="n">meta_data</span> <span class="o">=</span> <span class="p">{</span><span class="s">'firstname'</span><span class="p">:</span> <span class="s">'Tianwei'</span><span class="p">,</span> <span class="s">'lastname'</span><span class="p">:</span> <span class="s">'Liu'</span><span class="p">}</span>
    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'amount'</span> <span class="p">:</span> <span class="s">'9.99'</span><span class="p">,</span>
        <span class="s">'currency'</span> <span class="p">:</span> <span class="s">'SGD'</span><span class="p">,</span>
        <span class="s">'notify_url'</span> <span class="p">:</span> <span class="s">'https://mysite.com/payment_notification'</span><span class="p">,</span>
        <span class="s">'return_url'</span> <span class="p">:</span> <span class="s">'https://mysite.com/return'</span><span class="p">,</span>
        <span class="s">'cancel_url'</span> <span class="p">:</span> <span class="s">'https://mysite.com/cancel'</span><span class="p">,</span>
        <span class="s">'order_id'</span> <span class="p">:</span> <span class="s">'AZ9912'</span><span class="p">,</span>
        <span class="s">'description'</span> <span class="p">:</span> <span class="s">'unused red dress'</span><span class="p">,</span>
        <span class="s">'shipping'</span> <span class="p">:</span> <span class="s">'2.50'</span><span class="p">,</span>
        <span class="s">'redirect'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
        <span class="s">'tax'</span> <span class="p">:</span> <span class="s">'0.0'</span><span class="p">,</span>
        <span class="s">'items'</span> <span class="p">:</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">items</span><span class="p">),</span>
        <span class="s">'meta_data'</span> <span class="p">:</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">meta_data</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">xfcharge</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
    <span class="n">charge_id</span> <span class="o">=</span> <span class="n">resp</span><span class="p">[</span><span class="s">'id'</span><span class="p">]</span>
    <span class="k">print</span> <span class="n">resp</span>
<span class="k">except</span> <span class="n">error</span><span class="o">.</span><span class="n">XfersError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">print</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'xfers'</span>

<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_api_key</span> <span class="s1">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span>
<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_sg_sandbox</span>

<span class="k">begin</span>
  <span class="nb">puts</span> <span class="s1">'Creating charge...'</span>
  <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">'amount'</span> <span class="o">=&gt;</span> <span class="s1">'9.99'</span><span class="p">,</span>
        <span class="s1">'currency'</span> <span class="o">=&gt;</span> <span class="s1">'SGD'</span><span class="p">,</span>
        <span class="s1">'notify_url'</span> <span class="o">=&gt;</span> <span class="s1">'https://mysite.com/payment_notification'</span><span class="p">,</span>
        <span class="s1">'return_url'</span> <span class="o">=&gt;</span> <span class="s1">'https://mysite.com/return'</span><span class="p">,</span>
        <span class="s1">'cancel_url'</span> <span class="o">=&gt;</span> <span class="s1">'https://mysite.com/cancel'</span><span class="p">,</span>
        <span class="s1">'order_id'</span> <span class="o">=&gt;</span> <span class="s1">'AZ9912'</span><span class="p">,</span>
        <span class="s1">'description'</span> <span class="o">=&gt;</span> <span class="s1">'unused red dress'</span><span class="p">,</span>
        <span class="s1">'shipping'</span> <span class="o">=&gt;</span> <span class="s1">'2.50'</span><span class="p">,</span>
        <span class="s1">'tax'</span> <span class="o">=&gt;</span> <span class="s1">'0.0'</span><span class="p">,</span>
        <span class="s1">'redirect'</span> <span class="o">=&gt;</span> <span class="kp">false</span><span class="p">,</span>
        <span class="s1">'items'</span> <span class="o">=&gt;</span> <span class="p">[{</span><span class="s1">'description'</span> <span class="o">=&gt;</span> <span class="s1">'Red dress Size M'</span><span class="p">,</span> <span class="s1">'price'</span> <span class="o">=&gt;</span> <span class="s1">'9.99'</span><span class="p">,</span> <span class="s1">'quantity'</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">'name'</span> <span class="o">=&gt;</span> <span class="s1">'Red dress'</span><span class="p">}],</span>
        <span class="s1">'meta_data'</span> <span class="o">=&gt;</span> <span class="p">{</span><span class="s1">'firstname'</span><span class="o">=&gt;</span> <span class="s1">'Tianwei'</span><span class="p">,</span> <span class="s1">'lastname'</span><span class="o">=&gt;</span> <span class="s1">'Liu'</span><span class="p">}</span>
  <span class="p">}</span>
  <span class="n">resp</span> <span class="o">=</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">Charge</span><span class="p">.</span><span class="nf">create</span> <span class="n">params</span>
  <span class="n">charge_id</span> <span class="o">=</span> <span class="n">resp</span><span class="p">[</span><span class="ss">:id</span><span class="p">]</span>
  <span class="nb">puts</span> <span class="n">resp</span>
<span class="k">rescue</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">XfersError</span> <span class="o">=&gt;</span> <span class="n">e</span>
  <span class="nb">puts</span> <span class="n">e</span><span class="p">.</span><span class="nf">to_s</span>
<span class="k">end</span>
</code></pre>
<pre class="highlight java"><code><span class="k">try</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Creating a charge"</span><span class="o">);</span>
    <span class="n">Vector</span><span class="o">&lt;</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;&gt;</span> <span class="n">items</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Vector</span><span class="o">&lt;</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;&gt;();</span>
    <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">item</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;();</span>
    <span class="n">item</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"description"</span><span class="o">,</span> <span class="s">"Red dress Size M"</span><span class="o">);</span>
    <span class="n">item</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"price"</span><span class="o">,</span> <span class="s">"9.99"</span><span class="o">);</span>
    <span class="n">item</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"quantity"</span><span class="o">,</span> <span class="s">"1"</span><span class="o">);</span>
    <span class="n">item</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"name"</span><span class="o">,</span> <span class="s">"Red dress"</span><span class="o">);</span>
    <span class="n">items</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">item</span><span class="o">);</span>

    <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">meta_data</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;();</span>
    <span class="n">meta_data</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"firstname"</span><span class="o">,</span> <span class="s">"Tianwei"</span><span class="o">);</span>
    <span class="n">meta_data</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"lastname"</span><span class="o">,</span> <span class="s">"Liu"</span><span class="o">);</span>

    <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">params</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;();</span>
    <span class="n">Gson</span> <span class="n">gson</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Gson</span><span class="o">();</span>

    <span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"amount"</span><span class="o">,</span> <span class="s">"9.99"</span><span class="o">);</span>
    <span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"currency"</span><span class="o">,</span> <span class="s">"SGD"</span><span class="o">);</span>
    <span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"notify_url"</span><span class="o">,</span> <span class="s">"https://mysite.com/payment_notification"</span><span class="o">);</span>
    <span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"return_url"</span><span class="o">,</span> <span class="s">"https://mysite.com/return"</span><span class="o">);</span>
    <span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"cancel_url"</span><span class="o">,</span> <span class="s">"https://mysite.com/cancel"</span><span class="o">);</span>
    <span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"order_id"</span><span class="o">,</span> <span class="s">"AZ9912"</span><span class="o">);</span>
    <span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"description"</span><span class="o">,</span> <span class="s">"unused red dress"</span><span class="o">);</span>
    <span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"redirect"</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>
    <span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"shipping"</span><span class="o">,</span> <span class="s">"2.50"</span><span class="o">);</span>
    <span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"tax"</span><span class="o">,</span> <span class="s">"0.0"</span><span class="o">);</span>
    <span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"items"</span><span class="o">,</span> <span class="n">gson</span><span class="o">.</span><span class="na">toJson</span><span class="o">(</span><span class="n">items</span><span class="o">));</span>
    <span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"meta_data"</span><span class="o">,</span> <span class="n">gson</span><span class="o">.</span><span class="na">toJson</span><span class="o">(</span><span class="n">meta_data</span><span class="o">));</span>

    <span class="n">Charge</span> <span class="n">charge</span> <span class="o">=</span> <span class="n">Charge</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="n">params</span><span class="o">);</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">charge</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">charge</span><span class="o">.</span><span class="na">getAmount</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">charge</span><span class="o">.</span><span class="na">getCheckoutUrl</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">charge</span><span class="o">.</span><span class="na">getOrderId</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">charge</span><span class="o">.</span><span class="na">getStatus</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">charge</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>

<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span>
</code></pre>

<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b840cc9fc5a359c22ed2ccef3427aacd"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"checkout_url"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"https://sandbox.xfers.io/checkout_transaction/b840cc9fc5a359c22ed2ccef3427aacd"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"notify_url"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"https://mysite.com/payment_notification"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"return_url"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"https://mysite.com/return"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"cancel_url"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"https://mysite.com/cancel"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"object"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"charge"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">9.99</span><span class="p">,</span><span class="w">
  </span><span class="s2">"bank_unique_amt"</span><span class="p">:</span><span class="w"> </span><span class="mf">9.99</span><span class="p">,</span><span class="w">
  </span><span class="s2">"currency"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"SGD"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"customer"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="s2">"order_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"A012312"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"capture"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="s2">"description"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Carousell user - Konsolidate"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"items"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Red Dress Size M"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Red dress"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.00"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">9.99</span><span class="p">,</span><span class="w">
      </span><span class="s2">"item_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"statement_descriptor"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="s2">"receipt_email"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="s2">"shipping"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">2.50</span><span class="p">,</span><span class="w">
  </span><span class="s2">"tax"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.00</span><span class="p">,</span><span class="w">
  </span><span class="s2">"total_amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">12.49</span><span class="p">,</span><span class="w">
  </span><span class="s2">"fees"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.12</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"pending"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"meta_data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"firstname"</span><span class="p">:</span><span class="s2">"Tianwei"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"lastname"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Liu"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"transfer_info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"bank_name_full"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Oversea-Chinese Banking Corporation Limited"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bank_name_abbreviation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OCBC"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bank_account_no"</span><span class="p">:</span><span class="w"> </span><span class="s2">"646004424001"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bank_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7339"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"branch_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"646"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"branch_area"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jurong East"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"unique_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"89898989"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"outstanding_amount"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"total"</span><span class="p">:</span><span class="w"> </span><span class="mf">9.99</span><span class="p">,</span><span class="w">
      </span><span class="s2">"total_txn"</span><span class="p">:</span><span class="w"> </span><span class="mf">9.99</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank_unique_amt"</span><span class="p">:</span><span class="w"> </span><span class="mf">9.99</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank_discount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"transfer_info_array"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"bank_name_full"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Bank Central Asia"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank_name_abbreviation"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BCA"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank_account_no"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"1063003003"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank_code"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"branch_code"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"branch_area"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"unique_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"97288607"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"img_src"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://xfers.com/bank-logo-bca.png"</span><span class="w">
    </span><span class="p">},</span><span class="w"> 
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"bank_name_full"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Bank Mandiri"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank_name_abbreviation"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"MANDIRI"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank_account_no"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"1190006792749"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank_code"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"branch_code"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"branch_area"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"unique_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"97288607"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"img_src"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://xfers.com/bank-logo-mandiri.png"</span><span class="w">    
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"bank_name_full"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Bank Negara Indonesia"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank_name_abbreviation"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BNI"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank_account_no"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"8000067885"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank_code"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"branch_code"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"branch_area"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"unique_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"97288607"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"img_src"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://xfers.com/bank-logo-bni.png"</span><span class="w">    
    </span><span class="p">}</span><span class="w">    
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>The following request will allow you to create a charge against a customer.     </p>

<p><code class="prettyprint">POST https://sandbox.xfers.io/api/v3/charges</code></p>

<h4 id="url-parameters">URL Parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>amount</td>
<td>float</td>
<td>required</td>
<td>Total value for items, excluding taxes and shipping fees</td>
<td>9.99</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>required</td>
<td>3-letter ISO code for currency</td>
<td>SGD</td>
</tr>
<tr>
<td>order_id</td>
<td>string</td>
<td>required</td>
<td>Unique ref no provided by you to prevent double charging, this cannot be repeated</td>
<td>A012312</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>optional</td>
<td>Description of transaction for display purposes</td>
<td>Carousell user - Konsolidate</td>
</tr>
<tr>
<td>customer</td>
<td>string</td>
<td>optional</td>
<td>Customer email or phone number. If provided, only that user can use the checkout_url returned. If the customer does not exist, an account will be created for them using the email/phone number provided. An OTP will be sent to the email/phone for the user to log in</td>
<td>johnny@xfers.com or +6597288608</td>
</tr>
<tr>
<td>notify_url</td>
<td>string</td>
<td>optional</td>
<td>URL to receive callback notifications on charge success/failure/expiration</td>
<td>https://mysite.com/payment_notification</td>
</tr>
<tr>
<td>return_url</td>
<td>string</td>
<td>optional</td>
<td>URL Xfers will redirect customer to on completion of Xfers checkout</td>
<td>https://mysite.com/return</td>
</tr>
<tr>
<td>cancel_url</td>
<td>string</td>
<td>optional</td>
<td>URL Xfers will redirect customer to on cancellation of Xfers checkout</td>
<td>https://mysite.com/cancel</td>
</tr>
<tr>
<td>user_api_token</td>
<td>string</td>
<td>optional</td>
<td>Buyer&rsquo;s api token obtain via Connect&rsquo;s get user token APIs. When this is provide, this charge will skip user auth.</td>
<td>NbKjcFV5XxGZ-Uf2XnxyshFcrGtoxmLms9YEgokzDRo</td>
</tr>
<tr>
<td>user_phone_no</td>
<td>string</td>
<td>optional</td>
<td>When this is provided, buyer will receive an OTP(one time password) from Xfers which they can provide to merchant to skip user authentication. See <a href="/#authorize-a-charge">Authorize a Charge</a>.</td>
<td>85228000</td>
</tr>
<tr>
<td>debit_only</td>
<td>boolean</td>
<td>optional</td>
<td>When this is true, this charge will attempt to debit from users existing balance/card on file. Status returned will be &ldquo;completed&rdquo; on successful debit or &ldquo;cancelled&rdquo; when there insufficient funds / valid card on file in user wallet.</td>
<td>Default to false</td>
</tr>
<tr>
<td>card_only</td>
<td>boolean</td>
<td>optional</td>
<td>When this is true, this charge will will attempt to only take payments via credit/debit card.</td>
<td>Default to false</td>
</tr>
<tr>
<td>absorb_card_fees</td>
<td>boolean</td>
<td>optional</td>
<td>When this is true, seller will not pass on the additional fees involved in card processing back on to buyer(as convenience fees)</td>
<td>Default to false</td>
</tr>
<tr>
<td>enquiry_only</td>
<td>boolean</td>
<td>optional</td>
<td>When this is true, this charge will not be processed but a standard response will be provided. This is usually used for testing purposes or for pre-fetching charge information like fees.</td>
<td>Default to false</td>
</tr>
<tr>
<td>redirect</td>
<td>string</td>
<td>optional</td>
<td>When this is true, instead of the JSON response, Xfers will automatically redirect the request to our checkout page</td>
<td>Default to true.</td>
</tr>
<tr>
<td>items</td>
<td>string</td>
<td>optional</td>
<td>A JSON array of item with attributes &#39;description, name, price, quantity&rsquo;. <a href="/#item-hash">See more info</a>.</td>
<td>&ldquo;[{&quot;description&rdquo;:&ldquo;Red dress Size M&rdquo;,&ldquo;price&rdquo;:9.99,&ldquo;quantity&rdquo;:1,&ldquo;name&rdquo;:&ldquo;Red dress&rdquo;}]&ldquo;</td>
</tr>
<tr>
<td>shipping</td>
<td>float</td>
<td>optional</td>
<td>Shipping fees</td>
<td>Default to 0.0</td>
</tr>
<tr>
<td>tax</td>
<td>float</td>
<td>optional</td>
<td>tax in $</td>
<td>Default to 0.0</td>
</tr>
<tr>
<td>hrs_to_expirations</td>
<td>float</td>
<td>optional</td>
<td>No of hours before this transactons will expire</td>
<td>Default to 48.0 hours from now.</td>
</tr>
<tr>
<td>meta_data</td>
<td>string</td>
<td>optional</td>
<td>A set of key/value pairs that you can attach to a charge. It can be useful for storing additional information about the customer in a structured format. You will be provided with these meta_data in your callback notification</td>
<td>{&quot;firstname&rdquo;:&ldquo;tianwei&rdquo;, &ldquo;lastname&rdquo;:&ldquo;liu&rdquo;}</td>
</tr>
<tr>
<td>receipt_email</td>
<td>string</td>
<td>optional</td>
<td>The email address to send this charge&rsquo;s receipt.</td>
<td>tianwei@xfers.io</td>
</tr>
<tr>
<td>skip_notifications</td>
<td>boolean</td>
<td>optional</td>
<td>Setting this to true will not send transaction reminders/cancelled/expired emails/SMS. Users will still receive payment completed notification.</td>
<td>Default to false.</td>
</tr>
</tbody></table>

<h4 id="create-charge-response">Create Charge Response</h4>

<p>If a customer is given, ( through <code class="prettyprint">user_api_token</code> or <code class="prettyprint">customer</code> or <code class="prettyprint">user_phone_no</code>) and the user has insufficient xfers wallet balance, the response will return the <code class="prettyprint">transfer_info</code> object containing information about the bank the user should transfer to. If multiple banks are available, the <code class="prettyprint">transfer_info_array</code> will also be returned.</p>

<p>Xfers might use a <code class="prettyprint">bank_unique_amt</code> to help in identifying the bank transfer in case the user forgets to enter his contact number in the comments section. This is a random amount with very small difference from actual amount(a few cents) which Xfers will absorb. However this is only to be used as a backup; the user should always enter his contact number.</p>

<p>The table below explains some of these attributes:</p>

<table><thead>
<tr>
<th>key</th>
<th>meaning</th>
</tr>
</thead><tbody>
<tr>
<td>bank_unique_amt</td>
<td>This is the amount user should use to transfer to the bank.</td>
</tr>
<tr>
<td>unique_id</td>
<td>The contact number of the user. This should be entered in the comments section of your bank when doing a bank transfer.</td>
</tr>
<tr>
<td>total_txn</td>
<td>Total value of your payable transactions.</td>
</tr>
<tr>
<td>total</td>
<td>total_txn - available Xfers balance of user.</td>
</tr>
<tr>
<td>bank_discount</td>
<td>total - bank_unique_amt</td>
</tr>
</tbody></table>

<h4 id="item-hash">item hash</h4>

<p>You can provide itemized receipt for your customer by giving use informations with regards to each of them in the <code class="prettyprint">items</code> field as a json array of hash. </p>

<p>The below is the list of attribute supported in the hash.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>description</td>
<td>string</td>
<td>required</td>
<td>Total value for items</td>
<td>Red dress Size M</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>required</td>
<td>Total value for items</td>
<td>Red dress</td>
</tr>
<tr>
<td>price</td>
<td>float</td>
<td>required</td>
<td>Total value for items</td>
<td>9.99</td>
</tr>
<tr>
<td>quantity</td>
<td>float</td>
<td>required</td>
<td>Total value for items</td>
<td>1.0</td>
</tr>
<tr>
<td>item_id</td>
<td>string</td>
<td>optional</td>
<td>Total value for items</td>
<td>AXA0012</td>
</tr>
</tbody></table>

<aside class="warning">
The subtotal of all the item MUST be equal to the `amount` field you provided or Xfers will reject your charge.
</aside>

<h4 id="meta-data">meta data</h4>

<p>You can use the <code class="prettyprint">meta_data</code> parameter to attach json data. This is useful for storing additional structured information about the charge. As an example, you could store your user&rsquo;s first name, last name or any corresponding unique identifier from your system a Xfers charge. </p>

<p>The description and meta_data you specify is returned in API responses.</p>

<p>When a charge get cancelled, additional information might be provided in the meta_data field with key &#39;error_code&rsquo; and &#39;error_message&rsquo;.</p>

<table><thead>
<tr>
<th>key</th>
<th>value</th>
<th>meaning</th>
</tr>
</thead><tbody>
<tr>
<td>error_code</td>
<td>&#39;KYC_ERROR&rsquo;</td>
<td>User has some issues with their Xfers&rsquo; account validation.</td>
</tr>
<tr>
<td>error_code</td>
<td>&#39;KYC_MULTI&rsquo;</td>
<td>Transfers from multiple bank account detected, user needs to contact Xfers for account validation.</td>
</tr>
<tr>
<td>error_code</td>
<td>&#39;KYC_LIMIT&rsquo;</td>
<td>User has reached the daily limit for their purchases.</td>
</tr>
<tr>
<td>error_code</td>
<td>&#39;KYC_UNAVAILABLE&rsquo;</td>
<td>Xfers has yet to receive KYC information for this user.</td>
</tr>
<tr>
<td>error_code</td>
<td>&#39;INSUFFICIENT_FUND&rsquo;</td>
<td>This is returned when a charge via user_api_token was unable to be process due to insufficient account balance.</td>
</tr>
<tr>
<td>error_code</td>
<td>&#39;INVALID_CARD&rsquo;</td>
<td>This is returned when a charge via user_api_token was unable to be process due to a the lack of a valid card on file.</td>
</tr>
</tbody></table>

<aside class="notice">
You should always provide customer&rsquo;s firstname and lastname information whenever you can as it would help us detecting fraudulence charges or user who have made an mistaken in their bank transfer.
</aside>

<h3 id="payment-cancellation">Payment Cancellation</h3>

<p>If customer cancels the transaction during Xfers&rsquo; checkout flow, he will be redirected back to the <code class="prettyprint">cancel_url</code> you provided. The <code class="prettyprint">order_id</code> you provided in the charge call will also be part of the GET request as shown:</p>

<p><code class="prettyprint">GET https://mysite.com/cancel?order_id=&lt;order_id&gt;</code></p>

<h3 id="payment-response">Payment Response</h3>

<p>After the customer has completed the transaction on Xfers website, he will be redirected back to the <code class="prettyprint">return_url</code> you provided. The <code class="prettyprint">order_id</code> you provided in the charge call will also be part of the GET request as shown:</p>

<p><code class="prettyprint">GET https://mysite.com/return?order_id=&lt;order_id&gt;</code></p>

<aside class="warning">
Please take note that at this point, payment may or may not have been completed and verified. You should wait on receiving our payment notification server call before releasing your goods/services.
</aside>

<h3 id="payment-notifications">Payment Notifications</h3>

<p>After payment has been completed and verified by Xfers backend, Xfers will send a callback to the <code class="prettyprint">notify_url</code> you provided. This is a server to server HTTPS POST and you will need to acknowledge the callback by providing a HTTP 200 status. It is important to take note that this notification can arrive at your server before or after the customer is redirected to the return_url you provided. </p>

<p><code class="prettyprint">POST https://mysite.com/payment_notification</code></p>

<p>The following parameters will be part of the HTTPS POST:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>txn_id</td>
<td>string</td>
<td>Xfers&rsquo;s transaction id unique to each transaction</td>
<td>b840cc9fc5a359c22ed2ccef3427aacd</td>
</tr>
<tr>
<td>order_id</td>
<td>string</td>
<td>Unique ref no provided by your during your charge call</td>
<td>A012312</td>
</tr>
<tr>
<td>total_amount</td>
<td>float</td>
<td>12.49</td>
<td>Total value for items</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>3-letter ISO code for currency</td>
<td>SGD</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Payment status.</td>
<td>&ldquo;cancelled&rdquo; or &ldquo;paid&rdquo; or &ldquo;expired&rdquo;</td>
</tr>
<tr>
<td>meta_data</td>
<td>string</td>
<td>meta data previous provided in your charge call.</td>
<td>&ldquo;{&#39;first_name&rsquo; : &#39;Tianwei&rsquo;, &#39;last_name&rsquo; : &#39;Liu&rsquo;}&rdquo;</td>
</tr>
</tbody></table>

<h3 id="verification-of-notifications">Verification of Notifications</h3>
<pre class="highlight shell"><code>curl <span class="s2">"https://sandbox.xfers.io/api/v3/charges/&lt;txn_id&gt;/validate"</span> <span class="se">\</span>
  -H <span class="s2">"X-XFERS-USER-API-KEY: FVNbKjcGZ5Xx-Uf2XnxsrGtoxmLm9YEgokzDRoyshFc"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -d <span class="s1">'{"total_amount": "24.99", "currency": "SGD", "order_id": "A012312", "status": "paid"}'</span>
</code></pre>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="k">require_once</span><span class="p">(</span><span class="s1">'vendor/autoload.php'</span><span class="p">);</span>

<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setApiKey</span><span class="p">(</span><span class="s1">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span><span class="p">);</span>
<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setSGSandbox</span><span class="p">();</span>
<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$resp</span> <span class="o">=</span> <span class="nx">\Xfers\Charge</span><span class="o">::</span><span class="na">validate</span><span class="p">(</span><span class="s2">"&lt;txn_id&gt;"</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'order_id'</span> <span class="o">=&gt;</span> <span class="s1">'A012312'</span><span class="p">,</span>
        <span class="s1">'total_amount'</span> <span class="o">=&gt;</span> <span class="s1">'24.99'</span><span class="p">,</span>
        <span class="s1">'status'</span> <span class="o">=&gt;</span> <span class="s1">'paid'</span><span class="p">,</span>
        <span class="s1">'currency'</span> <span class="o">=&gt;</span> <span class="s1">'SGD'</span>
    <span class="p">));</span>
    <span class="nb">print_r</span><span class="p">(</span><span class="nv">$resp</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Xfers\Error\Api</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">'Caught Api exception: '</span><span class="p">,</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">(),</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">xfers</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">xfcharge</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">error</span>
<span class="n">xfers</span><span class="o">.</span><span class="n">api_key</span> <span class="o">=</span> <span class="s">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span>
<span class="n">xfers</span><span class="o">.</span><span class="n">set_sg_sandbox</span><span class="p">()</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'order_id'</span><span class="p">:</span> <span class="s">'A012312'</span><span class="p">,</span>
        <span class="s">'total_amount'</span><span class="p">:</span> <span class="s">'24.99'</span><span class="p">,</span>
        <span class="s">'status'</span><span class="p">:</span> <span class="s">'paid'</span><span class="p">,</span>
        <span class="s">'currency'</span><span class="p">:</span> <span class="s">'SGD'</span>
    <span class="p">}</span>
    <span class="k">print</span> <span class="s">'Validating charge {}...'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">charge_id</span><span class="p">)</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">xfcharge</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">charge_id</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
    <span class="k">print</span> <span class="n">resp</span>
<span class="k">except</span> <span class="n">error</span><span class="o">.</span><span class="n">XfersError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">print</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'xfers'</span>

<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_api_key</span> <span class="s1">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span>
<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_sg_sandbox</span>

<span class="k">begin</span>
  <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
      <span class="s1">'currency'</span><span class="o">=&gt;</span> <span class="s1">'SGD'</span><span class="p">,</span>
      <span class="s1">'order_id'</span><span class="o">=&gt;</span> <span class="s1">'A012312'</span><span class="p">,</span>
      <span class="s1">'total_amount'</span><span class="o">=&gt;</span> <span class="s1">'24.99'</span><span class="p">,</span>
      <span class="s1">'status'</span><span class="o">=&gt;</span> <span class="s1">'paid'</span>
  <span class="p">}</span>
  <span class="nb">puts</span> <span class="s2">"Validating charge... </span><span class="si">#{</span><span class="n">charge_id</span><span class="si">}</span><span class="s2">"</span>
  <span class="n">resp</span> <span class="o">=</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">Charge</span><span class="p">.</span><span class="nf">validate</span> <span class="n">charge_id</span><span class="p">,</span> <span class="n">params</span>
  <span class="nb">puts</span> <span class="n">resp</span>
<span class="k">rescue</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">XfersError</span> <span class="o">=&gt;</span> <span class="n">e</span>
  <span class="nb">puts</span> <span class="n">e</span><span class="p">.</span><span class="nf">to_s</span>
<span class="k">end</span>
</code></pre>
<pre class="highlight java"><code><span class="n">Xfers</span><span class="o">.</span><span class="na">apiKey</span> <span class="o">=</span> <span class="s">"pXcfdAKNorDe_o1eou1NSp4mwssiEzem_6sg8fwnZWs"</span><span class="o">;</span>
<span class="n">Xfers</span><span class="o">.</span><span class="na">setSGSandbox</span><span class="o">();</span>

<span class="k">try</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Validating a charge"</span><span class="o">);</span>
    <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">params</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;();</span>
    <span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"total_amount"</span><span class="o">,</span> <span class="s">"19.99"</span><span class="o">);</span>
    <span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"currency"</span><span class="o">,</span> <span class="s">"SGD"</span><span class="o">);</span>
    <span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"order_id"</span><span class="o">,</span> <span class="s">"A012312"</span><span class="o">);</span>
    <span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"status"</span><span class="o">,</span> <span class="s">"paid"</span><span class="o">);</span>
    <span class="n">String</span> <span class="n">message</span> <span class="o">=</span> <span class="n">Charge</span><span class="o">.</span><span class="na">validate</span><span class="o">(</span><span class="s">"&lt;txn_id&gt;"</span><span class="o">,</span> <span class="n">params</span><span class="o">);</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">message</span><span class="o">);</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span>
</code></pre>

<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"VERIFIED"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>After receiving a payment notification from Xfers, you should do verification with Xfers to confirm that that it did indeed originate from Xfers. The post parameters must include all the fields in the payment notification that was sent from Xfers to you. </p>

<p>Xfers will response with HTTP 200 status and a JSON string { &ldquo;msg&rdquo;: &ldquo;VERIFIED&rdquo; } if the notification is valid or a JSON string { &ldquo;msg&rdquo;: &ldquo;INVALID&rdquo; } when its not.</p>

<h4 id="https-request">HTTPS Request</h4>

<p><code class="prettyprint">POST https://sandbox.xfers.io/api/v3/charges/&lt;id&gt;/validate</code></p>

<h4 id="url-parameters">URL Parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>order_id</td>
<td>string</td>
<td>Unique ref no provided by your during your charge call</td>
<td>A012312</td>
</tr>
<tr>
<td>total_amount</td>
<td>float</td>
<td>12.49</td>
<td>Total value for items</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>3-letter ISO code for currency</td>
<td>SGD</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Payment status.</td>
<td>&ldquo;cancelled&rdquo; or &ldquo;paid&rdquo; or &ldquo;expired&rdquo;</td>
</tr>
</tbody></table>

<h3 id="authorize-a-charge">Authorize a Charge</h3>
<pre class="highlight shell"><code>curl <span class="s2">"https://sandbox.xfers.io/api/v3/charges/&lt;id&gt;/authorize"</span> <span class="se">\</span>
  -H <span class="s2">"X-XFERS-USER-API-KEY: FVNbKjcGZ5Xx-Uf2XnxsrGtoxmLm9YEgokzDRoyshFc"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -d <span class="s1">'{"auth_code": "512312"}'</span>
</code></pre>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="k">require_once</span><span class="p">(</span><span class="s1">'vendor/autoload.php'</span><span class="p">);</span>

<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setApiKey</span><span class="p">(</span><span class="s1">'Vsya_qc5KjiUGK3xyKRgmhb2Atir2wAyizqssRuYJYw'</span><span class="p">);</span>
<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setSGSandbox</span><span class="p">();</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="c1">// You must create the charge with user_phone_no param passed in 
</span>    <span class="nv">$chargeId</span> <span class="o">=</span> <span class="s1">'782f2a6e1b5642edb10c8b6b215c4814'</span><span class="p">;</span>
    <span class="nv">$authCode</span> <span class="o">=</span> <span class="s1">'213779'</span><span class="p">;</span>
    <span class="nv">$resp</span> <span class="o">=</span> <span class="nx">\Xfers\Charge</span><span class="o">::</span><span class="na">authorize</span><span class="p">(</span><span class="nv">$chargeId</span><span class="p">,</span> <span class="nv">$authCode</span><span class="p">);</span>
    <span class="nb">print_r</span><span class="p">(</span><span class="nv">$resp</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Xfers\Error\InvalidRequest</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">'Caught InvalidRequest exception: '</span><span class="p">,</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">(),</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">xfers</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">xfcharge</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">error</span>

<span class="n">xfers</span><span class="o">.</span><span class="n">api_key</span> <span class="o">=</span> <span class="s">'WuTp3zM7UEpmUkeAyGPxRHmnXAx-hXJ7jzdqmxY6S1o'</span>
<span class="n">xfers</span><span class="o">.</span><span class="n">set_sg_sandbox</span><span class="p">()</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">charge_id</span> <span class="o">=</span> <span class="s">'0e140a1c251e48939d49651b57394737'</span>
    <span class="n">auth_code</span> <span class="o">=</span> <span class="s">'123049'</span>
    <span class="k">print</span> <span class="s">'Authorizing charge...'</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">xfcharge</span><span class="o">.</span><span class="n">authorize</span><span class="p">(</span><span class="n">charge_id</span><span class="p">,</span> <span class="n">auth_code</span><span class="p">)</span>
    <span class="k">print</span> <span class="n">resp</span>
<span class="k">except</span> <span class="n">error</span><span class="o">.</span><span class="n">XfersError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">print</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'xfers'</span>

<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_api_key</span> <span class="s1">'WuTp3zM7UEpmUkeAyGPxRHmnXAx-hXJ7jzdqmxY6S1o'</span>
<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_sg_sandbox</span>

<span class="k">begin</span>
  <span class="n">charge_id</span> <span class="o">=</span> <span class="s1">'your-charge-id'</span>
  <span class="n">auth_code</span> <span class="o">=</span> <span class="s1">'012414'</span>
  <span class="nb">puts</span> <span class="s2">"Authorizing charge... </span><span class="si">#{</span><span class="n">charge_id</span><span class="si">}</span><span class="s2">"</span>
  <span class="n">resp</span> <span class="o">=</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">Charge</span><span class="p">.</span><span class="nf">authorize</span> <span class="n">charge_id</span><span class="p">,</span> <span class="n">auth_code</span>
  <span class="nb">puts</span> <span class="n">resp</span>
<span class="k">rescue</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">XfersError</span> <span class="o">=&gt;</span> <span class="n">e</span>
  <span class="nb">puts</span> <span class="n">e</span><span class="p">.</span><span class="nf">to_s</span>
<span class="k">end</span>
</code></pre>
<pre class="highlight java"><code><span class="n">Xfers</span><span class="o">.</span><span class="na">apiKey</span> <span class="o">=</span> <span class="s">"pXcfdAKNorDe_o1eou1NSp4mwssiEzem_6sg8fwnZWs"</span><span class="o">;</span>
<span class="n">Xfers</span><span class="o">.</span><span class="na">setSGSandbox</span><span class="o">();</span>

<span class="k">try</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Authorize a charge"</span><span class="o">);</span>
    <span class="n">String</span> <span class="n">chargeId</span> <span class="o">=</span> <span class="s">"236d026fb4a5457ca9f60d3b1e806bbc"</span><span class="o">;</span>
    <span class="n">String</span> <span class="n">authCode</span> <span class="o">=</span> <span class="s">"482729"</span><span class="o">;</span>
    <span class="n">Charge</span> <span class="n">charge</span> <span class="o">=</span> <span class="n">Charge</span><span class="o">.</span><span class="na">authorize</span><span class="o">(</span><span class="n">chargeId</span><span class="o">,</span> <span class="n">authCode</span><span class="o">);</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">charge</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span>

</code></pre>

<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b840cc9fc5a359c22ed2ccef3427aacd"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"checkout_url"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"https://sandbox.xfers.io/checkout_transaction/b840cc9fc5a359c22ed2ccef3427aacd"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"notify_url"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"https://mysite.com/payment_notification"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"return_url"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"https://mysite.com/return"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"cancel_url"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"https://mysite.com/cancel"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"object"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"charge"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">9.99</span><span class="p">,</span><span class="w">
  </span><span class="s2">"currency"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"SGD"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"customer"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="s2">"order_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"A012312"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"capture"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="s2">"shipment_date"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-07-02T06:26:51Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"settlement_date"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-07-05T06:26:51Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"description"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Carousell user - Konsolidate"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"items"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Red Dress Size M"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Red dress"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.00"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">9.99</span><span class="p">,</span><span class="w">
      </span><span class="s2">"item_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"statement_descriptor"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="s2">"receipt_email"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="s2">"shipping"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">2.50</span><span class="p">,</span><span class="w">
  </span><span class="s2">"tax"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.00</span><span class="p">,</span><span class="w">
  </span><span class="s2">"total_amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">12.49</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"accepted"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"meta_data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"firstname"</span><span class="p">:</span><span class="s2">"Tianwei"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"lastname"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Liu"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Authorize a previously created charge. This is an optional process that will allow buyer to skip the sign in flow on Xfers, allowing checkout to be completed on merchant site. If a correct auth_code is provided, the charge will immediately become &ldquo;accepted&rdquo; by the buyer.</p>

<p>This endpoint is only used if <code class="prettyprint">user_phone_no</code> param was passed in during charge creation.</p>

<h4 id="https-request">HTTPS Request</h4>

<p><code class="prettyprint">POST https://sandbox.xfers.io/api/v3/charges/&lt;id&gt;/authorize</code></p>

<h4 id="url-parameters">URL Parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>auth_code</td>
<td>string</td>
<td>Required</td>
<td>PIN code provided to the buyer</td>
<td>512312</td>
</tr>
</tbody></table>

<h3 id="cancel-a-charge">Cancel a Charge</h3>
<pre class="highlight shell"><code>curl <span class="s2">"https://sandbox.xfers.io/api/v3/charges/&lt;CHARGE_ID&gt;/cancel"</span> <span class="se">\</span>
  -H <span class="s2">"X-XFERS-USER-API-KEY: FVNbKjcGZ5Xx-Uf2XnxsrGtoxmLm9YEgokzDRoyshFc"</span>
  -X POST
</code></pre>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="k">require_once</span><span class="p">(</span><span class="s1">'vendor/autoload.php'</span><span class="p">);</span>

<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setApiKey</span><span class="p">(</span><span class="s1">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span><span class="p">);</span>
<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setSGSandbox</span><span class="p">();</span>
<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$resp</span> <span class="o">=</span> <span class="nx">\Xfers\Charge</span><span class="o">::</span><span class="na">cancel</span><span class="p">(</span><span class="s2">"&lt;CHARGE_ID&gt;"</span><span class="p">);</span>
    <span class="nb">print_r</span><span class="p">(</span><span class="nv">$resp</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Xfers\Error\InvalidRequest</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">'Caught InvalidRequest exception: '</span><span class="p">,</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">(),</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">xfers</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">xfcharge</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">error</span>
<span class="n">xfers</span><span class="o">.</span><span class="n">api_key</span> <span class="o">=</span> <span class="s">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span>
<span class="n">xfers</span><span class="o">.</span><span class="n">set_sg_sandbox</span><span class="p">()</span>
<span class="k">try</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">'Cancelling charge {}...'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s">'&lt;CHARGE_ID&gt;'</span><span class="p">)</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">xfcharge</span><span class="o">.</span><span class="n">cancel</span><span class="p">(</span><span class="s">'&lt;CHARGE_ID&gt;'</span><span class="p">)</span>
    <span class="k">print</span> <span class="n">resp</span>
<span class="k">except</span> <span class="n">error</span><span class="o">.</span><span class="n">XfersError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">print</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'xfers'</span>

<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_api_key</span> <span class="s1">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span>
<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_sg_sandbox</span>

<span class="k">begin</span>
  <span class="n">charge_id</span> <span class="o">=</span> <span class="s1">'&lt;CHARGE_ID&gt;'</span>
  <span class="nb">puts</span> <span class="s2">"Cancelling charge... </span><span class="si">#{</span><span class="n">charge_id</span><span class="si">}</span><span class="s2">"</span>
  <span class="n">resp</span> <span class="o">=</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">Charge</span><span class="p">.</span><span class="nf">cancel</span> <span class="n">charge_id</span>
  <span class="nb">puts</span> <span class="n">resp</span>
<span class="k">rescue</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">XfersError</span> <span class="o">=&gt;</span> <span class="n">e</span>
  <span class="nb">puts</span> <span class="n">e</span><span class="p">.</span><span class="nf">to_s</span>
<span class="k">end</span>
</code></pre>
<pre class="highlight java"><code><span class="n">Xfers</span><span class="o">.</span><span class="na">apiKey</span> <span class="o">=</span> <span class="s">"pXcfdAKNorDe_o1eou1NSp4mwssiEzem_6sg8fwnZWs"</span><span class="o">;</span>
<span class="n">Xfers</span><span class="o">.</span><span class="na">setSGSandbox</span><span class="o">();</span>
<span class="k">try</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Cancelling a charge"</span><span class="o">);</span>
    <span class="n">Charge</span> <span class="n">charge</span> <span class="o">=</span> <span class="n">Charge</span><span class="o">.</span><span class="na">cancel</span><span class="o">(</span><span class="s">"&lt;CHARGE_ID&gt;"</span><span class="o">);</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">charge</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span>
</code></pre>

<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6fa51cd08c8ae115f858593412bb72c8"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"checkout_url"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"https://sandbox.xfers.io/checkout_transaction/b840cc9fc5a359c22ed2ccef3427aacd"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"notify_url"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"https://mysite.com/payment_notification"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"return_url"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"https://mysite.com/return"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"cancel_url"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"https://mysite.com/cancel"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"object"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"charge"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">9.99</span><span class="p">,</span><span class="w">
  </span><span class="s2">"currency"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"SGD"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"customer"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="s2">"order_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"A012312"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"capture"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="s2">"description"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Carousell user - Konsolidate"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"items"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Red Dress Size M"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Red dress"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.00"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">9.99</span><span class="p">,</span><span class="w">
      </span><span class="s2">"item_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"statement_descriptor"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="s2">"receipt_email"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="s2">"shipping"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">2.50</span><span class="p">,</span><span class="w">
  </span><span class="s2">"tax"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.00</span><span class="p">,</span><span class="w">
  </span><span class="s2">"total_amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">12.49</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"cancelled"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"meta_data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"key1"</span><span class="p">:</span><span class="s2">"value1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"key2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"value2"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Cancelling a charge that has been previously created by not yet paid. To refund a paid charge, refer to <a href="/#creating-a-refund">creating a refund</a>.</p>

<h4 id="https-request">HTTPS Request</h4>

<p><code class="prettyprint">POST https://sandbox.xfers.io/api/v3/charges/&lt;CHARGE_ID&gt;/cancel</code></p>

<h3 id="retrieve-a-charge">Retrieve a Charge</h3>
<pre class="highlight shell"><code>curl <span class="s2">"https://sandbox.xfers.io/api/v3/charges/&lt;id&gt;"</span> <span class="se">\</span>
  -H <span class="s2">"X-XFERS-USER-API-KEY: FVNbKjcGZ5Xx-Uf2XnxsrGtoxmLm9YEgokzDRoyshFc"</span>
</code></pre>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="k">require_once</span><span class="p">(</span><span class="s1">'vendor/autoload.php'</span><span class="p">);</span>

<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setApiKey</span><span class="p">(</span><span class="s1">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span><span class="p">);</span>
<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setSGSandbox</span><span class="p">();</span>
<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$resp</span> <span class="o">=</span> <span class="nx">\Xfers\Charge</span><span class="o">::</span><span class="na">retrieve</span><span class="p">(</span><span class="s2">"&lt;id&gt;"</span><span class="p">);</span>
    <span class="nb">print_r</span><span class="p">(</span><span class="nv">$resp</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Xfers\Error\InvalidRequest</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">'Caught InvalidRequest exception: '</span><span class="p">,</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">(),</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">xfers</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">xfcharge</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">error</span>
<span class="n">xfers</span><span class="o">.</span><span class="n">api_key</span> <span class="o">=</span> <span class="s">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span>
<span class="n">xfers</span><span class="o">.</span><span class="n">set_sg_sandbox</span><span class="p">()</span>
<span class="k">try</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">'Retrieving charge {}...'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s">'&lt;id&gt;'</span><span class="p">)</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">xfcharge</span><span class="o">.</span><span class="n">retrieve</span><span class="p">(</span><span class="s">'&lt;id&gt;'</span><span class="p">)</span>
    <span class="k">print</span> <span class="n">resp</span>
<span class="k">except</span> <span class="n">error</span><span class="o">.</span><span class="n">XfersError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">print</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'xfers'</span>

<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_api_key</span> <span class="s1">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span>
<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_sg_sandbox</span>

<span class="k">begin</span>
  <span class="n">charge_id</span> <span class="o">=</span> <span class="s1">'&lt;id&gt;'</span>
  <span class="nb">puts</span> <span class="s2">"Retrieving charge... </span><span class="si">#{</span><span class="n">charge_id</span><span class="si">}</span><span class="s2">"</span>
  <span class="n">resp</span> <span class="o">=</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">Charge</span><span class="p">.</span><span class="nf">retrieve</span> <span class="n">charge_id</span>
  <span class="nb">puts</span> <span class="n">resp</span>
<span class="k">rescue</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">XfersError</span> <span class="o">=&gt;</span> <span class="n">e</span>
  <span class="nb">puts</span> <span class="n">e</span><span class="p">.</span><span class="nf">to_s</span>
<span class="k">end</span>
</code></pre>
<pre class="highlight java"><code><span class="n">Xfers</span><span class="o">.</span><span class="na">apiKey</span> <span class="o">=</span> <span class="s">"pXcfdAKNorDe_o1eou1NSp4mwssiEzem_6sg8fwnZWs"</span><span class="o">;</span>
<span class="n">Xfers</span><span class="o">.</span><span class="na">setSGSandbox</span><span class="o">();</span>
 <span class="k">try</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Retrieving a charge"</span><span class="o">);</span>
    <span class="n">Charge</span> <span class="n">charge</span> <span class="o">=</span> <span class="n">Charge</span><span class="o">.</span><span class="na">retrieve</span><span class="o">(</span><span class="s">"&lt;id&gt;"</span><span class="o">);</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">charge</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span>
</code></pre>

<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"730eba1ec6d34f64dc68a0081c5006dc"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"checkout_url"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"https://sandbox.xfers.io/checkout_transaction/b840cc9fc5a359c22ed2ccef3427aacd"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"notify_url"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"https://mysite.com/payment_notification"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"return_url"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"https://mysite.com/return"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"cancel_url"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"https://mysite.com/cancel"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"object"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"charge"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">9.99</span><span class="p">,</span><span class="w">
  </span><span class="s2">"bank_unique_amt"</span><span class="p">:</span><span class="w"> </span><span class="mf">9.99</span><span class="p">,</span><span class="w">
  </span><span class="s2">"currency"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"SGD"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"customer"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="s2">"order_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"A012312"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"capture"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="s2">"shipment_date"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-07-02T06:26:51Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"settlement_date"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-07-05T06:26:51Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"description"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Carousell user - Konsolidate"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"items"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Red Dress Size M"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Red dress"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.00"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">9.99</span><span class="p">,</span><span class="w">
      </span><span class="s2">"item_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"statement_descriptor"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="s2">"receipt_email"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="s2">"shipping"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">2.50</span><span class="p">,</span><span class="w">
  </span><span class="s2">"tax"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.00</span><span class="p">,</span><span class="w">
  </span><span class="s2">"total_amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">12.49</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"completed"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"meta_data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"firstname"</span><span class="p">:</span><span class="s2">"Tianwei"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"lastname"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Liu"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Retrieves the details of a charge that has previously been created. Supply the unique charge ID that was returned from your previous request or provide the ORDER_ID that you previous provided in your create charge call, and Xfers will return the corresponding charge information. The same information is returned when creating or refunding the charge.</p>

<h4 id="https-request">HTTPS Request</h4>

<p><code class="prettyprint">GET https://sandbox.xfers.io/api/v3/charges/&lt;CHARGE_ID or ORDER_ID&gt;</code></p>

<h3 id="list-all-charges">List all Charges</h3>
<pre class="highlight shell"><code>curl <span class="s2">"https://sandbox.xfers.io/api/v3/charges?limit=1"</span> <span class="se">\</span>
  -H <span class="s2">"X-XFERS-USER-API-KEY: FVNbKjcGZ5Xx-Uf2XnxsrGtoxmLm9YEgokzDRoyshFc"</span>
</code></pre>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="k">require_once</span><span class="p">(</span><span class="s1">'vendor/autoload.php'</span><span class="p">);</span>

<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setApiKey</span><span class="p">(</span><span class="s1">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span><span class="p">);</span>
<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setSGSandbox</span><span class="p">();</span>
<span class="nv">$resp</span> <span class="o">=</span> <span class="nx">\Xfers\Charge</span><span class="o">::</span><span class="na">listAll</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s1">'customer'</span> <span class="o">=&gt;</span> <span class="s1">'97288608'</span><span class="p">,</span>
    <span class="s1">'limit'</span> <span class="o">=&gt;</span> <span class="s1">'1'</span>
<span class="p">));</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">xfers</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">xfcharge</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">error</span>
<span class="n">xfers</span><span class="o">.</span><span class="n">api_key</span> <span class="o">=</span> <span class="s">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span>
<span class="n">xfers</span><span class="o">.</span><span class="n">set_sg_sandbox</span><span class="p">()</span>
<span class="k">try</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">'Listing all charges...'</span>
    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'limit'</span><span class="p">:</span> <span class="s">'1'</span>
    <span class="p">}</span>
    <span class="n">charges</span> <span class="o">=</span> <span class="n">xfcharge</span><span class="o">.</span><span class="n">list_all</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">charge</span> <span class="ow">in</span> <span class="n">charges</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">'Charge: {}'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">charge</span><span class="p">)</span>
<span class="k">except</span> <span class="n">error</span><span class="o">.</span><span class="n">XfersError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">print</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'xfers'</span>

<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_api_key</span> <span class="s1">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span>
<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_sg_sandbox</span>

<span class="k">begin</span>
  <span class="nb">puts</span> <span class="s1">'Listing all charges...'</span>
  <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
      <span class="s1">'limit'</span><span class="o">=&gt;</span> <span class="s1">'5'</span>
  <span class="p">}</span>
  <span class="n">charges</span> <span class="o">=</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">Charge</span><span class="p">.</span><span class="nf">list_all</span> <span class="n">params</span>
  <span class="n">charges</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">charge</span><span class="o">|</span>
    <span class="nb">puts</span> <span class="n">charge</span>
  <span class="p">}</span>
<span class="k">rescue</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">XfersError</span> <span class="o">=&gt;</span> <span class="n">e</span>
  <span class="nb">puts</span> <span class="n">e</span><span class="p">.</span><span class="nf">to_s</span>
<span class="k">end</span>
</code></pre>
<pre class="highlight java"><code><span class="n">Xfers</span><span class="o">.</span><span class="na">apiKey</span> <span class="o">=</span> <span class="s">"pXcfdAKNorDe_o1eou1NSp4mwssiEzem_6sg8fwnZWs"</span><span class="o">;</span>
<span class="n">Xfers</span><span class="o">.</span><span class="na">setSGSandbox</span><span class="o">();</span>
<span class="k">try</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Listing charges without filter"</span><span class="o">);</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">Charge</span><span class="o">&gt;</span> <span class="n">charges</span> <span class="o">=</span> <span class="n">Charge</span><span class="o">.</span><span class="na">listAll</span><span class="o">();</span>
    <span class="k">for</span> <span class="o">(</span><span class="n">Charge</span> <span class="n">charge</span> <span class="o">:</span> <span class="n">charges</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">charge</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">Item</span><span class="o">&gt;</span> <span class="n">items</span> <span class="o">=</span> <span class="n">charge</span><span class="o">.</span><span class="na">getItems</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="n">Item</span> <span class="n">item</span> <span class="o">:</span> <span class="n">items</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">item</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Listing charges with filter"</span><span class="o">);</span>
    <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">params</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;();</span>
    <span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"limit"</span><span class="o">,</span> <span class="s">"1"</span><span class="o">);</span>

    <span class="n">charges</span> <span class="o">=</span> <span class="n">Charge</span><span class="o">.</span><span class="na">listAll</span><span class="o">(</span><span class="n">params</span><span class="o">);</span>
    <span class="k">for</span> <span class="o">(</span><span class="n">Charge</span> <span class="n">charge</span> <span class="o">:</span> <span class="n">charges</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">charge</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
    <span class="o">}</span>

<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span>
</code></pre>

<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"730eba1ec6d34f64dc68a0081c5006dc"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"checkout_url"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"https://sandbox.xfers.io/checkout_transaction/b840cc9fc5a359c22ed2ccef3427aacd"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"notify_url"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"https://mysite.com/payment_notification"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"return_url"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"https://mysite.com/return"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"cancel_url"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"https://mysite.com/cancel"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"object"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"charge"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">9.99</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"SGD"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"customer"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"order_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"A012312"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"cash_on_delivery"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"capture"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"shipment_date"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-07-02T06:26:51Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"settlement_date"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-07-05T06:26:51Z"</span><span class="p">,</span><span class="w">    
    </span><span class="s2">"description"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Carousell user - Konsolidate"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"items"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Red Dress Size M"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Red dress"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.00"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">9.99</span><span class="p">,</span><span class="w">
        </span><span class="s2">"item_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"statement_descriptor"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"receipt_email"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"shipping"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">2.50</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tax"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.00</span><span class="p">,</span><span class="w">
    </span><span class="s2">"total_amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">12.49</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"completed"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"meta_data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"firstname"</span><span class="p">:</span><span class="s2">"Tianwei"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"lastname"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Liu"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<p>Returns a list of charges you&rsquo;ve previously created. The charges are returned in sorted order, with the most recent charges appearing first.</p>

<h4 id="https-request">HTTPS Request</h4>

<p><code class="prettyprint">GET https://sandbox.xfers.io/api/v3/charges</code></p>

<h4 id="url-parameters">URL Parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>customer</td>
<td>string</td>
<td>optional</td>
<td>Only return charges for the customer specified by this customer ID.</td>
<td>97288608</td>
</tr>
<tr>
<td>status (Coming soon)</td>
<td>string</td>
<td>optional</td>
<td>status of the charge to return</td>
<td>pending</td>
</tr>
<tr>
<td>ending_before</td>
<td>string</td>
<td>optional</td>
<td>A cursor for use in pagination. ending_before is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, starting with obj_bar, your subsequent call can include ending_before=obj_bar in order to fetch the previous page of the list.</td>
<td>7364dc68a000eba1ec6d34f81c5006dc</td>
</tr>
<tr>
<td>limit</td>
<td>integer</td>
<td>optional</td>
<td>A limit on the number of objects to be returned. Limit can range between 1 and 50 items.</td>
<td>Default to 10</td>
</tr>
<tr>
<td>starting_after</td>
<td>string</td>
<td>optional</td>
<td>A cursor for use in pagination. starting_after is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, ending with obj_foo, your subsequent call can include starting_after=obj_foo in order to fetch the next page of the list.</td>
<td>7ba1ec6d34f64dc68a030e081c5006dc</td>
</tr>
</tbody></table>

<h2 id="cards-(singapore)">Cards (Singapore)</h2>

<p>The following APIs allow you to add or update credit cards to a connected user (which means you have to go through our <a href="/#xfers-connect">Xfers Connect flow</a> to get their <code class="prettyprint">user_api_token</code>). You are also able to charge a credit card without creating an Xfers account for your user (see <a href="#charge-guest-card">Charge Guest Card</a>) or to charge the default card belonging to a user (see <a href="#charge-existing-card">Charge Existing Card</a>).</p>

<h3 id="add-a-card">Add a Card</h3>
<pre class="highlight shell"><code>curl <span class="s2">"https://sandbox.xfers.io/api/v3/cards"</span> <span class="se">\</span>
  -H <span class="s2">"X-XFERS-USER-API-KEY: FVNbKjcGZ5Xx-Uf2XnxsrGtoxmLm9YEgokzDRoyshFc"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -d <span class="s1">'{ "user_api_token": "osEdbc8uzxY5vaXA-oe-7E86sVWCYTCVPuHQyFQ-uPQ", "credit_card_token": "tok_197O8gB8MXWbQJDjPMILsIr6", "first6": "424242", "last4": "4242"}'</span>
</code></pre>
<pre class="highlight php"><code>
<span class="cp">&lt;?php</span>
<span class="k">require_once</span><span class="p">(</span><span class="s1">'vendor/autoload.php'</span><span class="p">);</span>
<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setApiKey</span><span class="p">(</span><span class="s1">'WuTp3zM7UEpmUkeAyGPxRHmnXAx-hXJ7jzdqmxY6S1o'</span><span class="p">);</span>
<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setSGSandbox</span><span class="p">();</span>
<span class="c1">// Get the following user_api_token from http://docs.xfers.io/#xfers-connect
// you should have one user_api_token for every user you wish to add a credit card to.
</span><span class="nv">$user_api_token</span> <span class="o">=</span> <span class="s1">'osEdbc8uzxY5vaXA-oe-7E86sVWCYTCVPuHQyFQ-uPQ'</span><span class="p">;</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"Adding card</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="nv">$params</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'user_api_token'</span> <span class="o">=&gt;</span> <span class="nv">$user_api_token</span><span class="p">,</span>
        <span class="s1">'credit_card_token'</span> <span class="o">=&gt;</span> <span class="s1">'tok_19BhBuB8MXWbQJDjkspwaL4n'</span><span class="p">,</span> <span class="c1">// gotten from http://docs.xfers.io/#xfers-tokenize
</span>        <span class="s1">'first6'</span> <span class="o">=&gt;</span> <span class="s1">'424242'</span><span class="p">,</span>
        <span class="s1">'last4'</span> <span class="o">=&gt;</span> <span class="s1">'4242'</span>
    <span class="p">);</span>
    <span class="nv">$resp</span> <span class="o">=</span> <span class="nx">\Xfers\Card</span><span class="o">::</span><span class="na">add</span><span class="p">(</span><span class="nv">$params</span><span class="p">);</span>
    <span class="nb">print_r</span><span class="p">(</span><span class="nv">$resp</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Xfers\Error\InvalidRequest</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">'Caught InvalidRequest exception: '</span><span class="p">,</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">(),</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<pre class="highlight python"><code>
<span class="kn">import</span> <span class="nn">xfers</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">xfcard</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">error</span>

<span class="n">xfers</span><span class="o">.</span><span class="n">api_key</span> <span class="o">=</span> <span class="s">'WuTp3zM7UEpmUkeAyGPxRHmnXAx-hXJ7jzdqmxY6S1o'</span>
<span class="n">xfers</span><span class="o">.</span><span class="n">set_sg_sandbox</span><span class="p">()</span>
<span class="c"># Get the following user_api_token from http://docs.xfers.io/#xfers-connect</span>
<span class="c"># you should have one user_api_token for every user you wish to add a credit card to.</span>
<span class="n">user_api_token</span> <span class="o">=</span> <span class="s">'osEdbc8uzxY5vaXA-oe-7E86sVWCYTCVPuHQyFQ-uPQ'</span>

<span class="k">try</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">'Adding card...'</span>
    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'user_api_token'</span><span class="p">:</span> <span class="n">user_api_token</span><span class="p">,</span>
        <span class="s">'credit_card_token'</span><span class="p">:</span> <span class="s">'tok_19C22fB8MXWbQJDjSx4Ek9Wk'</span><span class="p">,</span>  <span class="c"># gotten from http://docs.xfers.io/#xfers-tokenize</span>
        <span class="s">'first6'</span><span class="p">:</span> <span class="s">'424242'</span><span class="p">,</span>
        <span class="s">'last4'</span><span class="p">:</span> <span class="s">'4242'</span>
    <span class="p">}</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">xfcard</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
    <span class="k">print</span> <span class="n">resp</span>
<span class="k">except</span> <span class="n">error</span><span class="o">.</span><span class="n">XfersError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">print</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
<pre class="highlight ruby"><code>
<span class="nb">require</span> <span class="s1">'xfers'</span>

<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_api_key</span> <span class="s1">'WuTp3zM7UEpmUkeAyGPxRHmnXAx-hXJ7jzdqmxY6S1o'</span>
<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_sg_sandbox</span>

<span class="c1"># Get the following user_api_token from http://docs.xfers.io/#xfers-connect</span>
<span class="c1"># you should have one user_api_token for every user you wish to add a credit card to.</span>
<span class="n">user_api_token</span> <span class="o">=</span> <span class="s1">'osEdbc8uzxY5vaXA-oe-7E86sVWCYTCVPuHQyFQ-uPQ'</span>

<span class="k">begin</span>
  <span class="nb">puts</span> <span class="s1">'Adding card...'</span>
  <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
      <span class="s1">'user_api_token'</span> <span class="o">=&gt;</span> <span class="n">user_api_token</span><span class="p">,</span>
      <span class="s1">'credit_card_token'</span> <span class="o">=&gt;</span> <span class="s1">'tok_19GiimB8MXWbQJDjF8FUIgpA'</span><span class="p">,</span> <span class="c1"># gotten from http://docs.xfers.io/#xfers-tokenize</span>
      <span class="s1">'first6'</span> <span class="o">=&gt;</span> <span class="s1">'424242'</span><span class="p">,</span>
      <span class="s1">'last4'</span> <span class="o">=&gt;</span> <span class="s1">'4242'</span>
  <span class="p">}</span>
  <span class="n">resp</span> <span class="o">=</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">Card</span><span class="p">.</span><span class="nf">add</span> <span class="n">params</span>
  <span class="nb">puts</span> <span class="n">resp</span>
<span class="k">rescue</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">XfersError</span> <span class="o">=&gt;</span> <span class="n">e</span>
  <span class="nb">puts</span> <span class="n">e</span><span class="p">.</span><span class="nf">to_s</span>
<span class="k">end</span>
</code></pre>
<pre class="highlight java"><code>
<span class="n">Xfers</span><span class="o">.</span><span class="na">apiKey</span> <span class="o">=</span> <span class="s">"pXcfdAKNorDe_o1eou1NSp4mwssiEzem_6sg8fwnZWs"</span><span class="o">;</span>
<span class="n">Xfers</span><span class="o">.</span><span class="na">setSGSandbox</span><span class="o">();</span>
<span class="n">String</span> <span class="n">user_api_token</span> <span class="o">=</span> <span class="s">"osEdbc8uzxY5vaXA-oe-7E86sVWCYTCVPuHQyFQ-uPQ"</span><span class="o">;</span>

<span class="k">try</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Adding card"</span><span class="o">);</span>
    <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">params</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;();</span>
    <span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"user_api_token"</span><span class="o">,</span> <span class="n">user_api_token</span><span class="o">);</span>
    <span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"credit_card_token"</span><span class="o">,</span> <span class="s">"tok_19DrscB8MXWbQJDjXlIKkc06"</span><span class="o">);</span>
    <span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"first6"</span><span class="o">,</span> <span class="s">"424242"</span><span class="o">);</span>
    <span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"last4"</span><span class="o">,</span> <span class="s">"4242"</span><span class="o">);</span>

    <span class="n">Card</span> <span class="n">card</span> <span class="o">=</span> <span class="n">Card</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">params</span><span class="o">);</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Added card: "</span><span class="o">);</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">card</span><span class="o">.</span><span class="na">getCardId</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">card</span><span class="o">.</span><span class="na">getExpMonth</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">card</span><span class="o">.</span><span class="na">getExpYear</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">card</span><span class="o">.</span><span class="na">getCardCountry</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">card</span><span class="o">.</span><span class="na">getCardType</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">card</span><span class="o">.</span><span class="na">getLast4</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">card</span><span class="o">.</span><span class="na">getIsDefault</span><span class="o">());</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span>

</code></pre>

<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"card_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"card_197O8yI7jGeCrIKDeI6SexB6"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"last_4"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4242"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"card_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Visa"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"card_country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"US"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"exp_yr"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"exp_month"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"is_default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>The following request will allow you to add a credit card to your connected user.     </p>

<p><code class="prettyprint">POST https://sandbox.xfers.io/api/v3/cards</code></p>

<h4 id="url-parameters">URL Parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>user_api_token</td>
<td>string</td>
<td>required</td>
<td>Buyer’s api token obtain via Connect’s get user token API.</td>
<td>osEdbc8uzxY5vaXA-oe-7E86sVWCYTCVPuHQyFQ-uPQ</td>
</tr>
<tr>
<td>credit_card_token</td>
<td>string</td>
<td>required</td>
<td>Tokenized credit card from Xfers Tokenize</td>
<td>tok_197O8gB8MXWbQJDjPMILsIr6</td>
</tr>
<tr>
<td>first6</td>
<td>string</td>
<td>required</td>
<td>First 6 digits of credit card. Returned via Xfers Tokenize</td>
<td>424242</td>
</tr>
<tr>
<td>last4</td>
<td>string</td>
<td>required</td>
<td>Last 4 digits of credit card. Returned via Xfers Tokenize</td>
<td>4242</td>
</tr>
</tbody></table>

<h4 id="response">Response</h4>

<p>An Xfers Card object.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>card_id</td>
<td>string</td>
<td>The id of the card added</td>
</tr>
<tr>
<td>last_4</td>
<td>string</td>
<td>Last 4 digits of credit card</td>
</tr>
<tr>
<td>card_type</td>
<td>string</td>
<td>Card brand. Can be Visa, American Express, MasterCard, Discover, JCB, Diners Club, or Unknown</td>
</tr>
<tr>
<td>card_country</td>
<td>string</td>
<td>Two-letter ISO code representing the country of the card. You could use this attribute to get a sense of the international breakdown of cards you’ve collected</td>
</tr>
<tr>
<td>exp_yr</td>
<td>string</td>
<td>Credit card year</td>
</tr>
<tr>
<td>exp_month</td>
<td>string</td>
<td>Credit card expiry month</td>
</tr>
<tr>
<td>is_default</td>
<td>boolean</td>
<td>Is this the default card to be charged</td>
</tr>
</tbody></table>

<h3 id="list-cards">List Cards</h3>
<pre class="highlight shell"><code>curl <span class="s2">"https://sandbox.xfers.io/api/v3/cards?user_api_token=osEdbc8uzxY5vaXA-oe-7E86sVWCYTCVPuHQyFQ-uPQ"</span> <span class="se">\</span>
-H <span class="s2">"X-XFERS-USER-API-KEY: WuTp3zM7UEpmUkeAyGPxRHmnXAx-hXJ7jzdqmxY6S1o"</span>
</code></pre>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="k">require_once</span><span class="p">(</span><span class="s1">'vendor/autoload.php'</span><span class="p">);</span>
<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setApiKey</span><span class="p">(</span><span class="s1">'WuTp3zM7UEpmUkeAyGPxRHmnXAx-hXJ7jzdqmxY6S1o'</span><span class="p">);</span>
<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setSGSandbox</span><span class="p">();</span>
<span class="c1">// Get the following user_api_token from http://docs.xfers.io/#xfers-connect
// you should have one user_api_token for every user you wish to add a credit card to.
</span><span class="nv">$user_api_token</span> <span class="o">=</span> <span class="s1">'osEdbc8uzxY5vaXA-oe-7E86sVWCYTCVPuHQyFQ-uPQ'</span><span class="p">;</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"Listing all cards</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="nv">$resp</span> <span class="o">=</span> <span class="nx">\Xfers\Card</span><span class="o">::</span><span class="na">listAll</span><span class="p">(</span><span class="nv">$user_api_token</span><span class="p">);</span>
    <span class="nb">print_r</span><span class="p">(</span><span class="nv">$resp</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Xfers\Error\InvalidRequest</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">'Caught InvalidRequest exception: '</span><span class="p">,</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">(),</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">xfers</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">xfcard</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">error</span>

<span class="n">xfers</span><span class="o">.</span><span class="n">api_key</span> <span class="o">=</span> <span class="s">'WuTp3zM7UEpmUkeAyGPxRHmnXAx-hXJ7jzdqmxY6S1o'</span>
<span class="n">xfers</span><span class="o">.</span><span class="n">set_sg_sandbox</span><span class="p">()</span>

<span class="c"># Get the following user_api_token from http://docs.xfers.io/#xfers-connect</span>
<span class="c"># you should have one user_api_token for every user you wish to add a credit card to.</span>
<span class="n">user_api_token</span> <span class="o">=</span> <span class="s">'osEdbc8uzxY5vaXA-oe-7E86sVWCYTCVPuHQyFQ-uPQ'</span>

<span class="k">try</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">'Listing all cards...'</span>
    <span class="n">cards</span> <span class="o">=</span> <span class="n">xfcard</span><span class="o">.</span><span class="n">list_all</span><span class="p">(</span><span class="n">user_api_token</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="n">cards</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">'Card: {}'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">card</span><span class="p">)</span>
<span class="k">except</span> <span class="n">error</span><span class="o">.</span><span class="n">XfersError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">print</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

</code></pre>
<pre class="highlight ruby"><code>
<span class="nb">require</span> <span class="s1">'xfers'</span>

<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_api_key</span> <span class="s1">'WuTp3zM7UEpmUkeAyGPxRHmnXAx-hXJ7jzdqmxY6S1o'</span>
<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_sg_sandbox</span>

<span class="c1"># Get the following user_api_token from http://docs.xfers.io/#xfers-connect</span>
<span class="c1"># you should have one user_api_token for every user you wish to add a credit card to.</span>
<span class="n">user_api_token</span> <span class="o">=</span> <span class="s1">'osEdbc8uzxY5vaXA-oe-7E86sVWCYTCVPuHQyFQ-uPQ'</span>

<span class="k">begin</span>
  <span class="nb">puts</span> <span class="s1">'Listing all cards...'</span>
  <span class="n">cards</span> <span class="o">=</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">Card</span><span class="p">.</span><span class="nf">list_all</span> <span class="n">user_api_token</span>
  <span class="n">cards</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">card</span><span class="o">|</span>
    <span class="nb">puts</span> <span class="n">card</span>
  <span class="p">}</span>
<span class="k">rescue</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">XfersError</span> <span class="o">=&gt;</span> <span class="n">e</span>
  <span class="nb">puts</span> <span class="n">e</span><span class="p">.</span><span class="nf">to_s</span>
<span class="k">end</span>
</code></pre>
<pre class="highlight java"><code>
<span class="n">Xfers</span><span class="o">.</span><span class="na">apiKey</span> <span class="o">=</span> <span class="s">"pXcfdAKNorDe_o1eou1NSp4mwssiEzem_6sg8fwnZWs"</span><span class="o">;</span>
<span class="n">Xfers</span><span class="o">.</span><span class="na">setSGSandbox</span><span class="o">();</span>
<span class="n">String</span> <span class="n">user_api_token</span> <span class="o">=</span> <span class="s">"osEdbc8uzxY5vaXA-oe-7E86sVWCYTCVPuHQyFQ-uPQ"</span><span class="o">;</span>

<span class="k">try</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Listing cards"</span><span class="o">);</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">Card</span><span class="o">&gt;</span> <span class="n">cards</span> <span class="o">=</span> <span class="n">Card</span><span class="o">.</span><span class="na">listAll</span><span class="o">(</span><span class="n">user_api_token</span><span class="o">);</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"There are "</span> <span class="o">+</span> <span class="n">cards</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">+</span> <span class="s">" cards"</span><span class="o">);</span>
    <span class="k">for</span> <span class="o">(</span><span class="n">Card</span> <span class="n">card</span> <span class="o">:</span> <span class="n">cards</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">card</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span>

</code></pre>

<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">[</span><span class="w">
   </span><span class="p">{</span><span class="w">
      </span><span class="s2">"card_id"</span><span class="p">:</span><span class="s2">"card_196hygI7jGeCrIKDAwXhGcHm"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"last_4"</span><span class="p">:</span><span class="s2">"4242"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"card_type"</span><span class="p">:</span><span class="s2">"Visa"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"card_country"</span><span class="p">:</span><span class="s2">"US"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"exp_yr"</span><span class="p">:</span><span class="s2">"2022"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"exp_month"</span><span class="p">:</span><span class="s2">"3"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"is_default"</span><span class="p">:</span><span class="kc">true</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="p">{</span><span class="w">
      </span><span class="s2">"card_id"</span><span class="p">:</span><span class="s2">"card_196kFHI7jGeCrIKD7HxYauMv"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"last_4"</span><span class="p">:</span><span class="s2">"4444"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"card_type"</span><span class="p">:</span><span class="s2">"MasterCard"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"card_country"</span><span class="p">:</span><span class="s2">"US"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"exp_yr"</span><span class="p">:</span><span class="s2">"2022"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"exp_month"</span><span class="p">:</span><span class="s2">"5"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"is_default"</span><span class="p">:</span><span class="kc">false</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<p>The following request will allow you to list all credit cards added to a user</p>

<p><code class="prettyprint">GET https://sandbox.xfers.io/api/v3/cards</code></p>

<h4 id="url-parameters">URL Parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>user_api_token</td>
<td>string</td>
<td>required</td>
<td>Buyer’s api token obtain via Connect’s get user token API.</td>
<td>osEdbc8uzxY5vaXA-oe-7E86sVWCYTCVPuHQyFQ-uPQ</td>
</tr>
</tbody></table>

<h3 id="set-default-card">Set Default Card</h3>
<pre class="highlight shell"><code>curl <span class="s2">"https://sandbox.xfers.io/api/v3/cards/&lt;the_card_id&gt;/set_default"</span> <span class="se">\</span>
  -H <span class="s2">"X-XFERS-USER-API-KEY: FVNbKjcGZ5Xx-Uf2XnxsrGtoxmLm9YEgokzDRoyshFc"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -d <span class="s1">'{ "user_api_token": "osEdbc8uzxY5vaXA-oe-7E86sVWCYTCVPuHQyFQ-uPQ"}'</span>
</code></pre>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="k">require_once</span><span class="p">(</span><span class="s1">'vendor/autoload.php'</span><span class="p">);</span>
<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setApiKey</span><span class="p">(</span><span class="s1">'WuTp3zM7UEpmUkeAyGPxRHmnXAx-hXJ7jzdqmxY6S1o'</span><span class="p">);</span>
<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setSGSandbox</span><span class="p">();</span>
<span class="c1">// Get the following user_api_token from http://docs.xfers.io/#xfers-connect
// you should have one user_api_token for every user you wish to add a credit card to.
</span><span class="nv">$user_api_token</span> <span class="o">=</span> <span class="s1">'osEdbc8uzxY5vaXA-oe-7E86sVWCYTCVPuHQyFQ-uPQ'</span><span class="p">;</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"Setting default card</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="nv">$card_id</span> <span class="o">=</span> <span class="s1">'card_196iRQI7jGeCrIKDl5hrCmxE'</span><span class="p">;</span>
    <span class="nv">$resp</span> <span class="o">=</span> <span class="nx">\Xfers\Card</span><span class="o">::</span><span class="na">setDefault</span><span class="p">(</span><span class="nv">$card_id</span><span class="p">,</span> <span class="nv">$user_api_token</span><span class="p">);</span>
    <span class="nb">print_r</span><span class="p">(</span><span class="nv">$resp</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Xfers\Error\InvalidRequest</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">'Caught InvalidRequest exception: '</span><span class="p">,</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">(),</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<pre class="highlight python"><code>
<span class="kn">import</span> <span class="nn">xfers</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">xfcard</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">error</span>

<span class="n">xfers</span><span class="o">.</span><span class="n">api_key</span> <span class="o">=</span> <span class="s">'WuTp3zM7UEpmUkeAyGPxRHmnXAx-hXJ7jzdqmxY6S1o'</span>
<span class="n">xfers</span><span class="o">.</span><span class="n">set_sg_sandbox</span><span class="p">()</span>

<span class="c"># Get the following user_api_token from http://docs.xfers.io/#xfers-connect</span>
<span class="c"># you should have one user_api_token for every user you wish to add a credit card to.</span>
<span class="n">user_api_token</span> <span class="o">=</span> <span class="s">'osEdbc8uzxY5vaXA-oe-7E86sVWCYTCVPuHQyFQ-uPQ'</span>

<span class="k">try</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">'Setting default card'</span>
    <span class="n">card_id</span> <span class="o">=</span> <span class="s">'card_196kDPI7jGeCrIKDlgVDBvER'</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">xfcard</span><span class="o">.</span><span class="n">set_default</span><span class="p">(</span><span class="n">card_id</span><span class="p">,</span> <span class="n">user_api_token</span><span class="p">)</span>
    <span class="k">print</span> <span class="n">resp</span>
<span class="k">except</span> <span class="n">error</span><span class="o">.</span><span class="n">XfersError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">print</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
<pre class="highlight ruby"><code>
<span class="nb">require</span> <span class="s1">'xfers'</span>

<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_api_key</span> <span class="s1">'WuTp3zM7UEpmUkeAyGPxRHmnXAx-hXJ7jzdqmxY6S1o'</span>
<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_sg_sandbox</span>

<span class="c1"># Get the following user_api_token from http://docs.xfers.io/#xfers-connect</span>
<span class="c1"># you should have one user_api_token for every user you wish to add a credit card to.</span>
<span class="n">user_api_token</span> <span class="o">=</span> <span class="s1">'osEdbc8uzxY5vaXA-oe-7E86sVWCYTCVPuHQyFQ-uPQ'</span>

<span class="k">begin</span>
  <span class="nb">puts</span> <span class="s1">'Setting default card'</span>
  <span class="n">card_id</span> <span class="o">=</span> <span class="s1">'card_196iRQI7jGeCrIKDl5hrCmxE'</span>
  <span class="n">resp</span> <span class="o">=</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">Card</span><span class="p">.</span><span class="nf">set_default</span> <span class="n">card_id</span><span class="p">,</span> <span class="n">user_api_token</span>
  <span class="nb">puts</span> <span class="n">resp</span>
<span class="k">rescue</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">XfersError</span> <span class="o">=&gt;</span> <span class="n">e</span>
  <span class="nb">puts</span> <span class="n">e</span><span class="p">.</span><span class="nf">to_s</span>
<span class="k">end</span>
</code></pre>
<pre class="highlight java"><code><span class="n">Xfers</span><span class="o">.</span><span class="na">apiKey</span> <span class="o">=</span> <span class="s">"pXcfdAKNorDe_o1eou1NSp4mwssiEzem_6sg8fwnZWs"</span><span class="o">;</span>
<span class="n">Xfers</span><span class="o">.</span><span class="na">setSGSandbox</span><span class="o">();</span>
<span class="n">String</span> <span class="n">user_api_token</span> <span class="o">=</span> <span class="s">"osEdbc8uzxY5vaXA-oe-7E86sVWCYTCVPuHQyFQ-uPQ"</span><span class="o">;</span>

<span class="k">try</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Setting default card"</span><span class="o">);</span>
    <span class="n">String</span> <span class="n">cardId</span> <span class="o">=</span> <span class="s">"card_19C2JSI7jGeCrIKD0nVdiCHp"</span><span class="o">;</span>
    <span class="n">Card</span> <span class="n">card</span> <span class="o">=</span> <span class="n">Card</span><span class="o">.</span><span class="na">setDefault</span><span class="o">(</span><span class="n">cardId</span><span class="o">,</span> <span class="n">user_api_token</span><span class="o">);</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Default card: "</span> <span class="o">+</span> <span class="n">card</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span>

</code></pre>

<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"card_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"card_197O8yI7jGeCrIKDeI6SexB6"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"last_4"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4242"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"card_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Visa"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"card_country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"US"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"exp_yr"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"exp_month"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"is_default"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>The following request will allow you to set a default credit card for your connected user.</p>

<p><code class="prettyprint">POST https://sandbox.xfers.io/api/v3/cards/&lt;the_card_id&gt;/set_default</code></p>

<h4 id="url-parameters">URL Parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>user_api_token</td>
<td>string</td>
<td>required</td>
<td>Buyer’s api token obtain via Connect’s get user token API.</td>
<td>osEdbc8uzxY5vaXA-oe-7E86sVWCYTCVPuHQyFQ-uPQ</td>
</tr>
</tbody></table>

<h3 id="delete-card">Delete Card</h3>
<pre class="highlight shell"><code>curl -X DELETE <span class="s2">"https://sandbox.xfers.io/api/v3/cards/&lt;the_card_id&gt;"</span> <span class="se">\</span>
  -H <span class="s2">"X-XFERS-USER-API-KEY: FVNbKjcGZ5Xx-Uf2XnxsrGtoxmLm9YEgokzDRoyshFc"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -d <span class="s1">'{ "user_api_token": "osEdbc8uzxY5vaXA-oe-7E86sVWCYTCVPuHQyFQ-uPQ"}'</span>
</code></pre>
<pre class="highlight php"><code>
<span class="cp">&lt;?php</span>
<span class="k">require_once</span><span class="p">(</span><span class="s1">'vendor/autoload.php'</span><span class="p">);</span>
<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setApiKey</span><span class="p">(</span><span class="s1">'WuTp3zM7UEpmUkeAyGPxRHmnXAx-hXJ7jzdqmxY6S1o'</span><span class="p">);</span>
<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setSGSandbox</span><span class="p">();</span>
<span class="c1">// Get the following user_api_token from http://docs.xfers.io/#xfers-connect
// you should have one user_api_token for every user you wish to add a credit card to.
</span><span class="nv">$user_api_token</span> <span class="o">=</span> <span class="s1">'osEdbc8uzxY5vaXA-oe-7E86sVWCYTCVPuHQyFQ-uPQ'</span><span class="p">;</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"Deleting card</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="nv">$card_id</span> <span class="o">=</span> <span class="s1">'card_196hygI7jGeCrIKDAwXhGcHm'</span><span class="p">;</span>
    <span class="nv">$resp</span> <span class="o">=</span> <span class="nx">\Xfers\Card</span><span class="o">::</span><span class="na">delete</span><span class="p">(</span><span class="nv">$card_id</span><span class="p">,</span> <span class="nv">$user_api_token</span><span class="p">);</span>
    <span class="nb">print_r</span><span class="p">(</span><span class="nv">$resp</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Xfers\Error\InvalidRequest</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">'Caught InvalidRequest exception: '</span><span class="p">,</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">(),</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">xfers</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">xfcard</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">error</span>

<span class="n">xfers</span><span class="o">.</span><span class="n">api_key</span> <span class="o">=</span> <span class="s">'WuTp3zM7UEpmUkeAyGPxRHmnXAx-hXJ7jzdqmxY6S1o'</span>
<span class="n">xfers</span><span class="o">.</span><span class="n">set_sg_sandbox</span><span class="p">()</span>

<span class="c"># Get the following user_api_token from http://docs.xfers.io/#xfers-connect</span>
<span class="c"># you should have one user_api_token for every user you wish to add a credit card to.</span>
<span class="n">user_api_token</span> <span class="o">=</span> <span class="s">'osEdbc8uzxY5vaXA-oe-7E86sVWCYTCVPuHQyFQ-uPQ'</span>

<span class="k">try</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">'Deleting card'</span>
    <span class="n">card_id</span> <span class="o">=</span> <span class="s">'card_19BhF9I7jGeCrIKD1ICQ6snN'</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">xfcard</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">card_id</span><span class="p">,</span> <span class="n">user_api_token</span><span class="p">)</span>
    <span class="k">print</span> <span class="n">resp</span>
<span class="k">except</span> <span class="n">error</span><span class="o">.</span><span class="n">XfersError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">print</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
<pre class="highlight ruby"><code>
<span class="nb">require</span> <span class="s1">'xfers'</span>

<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_api_key</span> <span class="s1">'WuTp3zM7UEpmUkeAyGPxRHmnXAx-hXJ7jzdqmxY6S1o'</span>
<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_sg_sandbox</span>

<span class="c1"># Get the following user_api_token from http://docs.xfers.io/#xfers-connect</span>
<span class="c1"># you should have one user_api_token for every user you wish to add a credit card to.</span>
<span class="n">user_api_token</span> <span class="o">=</span> <span class="s1">'osEdbc8uzxY5vaXA-oe-7E86sVWCYTCVPuHQyFQ-uPQ'</span>

<span class="k">begin</span>
  <span class="nb">puts</span> <span class="s1">'Deleting card'</span>
  <span class="n">card_id</span> <span class="o">=</span> <span class="s1">'card_19C2JSI7jGeCrIKD0nVdiCHp'</span>
  <span class="n">resp</span> <span class="o">=</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">Card</span><span class="p">.</span><span class="nf">delete</span> <span class="n">card_id</span><span class="p">,</span> <span class="n">user_api_token</span>
  <span class="nb">puts</span> <span class="n">resp</span>
<span class="k">rescue</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">XfersError</span> <span class="o">=&gt;</span> <span class="n">e</span>
  <span class="nb">puts</span> <span class="n">e</span><span class="p">.</span><span class="nf">to_s</span>
<span class="k">end</span>

</code></pre>
<pre class="highlight java"><code>
<span class="n">Xfers</span><span class="o">.</span><span class="na">apiKey</span> <span class="o">=</span> <span class="s">"pXcfdAKNorDe_o1eou1NSp4mwssiEzem_6sg8fwnZWs"</span><span class="o">;</span>
<span class="n">Xfers</span><span class="o">.</span><span class="na">setSGSandbox</span><span class="o">();</span>
<span class="n">String</span> <span class="n">user_api_token</span> <span class="o">=</span> <span class="s">"osEdbc8uzxY5vaXA-oe-7E86sVWCYTCVPuHQyFQ-uPQ"</span><span class="o">;</span>

<span class="k">try</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Deleting card"</span><span class="o">);</span>
    <span class="n">String</span> <span class="n">cardId</span> <span class="o">=</span> <span class="s">"card_196kDPI7jGeCrIKDlgVDBvER"</span><span class="o">;</span>
    <span class="n">Card</span> <span class="n">card</span> <span class="o">=</span> <span class="n">Card</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="n">cardId</span><span class="o">,</span> <span class="n">user_api_token</span><span class="o">);</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Deleted card: "</span> <span class="o">+</span> <span class="n">card</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">card</span><span class="o">.</span><span class="na">getCardId</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">card</span><span class="o">.</span><span class="na">getDeleted</span><span class="o">());</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span>

</code></pre>

<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"card_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"card_197O8yI7jGeCrIKDeI6SexB6"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>The following request will allow you to delete your user&rsquo;s credit card.</p>

<p><code class="prettyprint">DELETE https://sandbox.xfers.io/api/v3/cards/&lt;the_card_id&gt;</code></p>

<h4 id="url-parameters">URL Parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>user_api_token</td>
<td>string</td>
<td>required</td>
<td>Buyer’s api token obtain via Connect’s get user token API.</td>
<td>osEdbc8uzxY5vaXA-oe-7E86sVWCYTCVPuHQyFQ-uPQ</td>
</tr>
</tbody></table>

<h3 id="charge-guest-card">Charge Guest Card</h3>
<pre class="highlight shell"><code>curl <span class="s2">"https://sandbox.xfers.io/api/v3/credit_card_charges/charge_card_guest"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -d <span class="s1">'{ "txn_id": "&lt;charge_id&gt;", "credit_card_token":"tok_197O8gB8MXWbQJDjPMILsIr6", "first6": "424242", "last4": "4242"}'</span>
</code></pre>
<pre class="highlight php"><code>
<span class="cp">&lt;?php</span>
<span class="k">require_once</span><span class="p">(</span><span class="s1">'vendor/autoload.php'</span><span class="p">);</span>

<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setSGSandbox</span><span class="p">();</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"Charge guest card</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="nv">$chargeId</span> <span class="o">=</span> <span class="s1">'051ac2fe464d45b19ec736cf04d66653'</span><span class="p">;</span> <span class="c1">// you must create a charge first
</span>    <span class="nv">$params</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'txn_id'</span> <span class="o">=&gt;</span> <span class="nv">$chargeId</span><span class="p">,</span>
        <span class="s1">'credit_card_token'</span> <span class="o">=&gt;</span> <span class="s1">'tok_19BhUlB8MXWbQJDjOrDecHN6'</span><span class="p">,</span> <span class="c1">// gotten from http://docs.xfers.io/#xfers-tokenize
</span>        <span class="s1">'first6'</span> <span class="o">=&gt;</span> <span class="s1">'424242'</span><span class="p">,</span>
        <span class="s1">'last4'</span> <span class="o">=&gt;</span> <span class="s1">'4242'</span>
    <span class="p">);</span>
    <span class="nv">$resp</span> <span class="o">=</span> <span class="nx">\Xfers\Card</span><span class="o">::</span><span class="na">chargeGuest</span><span class="p">(</span><span class="nv">$params</span><span class="p">);</span>
    <span class="nb">print_r</span><span class="p">(</span><span class="nv">$resp</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Xfers\Error\InvalidRequest</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">'Caught InvalidRequest exception: '</span><span class="p">,</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">(),</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<pre class="highlight python"><code>
<span class="k">try</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">'Charge guest card'</span>
    <span class="n">charge_id</span> <span class="o">=</span> <span class="s">'f0fbdd1c16b44deba3f15cc11a29fefc'</span>  <span class="c"># you must create a charge first</span>
    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'txn_id'</span><span class="p">:</span> <span class="n">charge_id</span><span class="p">,</span>
        <span class="s">'credit_card_token'</span><span class="p">:</span> <span class="s">'tok_19C5hlB8MXWbQJDjT6HAsM3A'</span><span class="p">,</span>  <span class="c"># gotten from http://docs.xfers.io/#xfers-tokenize</span>
        <span class="s">'first6'</span><span class="p">:</span> <span class="s">'424242'</span><span class="p">,</span>
        <span class="s">'last4'</span><span class="p">:</span> <span class="s">'4242'</span>
    <span class="p">}</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">xfcard</span><span class="o">.</span><span class="n">charge_guest</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
    <span class="k">print</span> <span class="n">resp</span>
<span class="k">except</span> <span class="n">error</span><span class="o">.</span><span class="n">XfersError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">print</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

</code></pre>
<pre class="highlight ruby"><code>
<span class="k">begin</span>
  <span class="nb">puts</span> <span class="s1">'Charge guest card'</span>
  <span class="n">charge_id</span> <span class="o">=</span> <span class="s1">'54539f543f33456a98495bda4bc33abe'</span>
  <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
      <span class="s1">'txn_id'</span> <span class="o">=&gt;</span> <span class="n">charge_id</span><span class="p">,</span>
      <span class="s1">'credit_card_token'</span> <span class="o">=&gt;</span> <span class="s1">'tok_19GijKB8MXWbQJDjKCniMsgn'</span><span class="p">,</span> <span class="c1"># gotten from http://docs.xfers.io/#xfers-tokenize</span>
      <span class="s1">'first6'</span> <span class="o">=&gt;</span> <span class="s1">'424242'</span><span class="p">,</span>
      <span class="s1">'last4'</span> <span class="o">=&gt;</span> <span class="s1">'4242'</span>
  <span class="p">}</span>
  <span class="n">resp</span> <span class="o">=</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">Card</span><span class="p">.</span><span class="nf">charge_guest</span> <span class="n">params</span>
  <span class="nb">puts</span> <span class="n">resp</span>
<span class="k">rescue</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">XfersError</span> <span class="o">=&gt;</span> <span class="n">e</span>
  <span class="nb">puts</span> <span class="n">e</span><span class="p">.</span><span class="nf">to_s</span>
<span class="k">end</span>

</code></pre>
<pre class="highlight java"><code>
<span class="k">try</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Charge guest card"</span><span class="o">);</span>
    <span class="n">String</span> <span class="n">chargeId</span> <span class="o">=</span> <span class="s">"ae9647515a234b95919ce5dbd6e073e8"</span><span class="o">;</span>
    <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">params</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;();</span>
    <span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"txn_id"</span><span class="o">,</span> <span class="n">chargeId</span><span class="o">);</span>
    <span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"credit_card_token"</span><span class="o">,</span> <span class="s">"tok_19DrtcB8MXWbQJDjjTYpBAsJ"</span><span class="o">);</span>
    <span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"first6"</span><span class="o">,</span> <span class="s">"424242"</span><span class="o">);</span>
    <span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"last4"</span><span class="o">,</span> <span class="s">"4242"</span><span class="o">);</span>
    <span class="n">Response</span> <span class="n">res</span> <span class="o">=</span> <span class="n">Card</span><span class="o">.</span><span class="na">chargeGuest</span><span class="o">(</span><span class="n">params</span><span class="o">);</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Charge guest card success "</span> <span class="o">+</span> <span class="n">res</span><span class="o">.</span><span class="na">getSuccess</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Charge guest card return url "</span> <span class="o">+</span> <span class="n">res</span><span class="o">.</span><span class="na">getReturnUrl</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Charge guest card response "</span> <span class="o">+</span> <span class="n">res</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span>

</code></pre>

<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="s2">"return_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.yoursite.com"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>The following request will allow you to charge a newly obtained credit card token from <a href="/#xfers-tokenize">Xfers Tokenize</a>. This credit card charge is not linked to any user, so you 
will not be able to save the token for reuse. Note that each credit card token can only be used once - either charge it directly with this endpoint, or add the token to a user.</p>

<p>One use case is to be able to charge a credit card without the user having to go through OTP, since no Xfers account needs to be created (usually because it is a guest user on your platform and you want to speed up the checkout process).</p>

<p>No API key authentication is needed. Instead, we will only charge a card if a valid charge id is found together with a valid credit card token.</p>

<p><code class="prettyprint">POST https://sandbox.xfers.io/api/v3/credit_card_charges/charge_card_guest</code></p>

<h4 id="url-parameters">URL Parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>txn_id</td>
<td>string</td>
<td>required</td>
<td>The id of the created charge</td>
<td>b840cc9fc5a359c22ed2ccef3427aacd</td>
</tr>
<tr>
<td>credit_card_token</td>
<td>string</td>
<td>required</td>
<td>Tokenized credit card from Xfers Tokenize</td>
<td>tok_197O8gB8MXWbQJDjPMILsIr6</td>
</tr>
<tr>
<td>first6</td>
<td>string</td>
<td>required</td>
<td>First 6 digits of credit card</td>
<td>424242</td>
</tr>
<tr>
<td>last4</td>
<td>string</td>
<td>required</td>
<td>Last 4 digits of credit card</td>
<td>4242</td>
</tr>
</tbody></table>

<h3 id="charge-existing-card">Charge Existing Card</h3>
<pre class="highlight shell"><code>curl <span class="s2">"https://sandbox.xfers.io/api/v3/credit_card_charges/charge_card"</span> <span class="se">\</span>
  -H <span class="s2">"X-XFERS-USER-API-KEY: FVNbKjcGZ5Xx-Uf2XnxsrGtoxmLm9YEgokzDRoyshFc"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -d <span class="s1">'{ "txn_id": "&lt;charge_id&gt;"}'</span>
</code></pre>
<pre class="highlight php"><code>
<span class="cp">&lt;?php</span>
<span class="k">require_once</span><span class="p">(</span><span class="s1">'vendor/autoload.php'</span><span class="p">);</span>
<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setApiKey</span><span class="p">(</span><span class="s1">'WuTp3zM7UEpmUkeAyGPxRHmnXAx-hXJ7jzdqmxY6S1o'</span><span class="p">);</span>
<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setSGSandbox</span><span class="p">();</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"Charge existing card</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="c1">// You must add a credit card with Xfers\Card::add before this
</span>    <span class="nv">$chargeId</span> <span class="o">=</span> <span class="s1">'ae9647515a234b95919ce5dbd6e073e8'</span><span class="p">;</span> <span class="c1">// you must create a charge with user_api_token of your user passed in
</span>    <span class="nv">$resp</span> <span class="o">=</span> <span class="nx">\Xfers\Card</span><span class="o">::</span><span class="na">chargeExisting</span><span class="p">(</span><span class="nv">$chargeId</span><span class="p">);</span>
    <span class="nb">print_r</span><span class="p">(</span><span class="nv">$resp</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Xfers\Error\InvalidRequest</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">'Caught InvalidRequest exception: '</span><span class="p">,</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">(),</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span>

</code></pre>
<pre class="highlight python"><code>
<span class="kn">import</span> <span class="nn">xfers</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">xfcard</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">error</span>

<span class="n">xfers</span><span class="o">.</span><span class="n">api_key</span> <span class="o">=</span> <span class="s">'WuTp3zM7UEpmUkeAyGPxRHmnXAx-hXJ7jzdqmxY6S1o'</span>
<span class="n">xfers</span><span class="o">.</span><span class="n">set_sg_sandbox</span><span class="p">()</span>

<span class="k">try</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">'Charge existing card'</span>
    <span class="c"># You must add a credit card with xfcard.add before this</span>
    <span class="n">charge_id</span> <span class="o">=</span> <span class="s">'59290c99da0044b398445c24a63d5cf7'</span>  <span class="c"># you must create a charge first with user_api_token of your user</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">xfcard</span><span class="o">.</span><span class="n">charge_existing</span><span class="p">(</span><span class="n">charge_id</span><span class="p">)</span>
    <span class="k">print</span> <span class="n">resp</span>
<span class="k">except</span> <span class="n">error</span><span class="o">.</span><span class="n">XfersError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">print</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

</code></pre>
<pre class="highlight ruby"><code>
<span class="nb">require</span> <span class="s1">'xfers'</span>

<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_api_key</span> <span class="s1">'WuTp3zM7UEpmUkeAyGPxRHmnXAx-hXJ7jzdqmxY6S1o'</span>
<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_sg_sandbox</span>

<span class="k">begin</span>
  <span class="nb">puts</span> <span class="s1">'Charge existing card'</span>
  <span class="n">charge_id</span> <span class="o">=</span> <span class="s1">'9cfaac1c8d8a47d18540a87f4c1e711b'</span>
  <span class="n">resp</span> <span class="o">=</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">Card</span><span class="p">.</span><span class="nf">charge_existing</span> <span class="n">charge_id</span>
  <span class="nb">puts</span> <span class="n">resp</span>
<span class="k">rescue</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">XfersError</span> <span class="o">=&gt;</span> <span class="n">e</span>
  <span class="nb">puts</span> <span class="n">e</span><span class="p">.</span><span class="nf">to_s</span>
<span class="k">end</span>

</code></pre>
<pre class="highlight java"><code><span class="n">Xfers</span><span class="o">.</span><span class="na">apiKey</span> <span class="o">=</span> <span class="s">"pXcfdAKNorDe_o1eou1NSp4mwssiEzem_6sg8fwnZWs"</span><span class="o">;</span>
<span class="n">Xfers</span><span class="o">.</span><span class="na">setSGSandbox</span><span class="o">();</span>
<span class="n">String</span> <span class="n">user_api_token</span> <span class="o">=</span> <span class="s">"osEdbc8uzxY5vaXA-oe-7E86sVWCYTCVPuHQyFQ-uPQ"</span><span class="o">;</span>

<span class="k">try</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Charge existing card"</span><span class="o">);</span>
    <span class="n">String</span> <span class="n">chargeId</span> <span class="o">=</span> <span class="s">"3115641fa59e45f1b31e0f60f059b3ef"</span><span class="o">;</span>
    <span class="n">Response</span> <span class="n">res</span> <span class="o">=</span> <span class="n">Card</span><span class="o">.</span><span class="na">chargeExisting</span><span class="o">(</span><span class="n">chargeId</span><span class="o">);</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Charge existing card success "</span> <span class="o">+</span> <span class="n">res</span><span class="o">.</span><span class="na">getSuccess</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Charge existing card return url "</span> <span class="o">+</span> <span class="n">res</span><span class="o">.</span><span class="na">getReturnUrl</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Charge existing card response "</span> <span class="o">+</span> <span class="n">res</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span>

</code></pre>

<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="s2">"return_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.yoursite.com"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>The following request will allow you to charge a user with his existing default card. Before this, the Charge must be created with <code class="prettyprint">user_api_token</code> of your user passed in.</p>

<p><code class="prettyprint">POST https://sandbox.xfers.io/api/v3/credit_card_charges/charge_card</code></p>

<h4 id="url-parameters">URL Parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>txn_id</td>
<td>string</td>
<td>required</td>
<td>The id of the created charge</td>
<td>b840cc9fc5a359c22ed2ccef3427aacd</td>
</tr>
</tbody></table>

<h2 id="cards-(indonesia)">Cards (Indonesia)</h2>

<h3 id="charge-guest-card">Charge Guest Card</h3>
<pre class="highlight shell"><code>curl <span class="s2">"https://sandbox-id.xfers.com/api/v3/credit_card_charges/charge_card_guest"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -d <span class="s1">'{ "txn_id": "&lt;charge_id&gt;", "card_name": "Visnu", "card_type": "V", "card_no": "4137180300023783", "card_cvc": "666", "expiry_month": "01", "expiry_year": "2021", "save_card": true}'</span>
</code></pre>
<pre class="highlight php"><code>
<span class="cp">&lt;?php</span>
<span class="k">require_once</span><span class="p">(</span><span class="s1">'vendor/autoload.php'</span><span class="p">);</span>

<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setIDSandbox</span><span class="p">();</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"Charge guest card</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="nv">$chargeId</span> <span class="o">=</span> <span class="s1">'051ac2fe464d45b19ec736cf04d66653'</span><span class="p">;</span> <span class="c1">// you must create a charge first
</span>    <span class="nv">$params</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'txn_id'</span> <span class="o">=&gt;</span> <span class="nv">$chargeId</span><span class="p">,</span>
        <span class="s1">'card_name'</span> <span class="o">=&gt;</span> <span class="s1">'Visnu'</span><span class="p">,</span>
        <span class="s1">'card_type'</span> <span class="o">=&gt;</span> <span class="s1">'V'</span><span class="p">,</span>
        <span class="s1">'card_no'</span> <span class="o">=&gt;</span> <span class="s1">'4137180300023783'</span><span class="p">,</span>
        <span class="s1">'card_cvc'</span> <span class="o">=&gt;</span> <span class="s1">'666'</span><span class="p">,</span>
        <span class="s1">'expiry_month'</span> <span class="o">=&gt;</span> <span class="s1">'01'</span><span class="p">,</span>
        <span class="s1">'expiry_year'</span> <span class="o">=&gt;</span> <span class="s1">'2021'</span><span class="p">,</span>
        <span class="s1">'save_card'</span> <span class="o">=&gt;</span> <span class="kc">true</span>
    <span class="p">);</span>
    <span class="nv">$resp</span> <span class="o">=</span> <span class="nx">\Xfers\Card</span><span class="o">::</span><span class="na">chargeGuest</span><span class="p">(</span><span class="nv">$params</span><span class="p">);</span>
    <span class="nb">print_r</span><span class="p">(</span><span class="nv">$resp</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Xfers\Error\InvalidRequest</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">'Caught InvalidRequest exception: '</span><span class="p">,</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">(),</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<pre class="highlight python"><code>

</code></pre>
<pre class="highlight ruby"><code>

</code></pre>
<pre class="highlight java"><code>

</code></pre>

<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Error response format (Display to users the param &ldquo;msg&rdquo;):</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sorry, your card is invalid and we are unable to accept your card. Please try with another card."</span><span class="p">,</span><span class="w">
  </span><span class="s2">"err_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5518"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The credit card information entered is incomplete/invalid. Please confirm your credit card details and submit again."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>No API key authentication is needed. Instead, we will only charge a card if a valid charge id is found together with valid credit card details.</p>

<p><code class="prettyprint">POST https://sandbox-id.xfers.com/api/v3/credit_card_charges/charge_card_guest</code></p>

<h4 id="url-parameters">URL Parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>txn_id</td>
<td>string</td>
<td>required</td>
<td>The id of the created charge</td>
<td>b840cc9fc5a359c22ed2ccef3427aacd</td>
</tr>
<tr>
<td>card_name</td>
<td>string</td>
<td>required</td>
<td>Name as on credit card</td>
<td>Visnu</td>
</tr>
<tr>
<td>card_type</td>
<td>string</td>
<td>required</td>
<td>MasterCard = M Visa = V</td>
<td>V</td>
</tr>
<tr>
<td>card_no</td>
<td>string</td>
<td>required</td>
<td>Credit card number</td>
<td>4137180300023783</td>
</tr>
<tr>
<td>card_cvc</td>
<td>string</td>
<td>required</td>
<td>Card CVC</td>
<td>123</td>
</tr>
<tr>
<td>expiry_month</td>
<td>string</td>
<td>required</td>
<td>2 digits month</td>
<td>01</td>
</tr>
<tr>
<td>expiry_year</td>
<td>string</td>
<td>required</td>
<td>4 digits year</td>
<td>2021</td>
</tr>
<tr>
<td>save_card</td>
<td>boolean</td>
<td>optional</td>
<td>Whether to save card. Default false. Cards saved can be retrieved with List Cards API</td>
<td>true</td>
</tr>
</tbody></table>

<h4 id="invalid-card">Invalid Card</h4>

<p>For invalid test card, use <code class="prettyprint">card_type = M</code> and <code class="prettyprint">card_no =  4137180300023784</code></p>

<h3 id="charge-existing-card">Charge Existing Card</h3>
<pre class="highlight shell"><code>curl <span class="s2">"https://sandbox-id.xfers.com/api/v3/credit_card_charges/charge_card"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -d <span class="s1">'{ "txn_id": "&lt;charge_id&gt;", "token": "47B23760-3073-490D-8AAA-548E83CD29F4"}'</span>
</code></pre>
<pre class="highlight php"><code>
<span class="cp">&lt;?php</span>
<span class="k">require_once</span><span class="p">(</span><span class="s1">'vendor/autoload.php'</span><span class="p">);</span>
<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setIDSandbox</span><span class="p">();</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"Charge existing card</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="nv">$chargeId</span> <span class="o">=</span> <span class="s1">'ae9647515a234b95919ce5dbd6e073e8'</span><span class="p">;</span> 
    <span class="nv">$token</span> <span class="o">=</span> <span class="s1">'47B23760-3073-490D-8AAA-548E83CD29F4'</span><span class="p">;</span>
    <span class="nv">$resp</span> <span class="o">=</span> <span class="nx">\Xfers\Card</span><span class="o">::</span><span class="na">chargeExisting</span><span class="p">(</span><span class="nv">$chargeId</span><span class="p">,</span> <span class="nv">$token</span><span class="p">);</span>
    <span class="nb">print_r</span><span class="p">(</span><span class="nv">$resp</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Xfers\Error\InvalidRequest</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">'Caught InvalidRequest exception: '</span><span class="p">,</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">(),</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span>

</code></pre>
<pre class="highlight python"><code>

</code></pre>
<pre class="highlight ruby"><code>
</code></pre>
<pre class="highlight java"><code>
</code></pre>

<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>The following request will allow you to charge a user with his existing card. Before this, retrieve the token using List Card API.</p>

<p>No API key authentication is needed. Instead, we will only charge a card if a valid charge id is found together with valid credit card details.</p>

<p><code class="prettyprint">POST https://sandbox-id.xfers.com/api/v3/credit_card_charges/charge_card</code></p>

<h4 id="url-parameters">URL Parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>txn_id</td>
<td>string</td>
<td>required</td>
<td>The id of the created charge</td>
<td>b840cc9fc5a359c22ed2ccef3427aacd</td>
</tr>
<tr>
<td>token</td>
<td>string</td>
<td>required</td>
<td>The credit card token</td>
<td>47B23760-3073-490D-8AAA-548E83CD29F4</td>
</tr>
</tbody></table>

<h3 id="delete-card">Delete Card</h3>
<pre class="highlight shell"><code>curl -X DELETE <span class="s2">"https://sandbox-id.xfers.com/api/v3/cards/&lt;token&gt;"</span> <span class="se">\</span>
  -H <span class="s2">"X-XFERS-USER-API-KEY: FVNbKjcGZ5Xx-Uf2XnxsrGtoxmLm9YEgokzDRoyshFc"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> 
</code></pre>
<pre class="highlight php"><code>
<span class="cp">&lt;?php</span>
<span class="k">require_once</span><span class="p">(</span><span class="s1">'vendor/autoload.php'</span><span class="p">);</span>
<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setApiKey</span><span class="p">(</span><span class="s1">'WuTp3zM7UEpmUkeAyGPxRHmnXAx-hXJ7jzdqmxY6S1o'</span><span class="p">);</span>
<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setIDSandbox</span><span class="p">();</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"Deleting card</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="nv">$token</span> <span class="o">=</span> <span class="s1">'3A27AAC0-7569-4A63-8E22-E7EB2155504C'</span><span class="p">;</span>
    <span class="nv">$resp</span> <span class="o">=</span> <span class="nx">\Xfers\Card</span><span class="o">::</span><span class="na">delete</span><span class="p">(</span><span class="nv">$token</span><span class="p">);</span>
    <span class="nb">print_r</span><span class="p">(</span><span class="nv">$resp</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Xfers\Error\InvalidRequest</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">'Caught InvalidRequest exception: '</span><span class="p">,</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">(),</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<pre class="highlight python"><code>
</code></pre>
<pre class="highlight ruby"><code>
</code></pre>
<pre class="highlight java"><code>

</code></pre>

<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3A27AAC0-7569-4A63-8E22-E7EB2155504C"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>The following request will allow you to delete your user&rsquo;s credit card.</p>

<p><code class="prettyprint">DELETE https://sandbox-id.xfers.com/api/v3/cards/&lt;card_token&gt;</code></p>

<h3 id="list-cards">List Cards</h3>
<pre class="highlight shell"><code>curl <span class="s2">"https://sandbox-id.xfers.com/api/v3/cards?customer=hello@xfers.io"</span> <span class="se">\</span>
-H <span class="s2">"X-XFERS-USER-API-KEY: WuTp3zM7UEpmUkeAyGPxRHmnXAx-hXJ7jzdqmxY6S1o"</span>
</code></pre>
<pre class="highlight php"><code>
<span class="cp">&lt;?php</span>
<span class="k">require_once</span><span class="p">(</span><span class="s1">'vendor/autoload.php'</span><span class="p">);</span>
<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setApiKey</span><span class="p">(</span><span class="s1">'WuTp3zM7UEpmUkeAyGPxRHmnXAx-hXJ7jzdqmxY6S1o'</span><span class="p">);</span>
<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setIDSandbox</span><span class="p">();</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"Listing all cards</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="nv">$customer</span> <span class="o">=</span> <span class="s2">"hello@xfers.io"</span><span class="p">;</span>
    <span class="nv">$resp</span> <span class="o">=</span> <span class="nx">\Xfers\Card</span><span class="o">::</span><span class="na">listAll</span><span class="p">(</span><span class="nv">$customer</span><span class="p">);</span>
    <span class="nb">print_r</span><span class="p">(</span><span class="nv">$resp</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Xfers\Error\InvalidRequest</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">'Caught InvalidRequest exception: '</span><span class="p">,</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">(),</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span>


</code></pre>
<pre class="highlight python"><code><span class="n">COMING</span> <span class="n">SOON</span>
</code></pre>
<pre class="highlight ruby"><code><span class="no">COMING</span> <span class="no">SOON</span>
</code></pre>
<pre class="highlight java"><code><span class="n">COMING</span> <span class="n">SOON</span>

</code></pre>

<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">[</span><span class="w">
   </span><span class="p">{</span><span class="w">
      </span><span class="s2">"card_number_partial"</span><span class="p">:</span><span class="s2">"123456xxx4444"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"card_type"</span><span class="p">:</span><span class="s2">"V"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"card_name"</span><span class="p">:</span><span class="s2">"John Tan"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"token"</span><span class="p">:</span><span class="s2">"7AEC1AE2-8B66-490D-9DAE-CB8CBF3326E0"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="p">{</span><span class="w">
      </span><span class="s2">"card_number_partial"</span><span class="p">:</span><span class="s2">"777777xxx4444"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"card_type"</span><span class="p">:</span><span class="s2">"M"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"card_name"</span><span class="p">:</span><span class="s2">"John Tan"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"token"</span><span class="p">:</span><span class="s2">"7AZZZZZZ-8B66-490D-9DAE-CB8CBF3326E0"</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<p>The following request will allow you to list all credit cards added to a user</p>

<p><code class="prettyprint">GET https://sandbox-id.xfers.com/api/v3/cards?customer=hello@xfers.io</code></p>

<h4 id="url-parameters">URL Parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>customer</td>
<td>string</td>
<td>required</td>
<td>To identify the customer. Either phone number or email</td>
<td>john@gmail.com</td>
</tr>
</tbody></table>

<h4 id="response">Response</h4>

<p>Card types:</p>

<p>MasterCard = M
Visa = V
JCB = J
Amex = A</p>

<h2 id="payouts">Payouts</h2>

<p>Xfers Payout allows you transfer money between Xfers Wallets with your Xfers balance via their phone no or email address. A SGD$1.00 fee will be charged to your account on every successful payout. You need to have sufficient available balance in your account to cover the amount + fees required for the payout.</p>

<h3 id="creating-a-payout">Creating a Payout</h3>
<pre class="highlight shell"><code>curl <span class="s2">"https://sandbox.xfers.io/api/v3/payouts"</span> <span class="se">\</span>
  -H <span class="s2">"X-XFERS-USER-API-KEY: FVNbKjcGZ5Xx-Uf2XnxsrGtoxmLm9YEgokzDRoyshFc"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -d <span class="s1">'{"amount": "150.00", "invoice_id": "AZ0001", "descriptions": "Payment for Rent for July", "recipient": "+6597288608"}'</span>
</code></pre>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="k">require_once</span><span class="p">(</span><span class="s1">'vendor/autoload.php'</span><span class="p">);</span>

<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setApiKey</span><span class="p">(</span><span class="s1">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span><span class="p">);</span>
<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setSGSandbox</span><span class="p">();</span>
<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$resp</span> <span class="o">=</span> <span class="nx">\Xfers\Payout</span><span class="o">::</span><span class="na">create</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
        <span class="s1">'amount'</span> <span class="o">=&gt;</span> <span class="s1">'150.00'</span><span class="p">,</span>
        <span class="s1">'invoice_id'</span> <span class="o">=&gt;</span> <span class="s1">'AZ0001'</span><span class="p">,</span>
        <span class="s1">'descriptions'</span> <span class="o">=&gt;</span> <span class="s1">'Payment for Rent for July'</span><span class="p">,</span>
        <span class="s1">'recipient'</span> <span class="o">=&gt;</span> <span class="s1">'+6597288608'</span>
    <span class="p">));</span>
    <span class="nb">print_r</span><span class="p">(</span><span class="nv">$resp</span><span class="p">);</span>
    <span class="k">echo</span> <span class="nv">$resp</span><span class="p">[</span><span class="s2">"id"</span><span class="p">]</span> <span class="o">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nv">$resp</span><span class="p">[</span><span class="s2">"recipient"</span><span class="p">]</span> <span class="o">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
    <span class="k">echo</span> <span class="nv">$resp</span><span class="p">[</span><span class="s2">"invoice_id"</span><span class="p">]</span> <span class="o">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Xfers\Error\InvalidRequest</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">'Caught invalid request exception: '</span><span class="p">,</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">(),</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">xfers</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">xfpayout</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">error</span>
<span class="n">xfers</span><span class="o">.</span><span class="n">api_key</span> <span class="o">=</span> <span class="s">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span>
<span class="n">xfers</span><span class="o">.</span><span class="n">set_sg_sandbox</span><span class="p">()</span>
<span class="k">try</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">'Creating payout...'</span>
    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'amount'</span><span class="p">:</span> <span class="s">'150.00'</span><span class="p">,</span>
        <span class="s">'invoice_id'</span><span class="p">:</span> <span class="s">'AZ0001'</span><span class="p">,</span>
        <span class="s">'descriptions'</span><span class="p">:</span> <span class="s">'Payment for Rent for July'</span><span class="p">,</span>
        <span class="s">'recipient'</span><span class="p">:</span> <span class="s">'+6597288608'</span>
    <span class="p">}</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">xfpayout</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
    <span class="n">payout_id</span> <span class="o">=</span> <span class="n">resp</span><span class="p">[</span><span class="s">'id'</span><span class="p">]</span>
    <span class="k">print</span> <span class="n">payout_id</span>
    <span class="k">print</span> <span class="n">resp</span><span class="p">[</span><span class="s">'recipient'</span><span class="p">]</span>
    <span class="k">print</span> <span class="n">resp</span><span class="p">[</span><span class="s">'invoice_id'</span><span class="p">]</span>
    <span class="k">print</span> <span class="n">resp</span>
<span class="k">except</span> <span class="n">error</span><span class="o">.</span><span class="n">XfersError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">print</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'xfers'</span>

<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_api_key</span> <span class="s1">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span>
<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_sg_sandbox</span>

<span class="k">begin</span>
  <span class="nb">puts</span> <span class="s1">'Creating payout...'</span>
  <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
      <span class="s1">'amount'</span> <span class="o">=&gt;</span> <span class="s1">'150.00'</span><span class="p">,</span>
      <span class="s1">'invoice_id'</span> <span class="o">=&gt;</span> <span class="s1">'AZ0001'</span><span class="p">,</span>
      <span class="s1">'descriptions'</span> <span class="o">=&gt;</span> <span class="s1">'Payment for Rent for July'</span><span class="p">,</span>
      <span class="s1">'recipient'</span> <span class="o">=&gt;</span> <span class="s1">'+6597288608'</span>
  <span class="p">}</span>
  <span class="n">resp</span> <span class="o">=</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">Payout</span><span class="p">.</span><span class="nf">create</span> <span class="n">params</span>
  <span class="n">payout_id</span> <span class="o">=</span> <span class="n">resp</span><span class="p">[</span><span class="ss">:id</span><span class="p">]</span>
  <span class="nb">puts</span> <span class="n">resp</span><span class="p">[</span><span class="ss">:recipient</span><span class="p">]</span>
  <span class="nb">puts</span> <span class="n">resp</span><span class="p">[</span><span class="ss">:invoice_id</span><span class="p">]</span>
  <span class="nb">puts</span> <span class="n">resp</span>
<span class="k">rescue</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">XfersError</span> <span class="o">=&gt;</span> <span class="n">e</span>
  <span class="nb">puts</span> <span class="n">e</span><span class="p">.</span><span class="nf">to_s</span>
<span class="k">end</span>
</code></pre>
<pre class="highlight java"><code><span class="n">Xfers</span><span class="o">.</span><span class="na">apiKey</span> <span class="o">=</span> <span class="s">"pXcfdAKNorDe_o1eou1NSp4mwssiEzem_6sg8fwnZWs"</span><span class="o">;</span>
<span class="n">Xfers</span><span class="o">.</span><span class="na">setSGSandbox</span><span class="o">();</span>
<span class="k">try</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Creating a payout"</span><span class="o">);</span>
    <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">params</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;();</span>
    <span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"amount"</span><span class="o">,</span> <span class="s">"150.00"</span><span class="o">);</span>
    <span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"invoice_id"</span><span class="o">,</span> <span class="s">"AZ0001"</span><span class="o">);</span>
    <span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"recipient"</span><span class="o">,</span> <span class="s">"+6597288608"</span><span class="o">);</span>
    <span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"descriptions"</span><span class="o">,</span> <span class="s">"Payment for Rent for July"</span><span class="o">);</span>

    <span class="n">Payout</span> <span class="n">payout</span> <span class="o">=</span> <span class="n">Payout</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="n">params</span><span class="o">);</span>
    <span class="n">payoutId</span> <span class="o">=</span> <span class="n">payout</span><span class="o">.</span><span class="na">getId</span><span class="o">();</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">payout</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">payout</span><span class="o">.</span><span class="na">getRecipient</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">payout</span><span class="o">.</span><span class="na">getAmount</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">payout</span><span class="o">.</span><span class="na">getCurrency</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">payout</span><span class="o">.</span><span class="na">getDescriptions</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">payout</span><span class="o">.</span><span class="na">getBank</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">payout</span><span class="o">.</span><span class="na">getBankAccountNo</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">payout</span><span class="o">.</span><span class="na">getCreatedDate</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">payout</span><span class="o">.</span><span class="na">getCompletedDate</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">payout</span><span class="o">.</span><span class="na">getStatus</span><span class="o">());</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span>
</code></pre>

<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6fa51cd08c8ae115f858593412bb72c8"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"recipient"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"+6597288608"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"invoice_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"AZ0001"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">150.00</span><span class="p">,</span><span class="w">
  </span><span class="s2">"currency"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"SGD"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"descriptions"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Payment for Rent for July"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"bank"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"DBS"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"bank_account_no"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"XXX-XXX-6091"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"created_date"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-07-01T19:01:25Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"completed_date"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"completed"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>The following request will allow you to make a payout to the recipient.</p>

<p><code class="prettyprint">POST https://sandbox.xfers.io/api/v3/payouts</code></p>

<h4 id="url-parameters">URL Parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>amount</td>
<td>float</td>
<td>required</td>
<td>Total value for items.</td>
<td>150.00</td>
</tr>
<tr>
<td>invoice_id</td>
<td>string</td>
<td>required</td>
<td>Unique ref no provided by merchant. This will need to be unique or the payout request will be considered a duplicate and ignored.</td>
<td>AZ0001</td>
</tr>
<tr>
<td>recipient</td>
<td>string</td>
<td>optional (either recipient or user_api_token required)</td>
<td>Email or Mobile Phone No of the recipient for this payout.</td>
<td>+659728860</td>
</tr>
<tr>
<td>user_api_token</td>
<td>string</td>
<td>optional (either recipient or user_api_token required)</td>
<td>user’s api token obtain via Connect’s get user token APIs. When this is provided, it will replace the recipient param as the payout target</td>
<td></td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>optional</td>
<td>3-letter ISO code for currency</td>
<td>Default to &#39;SGD&rsquo;</td>
</tr>
<tr>
<td>descriptions</td>
<td>string</td>
<td>optional</td>
<td>A short description for this payout. This will be part of the email/SMS that the recipient will be receiving from Xfers.</td>
<td>Payment for Rent for July</td>
</tr>
<tr>
<td>no_expire</td>
<td>boolean</td>
<td>optional</td>
<td>Set this to true so this payout will not expire</td>
<td>Default to false</td>
</tr>
</tbody></table>

<h5 id="payout-response-status">Payout Response Status</h5>

<p>The below are the possible response status and their meaning.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>completed</td>
<td>Payout has been completed. Existing Xfers user and payout has been credited to his account.</td>
</tr>
</tbody></table>

<h3 id="retrieve-a-payout">Retrieve a Payout</h3>
<pre class="highlight shell"><code>curl <span class="s2">"https://sandbox.xfers.io/api/v3/payouts/&lt;id&gt;"</span> <span class="se">\</span>
  -H <span class="s2">"X-XFERS-USER-API-KEY: FVNbKjcGZ5Xx-Uf2XnxsrGtoxmLm9YEgokzDRoyshFc"</span>
</code></pre>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="k">require_once</span><span class="p">(</span><span class="s1">'vendor/autoload.php'</span><span class="p">);</span>

<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setApiKey</span><span class="p">(</span><span class="s1">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span><span class="p">);</span>
<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setSGSandbox</span><span class="p">();</span>
<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$resp</span> <span class="o">=</span> <span class="nx">\Xfers\Payout</span><span class="o">::</span><span class="na">retrieve</span><span class="p">(</span><span class="s2">"&lt;id&gt;"</span><span class="p">);</span>
    <span class="nb">print_r</span><span class="p">(</span><span class="nv">$resp</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Xfers\Error\InvalidRequest</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">'Caught invalid request exception: '</span><span class="p">,</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">(),</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">xfers</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">xfpayout</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">error</span>
<span class="n">xfers</span><span class="o">.</span><span class="n">api_key</span> <span class="o">=</span> <span class="s">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span>
<span class="n">xfers</span><span class="o">.</span><span class="n">set_sg_sandbox</span><span class="p">()</span>
<span class="k">try</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">'Retrieving payout {}...'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s">'&lt;id&gt;'</span><span class="p">)</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">xfpayout</span><span class="o">.</span><span class="n">retrieve</span><span class="p">(</span><span class="s">'&lt;id&gt;'</span><span class="p">)</span>
    <span class="k">print</span> <span class="n">resp</span>
<span class="k">except</span> <span class="n">error</span><span class="o">.</span><span class="n">XfersError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">print</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'xfers'</span>

<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_api_key</span> <span class="s1">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span>
<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_sg_sandbox</span>

<span class="k">begin</span>
  <span class="nb">puts</span> <span class="s1">'Retrieving payout...'</span>
  <span class="n">resp</span> <span class="o">=</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">Payout</span><span class="p">.</span><span class="nf">retrieve</span> <span class="s1">'&lt;id&gt;'</span>
  <span class="nb">puts</span> <span class="n">resp</span>
<span class="k">rescue</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">XfersError</span> <span class="o">=&gt;</span> <span class="n">e</span>
  <span class="nb">puts</span> <span class="n">e</span><span class="p">.</span><span class="nf">to_s</span>
<span class="k">end</span>
</code></pre>
<pre class="highlight java"><code><span class="n">Xfers</span><span class="o">.</span><span class="na">apiKey</span> <span class="o">=</span> <span class="s">"pXcfdAKNorDe_o1eou1NSp4mwssiEzem_6sg8fwnZWs"</span><span class="o">;</span>
<span class="n">Xfers</span><span class="o">.</span><span class="na">setSGSandbox</span><span class="o">();</span>
 <span class="k">try</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Retrieving a payout"</span><span class="o">);</span>
    <span class="n">Payout</span> <span class="n">payout</span> <span class="o">=</span> <span class="n">Payout</span><span class="o">.</span><span class="na">retrieve</span><span class="o">(</span><span class="s">"&lt;id&gt;"</span><span class="o">);</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">payout</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span>
</code></pre>

<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6fa51cd08c8ae115f858593412bb72c8"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"recipient"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"+6597288608"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"invoice_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"AZ0001"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">150.00</span><span class="p">,</span><span class="w">
  </span><span class="s2">"currency"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"SGD"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"descriptions"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Payment for Rent for July"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"bank"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"DBS"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"bank_account_no"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"XXX-XXX-6091"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"created_date"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-07-01T19:01:25Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"completed_date"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"completed"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Retrieves the details of a payout that has previously been created. Supply the unique payout ID that was returned from your previous request, and Xfers will return the corresponding payout information. </p>

<h4 id="https-request">HTTPS Request</h4>

<p><code class="prettyprint">GET https://sandbox.xfers.io/api/v3/payouts/&lt;id&gt;</code></p>

<p>The below is a list of payout status and their respective meanings.</p>

<h5 id="payout-status">Payout Status</h5>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>completed</td>
<td>Payout has been completed.</td>
</tr>
<tr>
<td>cancelled</td>
<td>Payout has been cancelled.</td>
</tr>
</tbody></table>

<h3 id="list-all-payouts">List all Payouts</h3>
<pre class="highlight shell"><code>curl <span class="s2">"https://sandbox.xfers.io/api/v3/payouts?limit=1"</span> <span class="se">\</span>
  -H <span class="s2">"X-XFERS-USER-API-KEY: FVNbKjcGZ5Xx-Uf2XnxsrGtoxmLm9YEgokzDRoyshFc"</span>
</code></pre>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="k">require_once</span><span class="p">(</span><span class="s1">'vendor/autoload.php'</span><span class="p">);</span>

<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setApiKey</span><span class="p">(</span><span class="s1">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span><span class="p">);</span>
<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setSGSandbox</span><span class="p">();</span>
<span class="nv">$resp</span> <span class="o">=</span> <span class="nx">\Xfers\Payout</span><span class="o">::</span><span class="na">listAll</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s1">'limit'</span> <span class="o">=&gt;</span> <span class="s1">'1'</span>
<span class="p">));</span>
<span class="nb">print_r</span><span class="p">(</span><span class="nv">$resp</span><span class="p">);</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">xfers</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">xfpayout</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">error</span>
<span class="n">xfers</span><span class="o">.</span><span class="n">api_key</span> <span class="o">=</span> <span class="s">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span>
<span class="n">xfers</span><span class="o">.</span><span class="n">set_sg_sandbox</span><span class="p">()</span>
<span class="k">try</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">'Listing all payouts...'</span>
    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'recipient'</span><span class="p">:</span> <span class="s">'+6597288608'</span>
    <span class="p">}</span>
    <span class="n">payouts</span> <span class="o">=</span> <span class="n">xfpayout</span><span class="o">.</span><span class="n">list_all</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">payout</span> <span class="ow">in</span> <span class="n">payouts</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">'Payout: {}'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">payout</span><span class="p">)</span>
<span class="k">except</span> <span class="n">error</span><span class="o">.</span><span class="n">XfersError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">print</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'xfers'</span>

<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_api_key</span> <span class="s1">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span>
<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_sg_sandbox</span>

<span class="k">begin</span>
  <span class="nb">puts</span> <span class="s1">'Listing all payouts...'</span>
  <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
      <span class="s1">'recipient'</span><span class="o">=&gt;</span> <span class="s1">'+6597288608'</span>
  <span class="p">}</span>
  <span class="n">payouts</span> <span class="o">=</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">Payout</span><span class="p">.</span><span class="nf">list_all</span> <span class="n">params</span>
  <span class="n">payouts</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">payout</span><span class="o">|</span>
    <span class="nb">puts</span> <span class="n">payout</span>
  <span class="p">}</span>
<span class="k">rescue</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">XfersError</span> <span class="o">=&gt;</span> <span class="n">e</span>
  <span class="nb">puts</span> <span class="n">e</span><span class="p">.</span><span class="nf">to_s</span>
<span class="k">end</span>
</code></pre>
<pre class="highlight java"><code><span class="n">Xfers</span><span class="o">.</span><span class="na">apiKey</span> <span class="o">=</span> <span class="s">"pXcfdAKNorDe_o1eou1NSp4mwssiEzem_6sg8fwnZWs"</span><span class="o">;</span>
<span class="n">Xfers</span><span class="o">.</span><span class="na">setSGSandbox</span><span class="o">();</span>

<span class="k">try</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Listing payouts"</span><span class="o">);</span>
    <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">params</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;();</span>
    <span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"recipient"</span><span class="o">,</span> <span class="s">"+6597288608"</span><span class="o">);</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">Payout</span><span class="o">&gt;</span> <span class="n">payouts</span> <span class="o">=</span> <span class="n">Payout</span><span class="o">.</span><span class="na">listAll</span><span class="o">(</span><span class="n">params</span><span class="o">);</span>
    <span class="k">for</span> <span class="o">(</span><span class="n">Payout</span> <span class="n">payout</span> <span class="o">:</span> <span class="n">payouts</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">payout</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">payout</span><span class="o">.</span><span class="na">getInvoiceId</span><span class="o">());</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">payout</span><span class="o">.</span><span class="na">getRecipient</span><span class="o">());</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">payout</span><span class="o">.</span><span class="na">getAmount</span><span class="o">());</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">payout</span><span class="o">.</span><span class="na">getCurrency</span><span class="o">());</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">payout</span><span class="o">.</span><span class="na">getDescriptions</span><span class="o">());</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">payout</span><span class="o">.</span><span class="na">getBank</span><span class="o">());</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">payout</span><span class="o">.</span><span class="na">getBankAccountNo</span><span class="o">());</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">payout</span><span class="o">.</span><span class="na">getCreatedDate</span><span class="o">());</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">payout</span><span class="o">.</span><span class="na">getCompletedDate</span><span class="o">());</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">payout</span><span class="o">.</span><span class="na">getStatus</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span>
</code></pre>

<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6fa51cd08c8ae115f858593412bb72c8"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"recipient"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"+6597288608"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"invoice_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"AZ0001"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">150.00</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"SGD"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"descriptions"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Payment for Rent for July"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bank"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"DBS"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bank_account_no"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"XXX-XXX-6091"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_date"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-07-01T19:01:25Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"completed_date"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"completed"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<p>Returns a list of payouts you&rsquo;ve previously created. The payouts are returned in sorted order, with the most recent charges appearing first.</p>

<h4 id="https-request">HTTPS Request</h4>

<p><code class="prettyprint">GET https://sandbox.xfers.io/api/v3/payouts</code></p>

<h4 id="url-parameters">URL Parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>recipient</td>
<td>string</td>
<td>optional</td>
<td>Only return charges for the recipient(email for phone no) specified by this recipient ID.</td>
<td>+6597288608</td>
</tr>
<tr>
<td>ending_before</td>
<td>string</td>
<td>optional</td>
<td>A cursor for use in pagination. ending_before is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, starting with obj_bar, your subsequent call can include ending_before=obj_bar in order to fetch the previous page of the list.</td>
<td>6fa51cd08c8ae115f858593412bb72c8</td>
</tr>
<tr>
<td>limit</td>
<td>integer</td>
<td>optional</td>
<td>A limit on the number of objects to be returned. Limit can range between 1 and 50 items.</td>
<td>Default to 10</td>
</tr>
<tr>
<td>starting_after</td>
<td>string</td>
<td>optional</td>
<td>A cursor for use in pagination. starting_after is an object ID that defines your place in the list. For instance, if you make a list request and receive 100 objects, ending with obj_foo, your subsequent call can include starting_after=obj_foo in order to fetch the next page of the list.</td>
<td>6fa51cd08c8ae115f858593412bb72c8</td>
</tr>
</tbody></table>

<h2 id="refunds">Refunds</h2>

<p>The following APIs allow you to refund a charge that has previously been created and paid by your buyer. Funds will be refunded to the buyer&rsquo;s Xfers account. The fees you were originally charged are also refunded.</p>

<h3 id="creating-a-refund">Creating a Refund</h3>
<pre class="highlight shell"><code>curl <span class="s2">"https://sandbox.xfers.io/api/v3/charges/&lt;id&gt;/refunds"</span> <span class="se">\</span>
  -H <span class="s2">"X-XFERS-USER-API-KEY: FVNbKjcGZ5Xx-Uf2XnxsrGtoxmLm9YEgokzDRoyshFc"</span>
  -X POST
</code></pre>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="k">require_once</span><span class="p">(</span><span class="s1">'vendor/autoload.php'</span><span class="p">);</span>

<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setApiKey</span><span class="p">(</span><span class="s1">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span><span class="p">);</span>
<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setSGSandbox</span><span class="p">();</span>
<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$resp</span> <span class="o">=</span> <span class="nx">\Xfers\Charge</span><span class="o">::</span><span class="na">refund</span><span class="p">(</span><span class="s2">"&lt;id&gt;"</span><span class="p">);</span>
    <span class="nb">print_r</span><span class="p">(</span><span class="nv">$resp</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Xfers\Error\InvalidRequest</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">'Caught InvalidRequest exception: '</span><span class="p">,</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">(),</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">xfers</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">xfcharge</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">error</span>
<span class="n">xfers</span><span class="o">.</span><span class="n">api_key</span> <span class="o">=</span> <span class="s">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span>
<span class="n">xfers</span><span class="o">.</span><span class="n">set_sg_sandbox</span><span class="p">()</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">charge_id</span> <span class="o">=</span> <span class="s">'&lt;id&gt;'</span>
    <span class="k">print</span> <span class="s">'Refunding charge {}...'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">charge_id</span><span class="p">)</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">xfcharge</span><span class="o">.</span><span class="n">refund</span><span class="p">(</span><span class="n">charge_id</span><span class="p">)</span>
    <span class="k">print</span> <span class="n">resp</span>
<span class="k">except</span> <span class="n">error</span><span class="o">.</span><span class="n">XfersError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">print</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'xfers'</span>

<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_api_key</span> <span class="s1">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span>
<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_sg_sandbox</span>

<span class="k">begin</span>
  <span class="n">charge_id</span> <span class="o">=</span> <span class="s1">'&lt;id&gt;'</span>
  <span class="nb">puts</span> <span class="s2">"Refunding charge... </span><span class="si">#{</span><span class="n">charge_id</span><span class="si">}</span><span class="s2">"</span>
  <span class="n">resp</span> <span class="o">=</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">Charge</span><span class="p">.</span><span class="nf">refund</span> <span class="n">charge_id</span>
  <span class="nb">puts</span> <span class="n">resp</span>
<span class="k">rescue</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">XfersError</span> <span class="o">=&gt;</span> <span class="n">e</span>
  <span class="nb">puts</span> <span class="n">e</span><span class="p">.</span><span class="nf">to_s</span>
<span class="k">end</span>
</code></pre>
<pre class="highlight java"><code><span class="n">Xfers</span><span class="o">.</span><span class="na">apiKey</span> <span class="o">=</span> <span class="s">"pXcfdAKNorDe_o1eou1NSp4mwssiEzem_6sg8fwnZWs"</span><span class="o">;</span>
<span class="n">Xfers</span><span class="o">.</span><span class="na">setSGSandbox</span><span class="o">();</span>
<span class="k">try</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Refunding a charge"</span><span class="o">);</span>
    <span class="n">Charge</span> <span class="n">charge</span> <span class="o">=</span> <span class="n">Charge</span><span class="o">.</span><span class="na">refund</span><span class="o">(</span><span class="s">"&lt;id&gt;"</span><span class="o">);</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">charge</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span>
</code></pre>

<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6fa51cd08c8ae115f858593412bb72c8"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"checkout_url"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"https://sandbox.xfers.io/checkout_transaction/b840cc9fc5a359c22ed2ccef3427aacd"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"notify_url"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"https://mysite.com/payment_notification"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"return_url"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"https://mysite.com/return"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"cancel_url"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"https://mysite.com/cancel"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"object"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"charge"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">9.99</span><span class="p">,</span><span class="w">
  </span><span class="s2">"currency"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"SGD"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"customer"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="s2">"order_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"A012312"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"capture"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="s2">"description"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Carousell user - Konsolidate"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"items"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Red Dress Size M"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Red dress"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.00"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">9.99</span><span class="p">,</span><span class="w">
      </span><span class="s2">"item_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"statement_descriptor"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="s2">"receipt_email"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="s2">"shipping"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">2.50</span><span class="p">,</span><span class="w">
  </span><span class="s2">"tax"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.00</span><span class="p">,</span><span class="w">
  </span><span class="s2">"total_amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">12.49</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"refunded"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"meta_data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"key1"</span><span class="p">:</span><span class="s2">"value1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"key2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"value2"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>When you create a new refund, you must specify a charge to create it on.</p>

<p>Creating a new refund will refund a charge that has previously been created and paid but not yet refunded. Funds will be refunded to the buyer Xfers account available balance. The fees you were originally charged are also refunded.</p>

<h4 id="https-request">HTTPS Request</h4>

<p><code class="prettyprint">POST https://sandbox.xfers.io/api/v3/charges/&lt;id&gt;/refunds</code></p>

<h2 id="intents">Intents</h2>

<p>When doing a top up via <a href="/#get-transfer-info">GET /transfer_info</a>, users might forget to enter their contact number which is needed for our system to identify them. </p>

<p>The Intents API solves this issue by requiring the user to transfer a unique amount to Xfers which will be used to identify them. The difference between the <code class="prettyprint">unique_amount</code> and the actual <code class="prettyprint">amount</code> will be very small, and Xfers provides the difference for free to the user.</p>

<p>Note that this only acts as a backup, and the user should enter his contact number in the comments section when doing a bank transfer whenever possible.</p>

<p>Example:
Jane wishes to transfer 5000 Indonesian Rupiah via <code class="prettyprint">/intents</code>.</p>

<ol>
<li>She makes a HTTP GET request to <code class="prettyprint">/user/transfer_info</code> to get the correct Xfers bank to transfer to (we have many banks!). The response tells her to transfer to Bank Central Asia (BCA).</li>
<li>She makes a HTTP POST request to create an intent. The response tells her to make a bank transfer of 4999 to Xfers. </li>
<li>Jane makes a transfer of 4999 to Xfers BCA. Within a few minutes, Xfers detects the transfer and tops up Jane&rsquo;s Xfers account with 5000. Xfers absorbs the difference for free. </li>
<li>If <code class="prettyprint">notify_url</code> is given, Xfers will send a callback to this url.</li>
</ol>

<h3 id="creating-an-intent">Creating an Intent</h3>
<pre class="highlight shell"><code>curl <span class="s2">"https://sandbox.xfers.io/api/v3/intents"</span> <span class="se">\</span>
  -H <span class="s2">"X-XFERS-USER-API-KEY: FVNbKjcGZ5Xx-Uf2XnxsrGtoxmLm9YEgokzDRoyshFc"</span>
 -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -d <span class="s1">'{ "amount": "5000", "currency": "SGD", "bank": "BCA", "request_id" : "AZ0001", "notify_url" : "https://mysite.com/topup_notification"}'</span>  
</code></pre>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="k">require_once</span><span class="p">(</span><span class="s1">'vendor/autoload.php'</span><span class="p">);</span>

<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setApiKey</span><span class="p">(</span><span class="s1">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span><span class="p">);</span>
<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setSGSandbox</span><span class="p">();</span>
<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$resp</span> <span class="o">=</span> <span class="nx">\Xfers\Intent</span><span class="o">::</span><span class="na">create</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
        <span class="s1">'amount'</span> <span class="o">=&gt;</span> <span class="s1">'5000'</span><span class="p">,</span>
        <span class="s1">'currency'</span> <span class="o">=&gt;</span> <span class="s1">'SGD'</span><span class="p">,</span>
        <span class="s1">'bank'</span> <span class="o">=&gt;</span> <span class="s1">'BCA'</span><span class="p">,</span>
        <span class="s1">'request_id'</span> <span class="o">=&gt;</span> <span class="s1">'AZ0001'</span><span class="p">,</span>
        <span class="s1">'notify_url'</span> <span class="o">=&gt;</span> <span class="s1">'https://mysite.com/topup_notification'</span>
    <span class="p">));</span>
    <span class="nv">$intentId</span> <span class="o">=</span> <span class="nv">$resp</span><span class="p">[</span><span class="s2">"id"</span><span class="p">];</span>
    <span class="nb">print_r</span><span class="p">(</span><span class="nv">$resp</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Xfers\Error\InvalidRequest</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">'Caught InvalidRequest exception: '</span><span class="p">,</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">(),</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">xfers</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">xfintent</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">error</span>
<span class="n">xfers</span><span class="o">.</span><span class="n">api_key</span> <span class="o">=</span> <span class="s">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span>
<span class="n">xfers</span><span class="o">.</span><span class="n">set_sg_sandbox</span><span class="p">()</span>
<span class="k">try</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">'Creating intent...'</span>
    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'amount'</span><span class="p">:</span> <span class="s">'5000'</span><span class="p">,</span>
        <span class="s">'currency'</span><span class="p">:</span> <span class="s">'SGD'</span><span class="p">,</span>
        <span class="s">'bank'</span><span class="p">:</span> <span class="s">'BCA'</span><span class="p">,</span>
        <span class="s">'request_id'</span><span class="p">:</span> <span class="s">'AZ0001'</span><span class="p">,</span>
        <span class="s">'notify_url'</span><span class="p">:</span> <span class="s">'https://mysite.com/topup_notification'</span>
    <span class="p">}</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">xfintent</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
    <span class="n">intent_id</span> <span class="o">=</span> <span class="n">resp</span><span class="p">[</span><span class="s">'id'</span><span class="p">]</span>
    <span class="k">print</span> <span class="n">intent_id</span>
    <span class="k">print</span> <span class="n">resp</span>
<span class="k">except</span> <span class="n">error</span><span class="o">.</span><span class="n">XfersError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">print</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'xfers'</span>

<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_api_key</span> <span class="s1">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span>
<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_sg_sandbox</span>

<span class="k">begin</span>
  <span class="nb">puts</span> <span class="s1">'Creating intent...'</span>
  <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
      <span class="s1">'amount'</span> <span class="o">=&gt;</span> <span class="s1">'5000'</span><span class="p">,</span>
      <span class="s1">'currency'</span> <span class="o">=&gt;</span> <span class="s1">'SGD'</span><span class="p">,</span>
      <span class="s1">'bank'</span> <span class="o">=&gt;</span> <span class="s1">'BCA'</span><span class="p">,</span>
      <span class="s1">'request_id'</span> <span class="o">=&gt;</span> <span class="s1">'AZ0001'</span><span class="p">,</span>
      <span class="s1">'notify_url'</span> <span class="o">=&gt;</span> <span class="s1">'https://mysite.com/topup_notification'</span>
  <span class="p">}</span>
  <span class="n">resp</span> <span class="o">=</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">Intent</span><span class="p">.</span><span class="nf">create</span> <span class="n">params</span>
  <span class="n">intent_id</span> <span class="o">=</span> <span class="n">resp</span><span class="p">[</span><span class="ss">:id</span><span class="p">]</span>
  <span class="nb">puts</span> <span class="n">resp</span>
<span class="k">rescue</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">XfersError</span> <span class="o">=&gt;</span> <span class="n">e</span>
  <span class="nb">puts</span> <span class="n">e</span><span class="p">.</span><span class="nf">to_s</span>
<span class="k">end</span>
</code></pre>
<pre class="highlight java"><code><span class="n">Xfers</span><span class="o">.</span><span class="na">apiKey</span> <span class="o">=</span> <span class="s">"pXcfdAKNorDe_o1eou1NSp4mwssiEzem_6sg8fwnZWs"</span><span class="o">;</span>
<span class="n">Xfers</span><span class="o">.</span><span class="na">setSGSandbox</span><span class="o">();</span>
<span class="k">try</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Creating an intent"</span><span class="o">);</span>
    <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">params</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;();</span>
    <span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"amount"</span><span class="o">,</span> <span class="s">"5000"</span><span class="o">);</span>
    <span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"currency"</span><span class="o">,</span> <span class="s">"SGD"</span><span class="o">);</span>
    <span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"bank"</span><span class="o">,</span> <span class="s">"BCA"</span><span class="o">);</span>
    <span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"request_id"</span><span class="o">,</span> <span class="s">"AZ0001"</span><span class="o">);</span>
    <span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"notify_url"</span><span class="o">,</span> <span class="s">"https://mysite.com/topup_notification"</span><span class="o">);</span>

    <span class="n">Intent</span> <span class="n">intent</span> <span class="o">=</span> <span class="n">Intent</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="n">params</span><span class="o">);</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">intent</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">intent</span><span class="o">.</span><span class="na">getAmount</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">intent</span><span class="o">.</span><span class="na">getCurrency</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">intent</span><span class="o">.</span><span class="na">getBank</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">intent</span><span class="o">.</span><span class="na">getStatus</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">intent</span><span class="o">.</span><span class="na">getCheckoutUrl</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">intent</span><span class="o">.</span><span class="na">getRequestId</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">intent</span><span class="o">.</span><span class="na">getNotifyUrl</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">intent</span><span class="o">.</span><span class="na">getBankName</span><span class="o">());</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span>
</code></pre>

<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a975f036cb4b43f3b2d1ff90040ec292"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"request_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AI1001"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"30000.0"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IDR"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"unique_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"29999"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"bank_abbrev"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MANDIRI"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"bank_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bank Mandiri"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"account_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PT Media Indonusa"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"bank_account_no"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8855845678901235"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"notify_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://mysite.com/topup_notification"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"expiration_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-06-01T07:46:40Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pending"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"transfer_info_array"</span><span class="p">:</span><span class="w"> 
  </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"bank_name_full"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bank Central Asia"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank_name_abbreviation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BCA"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank_account_no"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1063003003"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"branch_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"branch_area"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"unique_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"97266867"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"img_src"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.xfers.io/images/bankLogos/bank-logo-bca.png"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"bank_name_full"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bank Mandiri"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank_name_abbreviation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MANDIRI"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank_account_no"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8855845678901235"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"branch_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"branch_area"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"unique_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"97266867"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"img_src"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.xfers.io/images/bankLogos/bank-logo-mandiri.png"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>

<p>The following request will allow you to create a intent for a transfer and register a callback notification once a transfer has be received or expired(all intents expires in 72 hours.)</p>

<p>User should be prompted to transfer <code class="prettyprint">unique_amount</code> amount to the <code class="prettyprint">bank_account_no</code> and <code class="prettyprint">bank_name</code> provided.  Once the user deposits with <code class="prettyprint">unique_amount</code>, the full amount will be credited to his account.</p>

<p><code class="prettyprint">POST https://sandbox.xfers.io/api/v3/intents</code></p>

<aside class="warning">
You cannot create more than 1 intents per user (previous old pending intents will automatically be cancelled).
</aside>

<h4 id="url-parameters">URL Parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>amount</td>
<td>float</td>
<td>required</td>
<td>Amount that user intends to transfer</td>
<td>5000</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>required</td>
<td>3-letter ISO code for currency(IDR/SGD)</td>
<td></td>
</tr>
<tr>
<td>request_id</td>
<td>string</td>
<td>required</td>
<td>Unique ref no provided by requester. This will need to be unique or the intent request will be considered a duplicate and ignored.</td>
<td>AZ0001</td>
</tr>
<tr>
<td>bank</td>
<td>string</td>
<td>optional</td>
<td>bank abbreviation (BCA, UOB, MANDIRI)</td>
<td>BCA</td>
</tr>
<tr>
<td>notify_url</td>
<td>string</td>
<td>optional</td>
<td>URL to receive callback notifications when transfer is received</td>
<td>https://mysite.com/payment_notification</td>
</tr>
</tbody></table>

<h3 id="intent-notifications">Intent Notifications</h3>

<p>After intent has been verified(transfer processed)/expired by Xfers, Xfers will send a callback to the <code class="prettyprint">notify_url</code> you provided. This is a server to server HTTPS POST and you will need to acknowledge the callback by providing a HTTP 200 status.</p>

<p><code class="prettyprint">POST https://mysite.com/topup_notification</code></p>

<p>The following parameters will be part of the HTTPS POST:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>intent_id</td>
<td>string</td>
<td>Xfers&rsquo;s id unique to each intent</td>
<td>6f5f85859a51cd08c8ae113412bb72c8</td>
</tr>
<tr>
<td>request_id</td>
<td>string</td>
<td>Unique ref no provided by your during your intent call</td>
<td>A012312</td>
</tr>
<tr>
<td>amount</td>
<td>float</td>
<td>3000</td>
<td>Amount that user intented to transfer.</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>required</td>
<td>3-letter ISO code for currency(IDR/SGD)</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>Transfer status.</td>
<td>&ldquo;expired&rdquo; or &ldquo;completed&rdquo;</td>
</tr>
</tbody></table>

<h3 id="cancel-a-intent">Cancel a Intent</h3>
<pre class="highlight shell"><code>curl <span class="s2">"https://sandbox.xfers.io/api/v3/intent/&lt;INTENT_ID&gt;/cancel"</span> <span class="se">\</span>
  -H <span class="s2">"X-XFERS-USER-API-KEY: FVNbKjcGZ5Xx-Uf2XnxsrGtoxmLm9YEgokzDRoyshFc"</span>
  -X POST
</code></pre>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="k">require_once</span><span class="p">(</span><span class="s1">'vendor/autoload.php'</span><span class="p">);</span>

<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setApiKey</span><span class="p">(</span><span class="s1">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span><span class="p">);</span>
<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setSGSandbox</span><span class="p">();</span>
<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$resp</span> <span class="o">=</span> <span class="nx">\Xfers\Intent</span><span class="o">::</span><span class="na">cancel</span><span class="p">(</span><span class="s1">'&lt;INTENT_ID&gt;'</span><span class="p">);</span>
    <span class="nb">print_r</span><span class="p">(</span><span class="nv">$resp</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Xfers\Error\InvalidRequest</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">'Caught InvalidRequest exception: '</span><span class="p">,</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">(),</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">xfers</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">xfintent</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">error</span>
<span class="n">xfers</span><span class="o">.</span><span class="n">api_key</span> <span class="o">=</span> <span class="s">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span>
<span class="n">xfers</span><span class="o">.</span><span class="n">set_sg_sandbox</span><span class="p">()</span>
<span class="k">try</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">'Cancelling intent {}...'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s">'&lt;INTENT_ID&gt;'</span><span class="p">)</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">xfintent</span><span class="o">.</span><span class="n">cancel</span><span class="p">(</span><span class="s">'&lt;INTENT_ID&gt;'</span><span class="p">)</span>
    <span class="k">print</span> <span class="n">resp</span>
<span class="k">except</span> <span class="n">error</span><span class="o">.</span><span class="n">XfersError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">print</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'xfers'</span>

<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_api_key</span> <span class="s1">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span>
<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_sg_sandbox</span>

<span class="k">begin</span>
  <span class="nb">puts</span> <span class="s1">'Cancelling intent...'</span>
  <span class="n">resp</span> <span class="o">=</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">Intent</span><span class="p">.</span><span class="nf">cancel</span> <span class="s1">'&lt;INTENT_ID&gt;'</span>
  <span class="nb">puts</span> <span class="n">resp</span>
<span class="k">rescue</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">XfersError</span> <span class="o">=&gt;</span> <span class="n">e</span>
  <span class="nb">puts</span> <span class="n">e</span><span class="p">.</span><span class="nf">to_s</span>
<span class="k">end</span>
</code></pre>
<pre class="highlight java"><code><span class="n">Xfers</span><span class="o">.</span><span class="na">apiKey</span> <span class="o">=</span> <span class="s">"pXcfdAKNorDe_o1eou1NSp4mwssiEzem_6sg8fwnZWs"</span><span class="o">;</span>
<span class="n">Xfers</span><span class="o">.</span><span class="na">setSGSandbox</span><span class="o">();</span>
<span class="k">try</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Cancelling an intent"</span><span class="o">);</span>
    <span class="n">Intent</span> <span class="n">intent</span> <span class="o">=</span> <span class="n">Intent</span><span class="o">.</span><span class="na">cancel</span><span class="o">(</span><span class="s">"&lt;INTENT_ID&gt;"</span><span class="o">);</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">intent</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span>
</code></pre>

<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6f5f85859a51cd08c8ae113412bb72c8"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"request_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"AZ0001"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"5000"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"currency"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"IDR"</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"amount_to_transfer"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"4999"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"bank_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Bank Central Asia"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"bank_abbrev"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BCA"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"account_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Xveria Media Indonesia"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"bank_account_no"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"0124121241"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"notify_url"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"https://mysite.com/topup_notification"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"expiration_date"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-09-09T17:55:51Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"pending"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Cancelling a intent that has been previously created by not yet completed.</p>

<h4 id="https-request">HTTPS Request</h4>

<p><code class="prettyprint">POST https://sandbox.xfers.io/api/v3/intent/&lt;INTENT_ID&gt;/cancel</code></p>

<h3 id="list-current-intent">List current Intent</h3>
<pre class="highlight shell"><code>curl <span class="s2">"https://sandbox.xfers.io/api/v3/intents"</span> <span class="se">\</span>
  -H <span class="s2">"X-XFERS-USER-API-KEY: FVNbKjcGZ5Xx-Uf2XnxsrGtoxmLm9YEgokzDRoyshFc"</span>
</code></pre>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="k">require_once</span><span class="p">(</span><span class="s1">'vendor/autoload.php'</span><span class="p">);</span>

<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setApiKey</span><span class="p">(</span><span class="s1">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span><span class="p">);</span>
<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setSGSandbox</span><span class="p">();</span>
<span class="nv">$resp</span> <span class="o">=</span> <span class="nx">\Xfers\Intent</span><span class="o">::</span><span class="na">retrieve</span><span class="p">();</span>
<span class="nb">print_r</span><span class="p">(</span><span class="nv">$resp</span><span class="p">);</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">xfers</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">xfintent</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">error</span>
<span class="n">xfers</span><span class="o">.</span><span class="n">api_key</span> <span class="o">=</span> <span class="s">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span>
<span class="n">xfers</span><span class="o">.</span><span class="n">set_sg_sandbox</span><span class="p">()</span>
<span class="k">try</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">'Current intent...'</span>
    <span class="n">intent</span> <span class="o">=</span> <span class="n">xfintent</span><span class="o">.</span><span class="n">retrieve</span><span class="p">()</span>
    <span class="k">print</span> <span class="s">'Intent: {}'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">intent</span><span class="p">)</span>
<span class="k">except</span> <span class="n">error</span><span class="o">.</span><span class="n">XfersError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">print</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'xfers'</span>

<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_api_key</span> <span class="s1">'G-zsfAEScrqdU8GhWTEdjfdnb3XRdU8q1fH-nuWfSzo'</span>
<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_sg_sandbox</span>

<span class="k">begin</span>
  <span class="nb">puts</span> <span class="s1">'Current intent...'</span>
  <span class="n">intent</span> <span class="o">=</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">Intent</span><span class="p">.</span><span class="nf">retrieve</span>
  <span class="nb">puts</span> <span class="n">intent</span>
<span class="k">rescue</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">XfersError</span> <span class="o">=&gt;</span> <span class="n">e</span>
  <span class="nb">puts</span> <span class="n">e</span><span class="p">.</span><span class="nf">to_s</span>
<span class="k">end</span>
</code></pre>
<pre class="highlight java"><code><span class="n">Xfers</span><span class="o">.</span><span class="na">apiKey</span> <span class="o">=</span> <span class="s">"pXcfdAKNorDe_o1eou1NSp4mwssiEzem_6sg8fwnZWs"</span><span class="o">;</span>
<span class="n">Xfers</span><span class="o">.</span><span class="na">setSGSandbox</span><span class="o">();</span>
<span class="k">try</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Retrieving latest intent"</span><span class="o">);</span>
    <span class="n">Intent</span> <span class="n">intent</span> <span class="o">=</span> <span class="n">Intent</span><span class="o">.</span><span class="na">retrieve</span><span class="o">();</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">intent</span><span class="o">.</span><span class="na">getId</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">intent</span><span class="o">.</span><span class="na">getAmount</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">intent</span><span class="o">.</span><span class="na">getCurrency</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">intent</span><span class="o">.</span><span class="na">getBank</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">intent</span><span class="o">.</span><span class="na">getStatus</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">intent</span><span class="o">.</span><span class="na">getCheckoutUrl</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">intent</span><span class="o">.</span><span class="na">getRequestId</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">intent</span><span class="o">.</span><span class="na">getNotifyUrl</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">intent</span><span class="o">.</span><span class="na">getBankName</span><span class="o">());</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span>
</code></pre>

<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6f5f85859a51cd08c8ae113412bb72c8"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"request_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"AZ0002"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"4000"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"currency"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"IDR"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"amount_to_transfer"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"3999"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"bank_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Bank Central Asia"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"bank_abbrev"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BCA"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"account_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Xveria Media Indonesia"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"bank_account_no"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"0124121241"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"notify_url"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"https://mysite.com/topup_notification"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"expiration_date"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-09-09T17:55:51Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"pending"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"transfer_info_array"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"bank_name_full"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Bank Central Asia"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank_name_abbreviation"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BCA"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank_account_no"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"1063003003"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank_code"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"branch_code"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"branch_area"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"unique_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"97288607"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"img_src"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://xfers.com/bank-logo-bca.png"</span><span class="w">
    </span><span class="p">},</span><span class="w"> 
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"bank_name_full"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Bank Mandiri"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank_name_abbreviation"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"MANDIRI"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank_account_no"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"1190006792749"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank_code"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"branch_code"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"branch_area"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"unique_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"97288607"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"img_src"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://xfers.com/bank-logo-mandiri.png"</span><span class="w">    
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"bank_name_full"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Bank Negara Indonesia"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank_name_abbreviation"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BNI"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank_account_no"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"8000067885"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"bank_code"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"branch_code"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"branch_area"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"unique_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"97288607"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"img_src"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://xfers.com/bank-logo-bni.png"</span><span class="w">    
    </span><span class="p">}</span><span class="w">    
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Returns the current pending intent of the user. If multiple intents are created, only the last one is returned.</p>

<p><code class="prettyprint">transfer_info_array</code> is returned so you can display a list of all Xfers banks to transfer to.</p>

<h4 id="https-request">HTTPS Request</h4>

<p><code class="prettyprint">GET https://sandbox.xfers.io/api/v3/intents</code></p>

<h2 id="otp">OTP</h2>

<h3 id="mock-otp">Mock OTP</h3>
<pre class="highlight shell"><code>curl <span class="s2">"https://sandbox.xfers.io/api/v3/authorize/get_mock_otp?phone_no=83999455"</span> <span class="se">\</span>
  -H <span class="s2">"X-XFERS-USER-API-KEY: FVNbKjcGZ5Xx-Uf2XnxsrGtoxmLm9YEgokzDRoyshFc"</span>
</code></pre>
<pre class="highlight php"><code></code></pre>
<pre class="highlight python"><code></code></pre>
<pre class="highlight ruby"><code></code></pre>
<pre class="highlight java"><code></code></pre>

<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"otp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"039087"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint allows you to retrieve the OTP of a number when doing testing on sandbox. It is NOT available in production.</p>

<h4 id="url-parameters">URL Parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>phone_no</td>
<td>string</td>
<td>required</td>
<td>Phone number for the otp you want to retrieve</td>
<td>83999455</td>
</tr>
</tbody></table>

<h3 id="resend-otp">Resend OTP</h3>
<pre class="highlight shell"><code>curl <span class="s2">"https://sandbox.xfers.io/checkout_transaction/request_otp"</span> <span class="se">\</span>
-H <span class="s2">"X-XFERS-USER-API-KEY: FVNbKjcGZ5Xx-Uf2XnxsrGtoxmLm9YEgokzDRoyshFc"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-X PUT <span class="se">\</span>
-d <span class="s1">'{"phoneNumber": "85993955", "trans_id": "b840cc9fc5a359c22ed2ccef3427aacd"}'</span>
</code></pre>
<pre class="highlight php"><code></code></pre>
<pre class="highlight python"><code></code></pre>
<pre class="highlight ruby"><code></code></pre>
<pre class="highlight java"><code></code></pre>

<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"number_valid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"true"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint allows you to resend the OTP to a phone.</p>

<h4 id="url-parameters">URL Parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>phoneNumber</td>
<td>string</td>
<td>required</td>
<td>Phone number to resend to. If it is a registered user, please use their email instead.</td>
<td>83999455</td>
</tr>
<tr>
<td>trans_id</td>
<td>string</td>
<td>required</td>
<td>ID of the transaction (charge)</td>
<td>b840cc9fc5a359c22ed2ccef3427aacd</td>
</tr>
</tbody></table>

<h2 id="support">Support</h2>

<p>The following APIs allow you to integrate payment support functionality directly into your app.</p>

<h3 id="creating-a-support-ticket">Creating a Support Ticket</h3>
<pre class="highlight shell"><code>curl <span class="s2">"https://sandbox.xfers.io/api/v3/support"</span> <span class="se">\</span>
  -H <span class="s2">"X-XFERS-USER-API-KEY: FVNbKjcGZ5Xx-Uf2XnxsrGtoxmLm9YEgokzDRoyshFc"</span>
 -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -d <span class="s1">'{ "file": "bank_transfer_receipt.jpg", "intent_id": "6f5f85859a51cd08c8ae113412bb72c8", "description": "Transferred an hour ago but money still not credited", "email": "bobby@gmail.com", "amount": 5.89, "date": "13/02/2017", "time": "23:59"}'</span>  
</code></pre>
<pre class="highlight php"><code></code></pre>
<pre class="highlight python"><code></code></pre>
<pre class="highlight ruby"><code></code></pre>
<pre class="highlight java"><code></code></pre>

<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"support_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"35331"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"intent_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b840cc9fc5a359c22ed2ccef3427aacd"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-08-13"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3:39"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"account_holder_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tian Wei"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"bank_abbrev"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BCA"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"account_no"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0124121241"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">132549</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IDR"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"processing"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Create a support ticket to be processed by Xfers Customer Support team.
You can use either <code class="prettyprint">application/x-www-form-urlencoded</code> (HTTP URL to file) or <code class="prettyprint">multipart/form-data</code> (file upload) Content-Types.</p>

<p><code class="prettyprint">POST https://sandbox.xfers.io/api/v3/support</code></p>

<h4 id="parameters">Parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>description</td>
<td>string</td>
<td>required</td>
<td>Any additional information</td>
<td>I submitted without contact number in the initial/comments section</td>
</tr>
<tr>
<td>date</td>
<td>string</td>
<td>required</td>
<td>Date the transfer was made (DD/MM/YYYY)</td>
<td>13/08/2017</td>
</tr>
<tr>
<td>time</td>
<td>string</td>
<td>required</td>
<td>Approximate time the transfer was made (HH:MM)</td>
<td>21:30</td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td>required</td>
<td>User&rsquo;s email so we can get back to them</td>
<td>bobby@gmail.com</td>
</tr>
<tr>
<td>amount</td>
<td>float</td>
<td>required</td>
<td>Amount user transferred</td>
<td>5.89</td>
</tr>
<tr>
<td>file</td>
<td>string</td>
<td>required</td>
<td>File or URL of the receipt image</td>
<td>bank_transfer_receipt.jpg</td>
</tr>
<tr>
<td>charge_id</td>
<td>string</td>
<td>Either charge or intent required</td>
<td>ID of the charge</td>
<td>b840cc9fc5a359c22ed2ccef3427aacd</td>
</tr>
<tr>
<td>intent_id</td>
<td>string</td>
<td>Either charge or intent required</td>
<td>ID of the intent</td>
<td>b840cc9fc5a359c22ed2ccef3427aacd</td>
</tr>
</tbody></table>

<h3 id="retrieve-support-ticket">Retrieve Support Ticket</h3>
<pre class="highlight shell"><code>curl <span class="s2">"https://sandbox.xfers.io/api/v3/support/&lt;SUPPORT_ID&gt;"</span> <span class="se">\</span>
  -H <span class="s2">"X-XFERS-USER-API-KEY: FVNbKjcGZ5Xx-Uf2XnxsrGtoxmLm9YEgokzDRoyshFc"</span>
</code></pre>
<pre class="highlight php"><code></code></pre>
<pre class="highlight python"><code></code></pre>
<pre class="highlight ruby"><code></code></pre>
<pre class="highlight java"><code></code></pre>

<blockquote>
<p>Processing Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"support_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"35331"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"intent_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b840cc9fc5a359c22ed2ccef3427aacd"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-08-13"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3:39"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"account_holder_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tian Wei"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"bank_abbrev"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BCA"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"account_no"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0124121241"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">132549</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IDR"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"processing"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Resolved Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"support_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"35331"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"intent_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b840cc9fc5a359c22ed2ccef3427aacd"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-08-13"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3:39"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"account_holder_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tian Wei"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"bank_abbrev"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BCA"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"account_no"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0124121241"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"resolved"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">132549</span><span class="p">,</span><span class="w"> 
  </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IDR"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The bank transfer of Rp 132549 has been detected and credited into tianwei@xfers.io's account"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Attention Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"support_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"35331"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"intent_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b840cc9fc5a359c22ed2ccef3427aacd"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-08-13"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3:39"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"account_holder_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tian Wei"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"bank_abbrev"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BCA"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"account_no"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0124121241"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"attention"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"We are unable to find a matching bank transfer. Please contact support@xfers.io."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Returns a particular support ticket.</p>

<h4 id="https-request">HTTPS Request</h4>

<p><code class="prettyprint">GET https://sandbox.xfers.io/api/v3/support/&lt;SUPPORT_ID&gt;</code></p>

<h3 id="list-all-support-tickets">List all Support Tickets</h3>
<pre class="highlight shell"><code>curl <span class="s2">"https://sandbox.xfers.io/api/v3/support"</span> <span class="se">\</span>
  -H <span class="s2">"X-XFERS-USER-API-KEY: FVNbKjcGZ5Xx-Uf2XnxsrGtoxmLm9YEgokzDRoyshFc"</span>
</code></pre>
<pre class="highlight php"><code></code></pre>
<pre class="highlight python"><code></code></pre>
<pre class="highlight ruby"><code></code></pre>
<pre class="highlight java"><code></code></pre>

<blockquote>
<p>Response:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"support_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"35331"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"intent_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b840cc9fc5a359c22ed2ccef3427aacd"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-08-13"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3:39"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"account_holder_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tian Wei"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bank_abbrev"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BCA"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"account_no"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0124121241"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">132549</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IDR"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"processing"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"support_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"40000"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"intent_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"94b72ef0fbdb4d55a26c581a8b1a2451"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-08-22"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"23:45"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"account_holder_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ying Ling"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bank_abbrev"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MANDIRI"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"account_no"</span><span class="p">:</span><span class="w"> </span><span class="s2">"038838383884"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">48854</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IDR"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"resolved"</span><span class="w">
  </span><span class="p">}</span><span class="w">  
</span><span class="p">]</span><span class="w">
</span></code></pre>

<p>List all support tickets linked to your platform.</p>

<h4 id="https-request">HTTPS Request</h4>

<p><code class="prettyprint">GET https://sandbox.xfers.io/api/v3/support</code></p>

<h4 id="parameters">Parameters</h4>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>string</td>
<td>optional</td>
<td>Filter by status</td>
<td>&#39;resolved&rsquo; or &#39;attention&rsquo; or &#39;processing&rsquo;</td>
</tr>
</tbody></table>

<h1 id="xfers-connect">Xfers Connect</h1>

<p>Xfers Connect is a set of APIs to gain access to your customers&rsquo; Xfers account, or to create &ldquo;ghost&rdquo; Xfers accounts on their behalf.</p>

<p>You might use Connect if you:</p>

<ul>
<li><p>Are building a platform that enables e-commerce like Shopify or tackthis. </p></li>
<li><p>Need to easily accept payments and pay out your service providers, like Grabtaxi with its drivers or yesHelper with its workers. (You can even create Xfers accounts for your users, so they only ever interact with your platform.)</p></li>
<li><p>Want to integrate Xfers wallet directly into your mobile or e-commerce app.</p></li>
</ul>

<p>In general, if you’re building a platform or marketplace that needs to pay third-parties or building applications that help Xfers users do more with their account or their data, Connect is likely the right solution for you.</p>

<h2 id="authentication">Authentication</h2>

<p>Xfers Connect uses a pair of API Keys and API Secret to access its APIs.</p>

<p>Write in to us at support@xfers.io to request for your Xfers Connect API Keys.
You will provided with a pair of keys named <code class="prettyprint">X-XFERS-APP-API-KEY</code> and <code class="prettyprint">X-XFERS-APP-SECRET-KEY</code>.</p>

<p>Xfers Connect expects the API key to be included in all API requests to the server in a header that looks like the following:</p>

<p><code class="prettyprint">X-XFERS-APP-API-KEY: Kx4EAd1DnsZkv3qXwps8AJ8jXCPsxPMHTAFLM2sKSyg</code></p>

<p>These keys are different from the usual API keys which you include in the <code class="prettyprint">X-XFERS-USER-API-KEY</code> header. App Connect API keys are only used for the Xfers Connect APIs. Thus instead of <code class="prettyprint">X-XFERS-USER-API-KEY: YOUR-NORMAL-USER-API-KEY</code> , you pass in <code class="prettyprint">X-XFERS-APP-API-KEY: THE-APP-API-KEY</code> as the header instead.</p>

<h2 id="signup/login-to-xfers">Signup/login to Xfers</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://sandbox.xfers.io/api/v3/authorize/signup_login"</span><span class="se">\</span>
  -H <span class="s2">"X-XFERS-APP-API-KEY: Kx4EAd1DnsZkv3qXwps8AJ8jXCPsxPMHTAFLM2sKSyg"</span><span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -d <span class="s1">'{"phone_no" : "+6597288608", "signature" : "c5535aa2c4d25aa1e18a6a7e421a34e51bda5565"}'</span>
</code></pre>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="k">require_once</span><span class="p">(</span><span class="s1">'vendor/autoload.php'</span><span class="p">);</span>

<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setSGSandbox</span><span class="p">();</span>
<span class="nv">$xfers_app_api_key</span> <span class="o">=</span> <span class="s1">'Kx4EAd1DnsZkv3qXwps8AJ8jXCPsxPMHTAFLM2sKSyg'</span><span class="p">;</span>
<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$resp</span> <span class="o">=</span> <span class="nx">\Xfers\Connect</span><span class="o">::</span><span class="na">authorize</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
        <span class="s1">'phone_no'</span> <span class="o">=&gt;</span> <span class="s1">'+6597288608'</span><span class="p">,</span>
        <span class="s1">'signature'</span> <span class="o">=&gt;</span> <span class="s1">'c5535aa2c4d25aa1e18a6a7e421a34e51bda5565'</span>
    <span class="p">),</span> <span class="nv">$xfers_app_api_key</span><span class="p">);</span>
    <span class="nb">print_r</span><span class="p">(</span><span class="nv">$resp</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Xfers\Error\Api</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">'Caught Api exception: '</span><span class="p">,</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">(),</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">xfers</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">xfconnect</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">error</span>

<span class="n">xfers</span><span class="o">.</span><span class="n">set_sg_sandbox</span><span class="p">()</span>
<span class="n">XFERS_APP_API_KEY</span> <span class="o">=</span> <span class="s">'Kx4EAd1DnsZkv3qXwps8AJ8jXCPsxPMHTAFLM2sKSyg'</span>

<span class="k">try</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">'Authorizing connect...'</span>
    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'phone_no'</span><span class="p">:</span> <span class="s">'+6597288608'</span><span class="p">,</span>
        <span class="s">'signature'</span><span class="p">:</span> <span class="s">'c5535aa2c4d25aa1e18a6a7e421a34e51bda5565'</span>
    <span class="p">}</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">xfconnect</span><span class="o">.</span><span class="n">authorize</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="n">XFERS_APP_API_KEY</span><span class="p">)</span>
    <span class="k">print</span> <span class="n">resp</span>
<span class="k">except</span> <span class="n">error</span><span class="o">.</span><span class="n">XfersError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">print</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'xfers'</span>

<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_sg_sandbox</span>
<span class="no">XFERS_APP_API_KEY</span> <span class="o">=</span> <span class="s1">'Kx4EAd1DnsZkv3qXwps8AJ8jXCPsxPMHTAFLM2sKSyg'</span>

<span class="k">begin</span>
  <span class="nb">puts</span> <span class="s1">'Authorizing connect...'</span>
  <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
      <span class="s1">'phone_no'</span><span class="o">=&gt;</span> <span class="s1">'+6597288608'</span><span class="p">,</span>
      <span class="s1">'signature'</span><span class="o">=&gt;</span> <span class="s1">'c5535aa2c4d25aa1e18a6a7e421a34e51bda5565'</span>
  <span class="p">}</span>
  <span class="n">resp</span> <span class="o">=</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">Connect</span><span class="p">.</span><span class="nf">authorize</span> <span class="n">params</span><span class="p">,</span> <span class="no">XFERS_APP_API_KEY</span>
  <span class="nb">puts</span> <span class="n">resp</span>
<span class="k">rescue</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">XfersError</span> <span class="o">=&gt;</span> <span class="n">e</span>
  <span class="nb">puts</span> <span class="n">e</span><span class="p">.</span><span class="nf">to_s</span>
<span class="k">end</span>
</code></pre>
<pre class="highlight java"><code><span class="n">Xfers</span><span class="o">.</span><span class="na">setSGSandbox</span><span class="o">();</span>
<span class="n">String</span> <span class="n">xfersAppApiKey</span> <span class="o">=</span> <span class="s">"Kx4EAd1DnsZkv3qXwps8AJ8jXCPsxPMHTAFLM2sKSyg"</span><span class="o">;</span>

<span class="k">try</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Authorizing"</span><span class="o">);</span>
    <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">params</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;();</span>
    <span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"phone_no"</span><span class="o">,</span> <span class="s">"+6597288608"</span><span class="o">);</span>
    <span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"signature"</span><span class="o">,</span> <span class="s">"a4f001729fe3accdbb0d9cfaf3b49b0678a4c91b"</span><span class="o">);</span>
    <span class="n">Response</span> <span class="n">response</span> <span class="o">=</span> <span class="n">Connect</span><span class="o">.</span><span class="na">authorize</span><span class="o">(</span><span class="n">params</span><span class="o">,</span> <span class="n">xfersAppApiKey</span><span class="o">);</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">.</span><span class="na">getMsg</span><span class="o">());</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span>
</code></pre>

<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This API call will attempt to login(existing user) or signup a new user.</p>

<p>An SMS with a OTP will be send to that number which must be used for <a href="/#get-user-api-token">get_token</a> api call.</p>

<h3 id="https-request">HTTPS Request</h3>

<p><code class="prettyprint">POST https://sandbox.xfers.io/api/v3/authorize/signup_login</code></p>

<h3 id="url-parameters">URL Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>phone_no</td>
<td>string</td>
<td>required</td>
<td>User mobile no</td>
<td>+6597288608</td>
</tr>
<tr>
<td>signature</td>
<td>string</td>
<td>required</td>
<td>SHA1 of phone_no + APP_SECRET_KEY</td>
<td>Digest::SHA1.hexdigest(&ldquo;+6597288608xHsrB268LjLfrzxAraYXLHdRMpTA5XRVLDbe9gmVQTU&rdquo;) = c5535aa2c4d25aa1e18a6a7e421a34e51bda5565</td>
</tr>
</tbody></table>

<h2 id="get-user-api-token">Get User API Token</h2>
<pre class="highlight shell"><code>curl <span class="s2">"https://sandbox.xfers.io/api/v3/authorize/get_token?otp=541231&amp;phone_no=%2B6597288608&amp;signature=bdc26373b3a78dd11dc840a1b7973f197cf34c91"</span> <span class="se">\</span>
  -H <span class="s2">"X-XFERS-APP-API-KEY: Kx4EAd1DnsZkv3qXwps8AJ8jXCPsxPMHTAFLM2sKSyg"</span>

<span class="c"># You can now change the X-XFERS-USER-API-KEY to the returned user_api_token </span>
<span class="c"># and make API calls on behalf of the connect user.</span>
</code></pre>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="k">require_once</span><span class="p">(</span><span class="s1">'vendor/autoload.php'</span><span class="p">);</span>

<span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setSGSandbox</span><span class="p">();</span>
<span class="nv">$xfers_app_api_key</span> <span class="o">=</span> <span class="s1">'Kx4EAd1DnsZkv3qXwps8AJ8jXCPsxPMHTAFLM2sKSyg'</span><span class="p">;</span>
<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$resp</span> <span class="o">=</span> <span class="nx">\Xfers\Connect</span><span class="o">::</span><span class="na">getToken</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
        <span class="s1">'otp'</span> <span class="o">=&gt;</span> <span class="s1">'541231'</span><span class="p">,</span>
        <span class="s1">'phone_no'</span> <span class="o">=&gt;</span> <span class="s1">'+6597288608'</span><span class="p">,</span>
        <span class="s1">'signature'</span> <span class="o">=&gt;</span> <span class="s1">'c5535aa2c4d25aa1e18a6a7e421a34e51bda5565'</span><span class="p">,</span>
        <span class="s1">'return_url'</span> <span class="o">=&gt;</span> <span class="s1">'https://mywebsite.com/api/v3/account_registration/completed'</span>
    <span class="p">),</span> <span class="nv">$xfers_app_api_key</span><span class="p">);</span>
    <span class="nb">print_r</span><span class="p">(</span><span class="nv">$resp</span><span class="p">);</span>

    <span class="c1"># You can now call \Xfers\Xfers::setApiKey again to change the X-XFERS-USER-API-KEY to the returned user_api_token 
</span>    <span class="c1"># and make API calls on behalf of the connect user.
</span>    <span class="nv">$user_api_token</span> <span class="o">=</span> <span class="nv">$resp</span><span class="p">[</span><span class="s1">'user_api_token'</span><span class="p">];</span>
    <span class="nx">\Xfers\Xfers</span><span class="o">::</span><span class="na">setApiKey</span><span class="p">(</span><span class="nv">$user_api_token</span><span class="p">);</span>
    <span class="nv">$resp</span> <span class="o">=</span> <span class="nx">\Xfers\User</span><span class="o">::</span><span class="na">retrieve</span><span class="p">();</span>

<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">\Xfers\Error\Api</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s1">'Caught Api exception: '</span><span class="p">,</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">(),</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<pre class="highlight python"><code><span class="kn">import</span> <span class="nn">xfers</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">xfconnect</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">xfuser</span>
<span class="kn">from</span> <span class="nn">xfers</span> <span class="kn">import</span> <span class="n">error</span>

<span class="n">xfers</span><span class="o">.</span><span class="n">set_sg_sandbox</span><span class="p">()</span>
<span class="n">XFERS_APP_API_KEY</span> <span class="o">=</span> <span class="s">'Kx4EAd1DnsZkv3qXwps8AJ8jXCPsxPMHTAFLM2sKSyg'</span>

<span class="k">try</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">'Getting token...'</span>
    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">'otp'</span><span class="p">:</span> <span class="s">'541231'</span><span class="p">,</span>
        <span class="s">'phone_no'</span><span class="p">:</span> <span class="s">'+6597288608'</span><span class="p">,</span>
        <span class="s">'signature'</span><span class="p">:</span> <span class="s">'c5535aa2c4d25aa1e18a6a7e421a34e51bda5565'</span><span class="p">,</span>
        <span class="s">'return_url'</span><span class="p">:</span> <span class="s">'https://mywebsite.com/api/v3/account_registration/completed'</span>
    <span class="p">}</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">xfconnect</span><span class="o">.</span><span class="n">get_token</span><span class="p">(</span><span class="n">params</span><span class="p">,</span> <span class="n">XFERS_APP_API_KEY</span><span class="p">)</span>
    <span class="k">print</span> <span class="n">resp</span>

    <span class="c"># You can now set xfers.api_key again to change the X-XFERS-USER-API-KEY to the returned user_api_token </span>
    <span class="c"># and make API calls on behalf of the connect user.</span>
    <span class="n">xfers</span><span class="o">.</span><span class="n">api_key</span> <span class="o">=</span> <span class="n">resp</span><span class="p">[</span><span class="s">'user_api_token'</span><span class="p">]</span>
    <span class="n">connected_user</span> <span class="o">=</span> <span class="n">xfuser</span><span class="o">.</span><span class="n">retrieve</span><span class="p">()</span>

<span class="k">except</span> <span class="n">error</span><span class="o">.</span><span class="n">XfersError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="k">print</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre>
<pre class="highlight ruby"><code><span class="nb">require</span> <span class="s1">'xfers'</span>

<span class="no">Xfers</span><span class="p">.</span><span class="nf">set_sg_sandbox</span>
<span class="no">XFERS_APP_API_KEY</span> <span class="o">=</span> <span class="s1">'Kx4EAd1DnsZkv3qXwps8AJ8jXCPsxPMHTAFLM2sKSyg'</span>

<span class="k">begin</span>
  <span class="nb">puts</span> <span class="s1">'Getting connect token...'</span>
  <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
      <span class="s1">'otp'</span><span class="o">=&gt;</span> <span class="s1">'541231'</span><span class="p">,</span>
      <span class="s1">'phone_no'</span><span class="o">=&gt;</span> <span class="s1">'+6597288608'</span><span class="p">,</span>
      <span class="s1">'signature'</span><span class="o">=&gt;</span> <span class="s1">'c5535aa2c4d25aa1e18a6a7e421a34e51bda5565'</span><span class="p">,</span>
      <span class="s1">'return_url'</span><span class="o">=&gt;</span> <span class="s1">'https://mywebsite.com/api/v3/account_registration/completed'</span>
  <span class="p">}</span>
  <span class="n">resp</span> <span class="o">=</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">Connect</span><span class="p">.</span><span class="nf">get_token</span> <span class="n">params</span><span class="p">,</span> <span class="no">XFERS_APP_API_KEY</span>
  <span class="n">user_api_token</span> <span class="o">=</span>  <span class="n">resp</span><span class="p">[</span><span class="ss">:user_api_token</span><span class="p">]</span>
  <span class="nb">puts</span> <span class="n">resp</span>

  <span class="c1"># You can now call Xfers.set_api_key again to change the X-XFERS-USER-API-KEY to the returned user_api_token </span>
  <span class="c1"># and make API calls on behalf of the connect user.</span>

  <span class="no">Xfers</span><span class="p">.</span><span class="nf">set_api_key</span> <span class="n">user_api_token</span>

  <span class="n">connect_user</span> <span class="o">=</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">User</span><span class="p">.</span><span class="nf">retrieve</span>
  <span class="nb">puts</span> <span class="n">connect_user</span><span class="p">[</span><span class="ss">:first_name</span><span class="p">]</span>
  <span class="nb">puts</span> <span class="n">connect_user</span><span class="p">[</span><span class="ss">:last_name</span><span class="p">]</span>
  <span class="nb">puts</span> <span class="n">connect_user</span><span class="p">[</span><span class="ss">:available_balance</span><span class="p">]</span>
  <span class="nb">puts</span> <span class="n">connect_user</span>

<span class="k">rescue</span> <span class="no">Xfers</span><span class="o">::</span><span class="no">XfersError</span> <span class="o">=&gt;</span> <span class="n">e</span>
  <span class="nb">puts</span> <span class="n">e</span><span class="p">.</span><span class="nf">to_s</span>
<span class="k">end</span>

</code></pre>
<pre class="highlight java"><code><span class="n">Xfers</span><span class="o">.</span><span class="na">setSGSandbox</span><span class="o">();</span>
<span class="n">String</span> <span class="n">xfersAppApiKey</span> <span class="o">=</span> <span class="s">"AeWpKz5cdPoJFUwF53sBee_WsSoqym_hspiX3bcoB_Y"</span><span class="o">;</span>

<span class="k">try</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Getting token"</span><span class="o">);</span>
    <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">params</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;();</span>
    <span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"otp"</span><span class="o">,</span> <span class="s">"541231"</span><span class="o">);</span>
    <span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"phone_no"</span><span class="o">,</span> <span class="s">"+6597288608"</span><span class="o">);</span>
    <span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"signature"</span><span class="o">,</span> <span class="s">"132e60cc2b6076824fac1ac4c1bb6b47cc3f9036"</span><span class="o">);</span>
    <span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"return_url"</span><span class="o">,</span> <span class="s">"https://mywebsite.com/api/v3/account_registration/completed"</span><span class="o">);</span>
    <span class="n">Response</span> <span class="n">response</span> <span class="o">=</span> <span class="n">Connect</span><span class="o">.</span><span class="na">getToken</span><span class="o">(</span><span class="n">params</span><span class="o">,</span> <span class="n">xfersAppApiKey</span><span class="o">);</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">.</span><span class="na">getMsg</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">.</span><span class="na">getUserApiToken</span><span class="o">());</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">.</span><span class="na">getSignUpUrl</span><span class="o">());</span>

    <span class="c1">// You can now set Xfers.apiKey again to change the X-XFERS-USER-API-KEY to the returned user_api_token </span>
    <span class="c1">// and make API calls on behalf of the connect user.</span>

    <span class="n">Xfers</span><span class="o">.</span><span class="na">apiKey</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">getUserApiToken</span><span class="o">();</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Retrieving connected user"</span><span class="o">);</span>
    <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="na">retrieve</span><span class="o">();</span>

<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
<span class="o">}</span>
</code></pre>

<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight json"><code><span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"user_api_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1DnsZkv3qXwKx4EAdps8AJ8jXCPsxP2sKSygMHTAFLM"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"sign_up_url"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"https://sandbox.xfers.io/api/v3/account_registration?phone_no=%2B6597288608&amp;token=4014d3e9f0600f78dbfabd86036de7b008f70c52"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This API call will return the user&rsquo;s <code class="prettyprint">user_api_token</code>. You should save this token in database for reuse. There is no need to go through the connect flow again for this user.</p>

<p>It will also return a <code class="prettyprint">sign_up_url</code> if and ONLY IF they do not already have an Xfers account. The url can be loaded to serve a page that allow user to complete their Xfers account registration (this is optional and is only needed if the user wants to login to their Xfers Dashboard).</p>

<p>If you choose to redirect new Xfers user to the unique sign_up_url to allow them to complete their Xfers account registrations, upon successfully account registration, Xfers will redirect user back to the <code class="prettyprint">return_url</code> specified or the default at &ldquo;&lt;Endpoint&gt;/api/v3/account_registration/completed&rdquo;. The automated SMS from Xfers will not be sent if user complete their account registration this way within 15mins.</p>

<aside class="warning">
Remember to encode the &rsquo;+&rsquo; sign in your phone no during your GET request. It should be &rsquo;%2B&rsquo; instead of &rsquo;+&rsquo;
</aside>

<h3 id="https-request">HTTPS Request</h3>

<p><code class="prettyprint">GET https://sandbox.xfers.io/api/v3/authorize/get_token?otp=541231&amp;phone_no=%2B6597288608&amp;signature=bdc26373b3a78dd11dc840a1b7973f197cf34c91</code></p>

<h3 id="url-parameters">URL Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>otp</td>
<td>string</td>
<td>required</td>
<td>6 digit one-time-password send over SMS</td>
<td>541231</td>
</tr>
<tr>
<td>phone_no</td>
<td>string</td>
<td>required</td>
<td>User mobile no</td>
<td>+6597288608</td>
</tr>
<tr>
<td>signature</td>
<td>string</td>
<td>required</td>
<td>SHA1 of phone_no + OTP + APP_SECRET_KEY</td>
<td>Digest::SHA1.hexdigest(&ldquo;+659728860851231xHsrB268LjLfrzxAraYXLHdRMpTA5XRVLDbe9gmVQTU&rdquo;) = bdc26373b3a78dd11dc840a1b7973f197cf34c91</td>
</tr>
<tr>
<td>return_url</td>
<td>string</td>
<td>optional</td>
<td>Url that new user will be redirected after they completed Xfers account registration at <code class="prettyprint">sign_up_url</code> provided.</td>
<td>Default &ldquo;&lt;Endpoint&gt;/api/v3/account_registration/completed&rdquo;</td>
</tr>
</tbody></table>

<aside class="notice">
Note that the signature required here for /get_token  is different from the one for /signup_login. 
</aside>

<p><code class="prettyprint">/authorize/signup_login</code> - SHA1 of phone_no + APP_SECRET_KEY</p>

<p><code class="prettyprint">/authorize/get_token</code> - SHA1 of phone_no + OTP + APP_SECRET_KEY</p>

<h2 id="what&#39;s-next">What&rsquo;s Next</h2>

<p>Now that you have gotten a <code class="prettyprint">user_api_token</code> linked to your customer, you can </p>

<ul>
<li>Pass this <code class="prettyprint">user_api_token</code> as params when <a href="/#creating-a-charge">creating a charge</a> to bypass authentication for your customer</li>
<li>Pass this <code class="prettyprint">user_api_token</code> as params when adding and charging credit cards cards </li>
<li>Pass this <code class="prettyprint">user_api_token</code> as params when <a href="/#creating-a-payout">creating a payout</a> in place of the recipient field</li>
<li>Use the header <code class="prettyprint">&quot;X-XFERS-USER-API-KEY&quot;: &quot;the user_api_token&quot;</code> (instead of <code class="prettyprint">&quot;X-XFERS-USER-API-KEY&quot;: &quot;your own token&quot;</code>) to modify <a href="/#user-account">user details</a> and <a href="/#bank-account">bank accounts</a> on behalf of your user</li>
</ul>

<h1 id="postman-collection-(coming-soon!)">Postman Collection (Coming soon!)</h1>

<p><a href="https://www.getpostman.com">Postman</a> helps you to construct HTTP requests quickly, save them for later use and analyze the responses sent by the API.</p>

<p>We have created a Postman collection so you can easily test out our APIs. All you need is a <a href="https://sandbox.xfers.io">sandbox account</a> to get started!</p>

<h1 id="xfers-tokenize">Xfers Tokenize</h1>

<blockquote>
<p>Tokenized credit card response</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"first6"</span><span class="p">:</span><span class="w"> </span><span class="s2">"424242"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"last4"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4242"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"credit_card_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tok_197O8gB8MXWbQJDjPMILsIr6"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Xfers Tokenize is a set of SDKs that allow you to collect credit card details without having the sensitive information touch your server. By doing this, you do not have to deal with <a href="https://www.pcisecuritystandards.org/index.php">PCI compliance issues</a>.</p>

<p>Credit card tokenization is the process of sending the credit card information to a PCI compliant party which will store the credit card details on your behalf and return a credit card token. This token can then be used to charge the credit card or to save the card with a user. </p>

<h2 id="singapore">Singapore</h2>

<p>There are two ways of doing this tokenization: </p>

<ol>
<li>After <a href="/#creating-a-charge">creating a Charge</a>, a <code class="prettyprint">checkout_url</code> is returned. If <code class="prettyprint">user_api_token</code> and <code class="prettyprint">card_only</code> params are used, the <code class="prettyprint">checkout_url</code> will lead directly to the credit card form. You can either redirect the user to that page, or embed it as a webview (usually for mobile apps). Thus you are in control of all aspects of the UI except for the credit card form. </li>
<li>Use Xfers Tokenize to return a credit card token which you can use to complete a credit card charge, or to add the credit card to your user&rsquo;s account. Xfers Tokenize will make use of the form you created to collect credit card details, so the styling is entirely in your control.</li>
</ol>

<p>As you can see, the two ways have a tradeoff between UI/UX customization and the amount of technical integration required on your end.  </p>

<p>There are two ways of using the tokenized credit card response.</p>

<ol>
<li>Use <a href="/#charge-guest-card">Charge Guest Card</a> to charge this credit card for guest user. This can be done on the client side and does not need API key authentication</li>
<li>Send the response to your server and <a href="/#add-a-card">add the card</a> to your user</li>
</ol>

<h2 id="indonesia">Indonesia</h2>

<ul>
<li>Use <a href="https://github.com/Xfers/xfers-indo.js">Indonesia Xfers.js</a> to redirect your customers to the credit card form</li>
<li>To use a saved credit card token, retrieve the list of cards saved from the <a href="#cards-(indonesia)">Cards API</a>. Make this API call in your backend, then pass the result to frontend.</li>
<li>Let your user select the appropriate card, and pass the token to <code class="prettyprint">Xfers.chargeCard</code> in Xfers.js</li>
</ul>

<h2 id="web">Web</h2>

<p><a href="https://github.com/Xfers/xfers.js">Singapore Xfers.js</a> is our client-side Javascript library for credit card tokenization.
<a href="https://github.com/Xfers/xfers-indo.js">Indonesia Xfers.js</a> is our client-side Javascript library for credit card tokenization.</p>

<h2 id="android">Android</h2>

<p>Coming soon</p>

<h2 id="ios">iOS</h2>

<p>Coming soon</p>

          <h1 id="errors">Errors</h1>

<p>Xfers API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request &ndash; Your request is invalid or has errors.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized &ndash; Your API key is incorrect.</td>
</tr>
<tr>
<td>404</td>
<td>Not Found &ndash; The specified request could not be found</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests &ndash; You are making too many request too quickly.</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error &ndash; We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable &ndash; We&rsquo;re temporarially offline for maintanance. Please try again later.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
                <a href="#" data-language-name="php">php</a>
                <a href="#" data-language-name="python">python</a>
                <a href="#" data-language-name="ruby">ruby</a>
                <a href="#" data-language-name="java">java</a>
          </div>
      </div>
    </div>
  </body>
</html>
